import{aj as S,ak as M,ae as g,af as v,al as $,r as R,j as s,ab as y,ad as k,ah as A,am as T}from"./index-CL_WHih3.js";var z=S({chartName:"BarChart",GraphicalChild:M,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:g},{axisType:"yAxis",AxisComp:v}],formatAxisMap:$});function P({data:n,targetBins:h=15,compact:a=!1}){const m=R.useMemo(()=>{if(!n||n.length<2)return[];const o=n.map(t=>t.rpm).filter(t=>t>0);if(o.length===0)return[];const i=Math.min(...o),r=Math.max(...o),x=r-i;let e;const l=x/h;l<=100?e=100:l<=250?e=250:l<=500?e=500:e=Math.ceil(l/500)*500;const C=Math.floor(i/e)*e,j=Math.ceil(r/e)*e,d=[];for(let t=C;t<j;t+=e)d.push({rpmRange:`${t}`,rpmMin:t,rpmMax:t+e,timeSpent:0});for(let t=1;t<n.length;t++){const c=n[t].t_s-n[t-1].t_s;if(c<=0)continue;const f=n[t].rpm,p=d.find(u=>f>=u.rpmMin&&f<u.rpmMax);p&&(p.timeSpent+=c)}return d.filter(t=>t.timeSpent>.001)},[n,h]);if(!m||m.length===0)return s.jsx("div",{className:"text-center text-muted",style:{padding:"var(--space-6)"},children:"No RPM data available"});const b=(o,i)=>{const r=o/(i-1||1);if(r<.5){const x=Math.round(34+200*(r*2)),e=Math.round(197+-18*(r*2)),l=Math.round(94+-86*(r*2));return`rgb(${x}, ${e}, ${l})`}else{const x=Math.round(234+5*((r-.5)*2)),e=Math.round(179-179*((r-.5)*2)),l=Math.round(8+60*((r-.5)*2));return`rgb(${x}, ${e}, ${l})`}};return s.jsx(y,{width:"100%",height:"100%",children:s.jsxs(z,{data:m,margin:a?{top:4,right:8,left:35,bottom:20}:{top:5,right:20,left:0,bottom:25},children:[s.jsx(k,{strokeDasharray:"3 3",stroke:"var(--color-border)",opacity:.3}),s.jsx(g,{dataKey:"rpmRange",stroke:"var(--color-text-muted)",tick:{fontSize:a?8:9,fill:"var(--color-text-muted)"},interval:a?"preserveStartEnd":0,angle:a?0:-45,textAnchor:a?"middle":"end",height:a?20:50,label:a?void 0:{value:"Engine RPM",position:"insideBottom",offset:-5,fontSize:10,fill:"var(--color-text-muted)"}}),s.jsx(v,{stroke:"var(--color-text-muted)",tick:{fontSize:a?8:9,fill:"var(--color-text-muted)"},tickFormatter:o=>`${o.toFixed(1)}s`,width:a?32:40}),s.jsx(A,{contentStyle:{backgroundColor:"var(--color-bg)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",color:"var(--color-text)",fontSize:"0.75rem"},formatter:o=>[`${o.toFixed(2)}s`,"Time"],labelFormatter:(o,i)=>{if(i&&i[0]){const r=i[0].payload;return`${r.rpmMin} - ${r.rpmMax} RPM`}return""}}),s.jsx(M,{dataKey:"timeSpent",radius:[3,3,0,0],children:m.map((o,i)=>s.jsx(T,{fill:b(i,m.length)},`cell-${i}`))})]})})}export{P as default};
//# sourceMappingURL=RPMHistogram-ln-WQ5Ma.js.map
