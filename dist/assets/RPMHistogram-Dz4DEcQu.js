import{t as $,B as M,X as g,Y as v,w as y,r as R,x as n,y as j,z as A,T,s as k}from"./index-QwRq_KcK.js";var z=$({chartName:"BarChart",GraphicalChild:M,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:g},{axisType:"yAxis",AxisComp:v}],formatAxisMap:y});function E({data:a,targetBins:h=15,compact:s=!1}){const m=R.useMemo(()=>{if(!a||a.length<2)return[];const o=a.map(t=>t.rpm).filter(t=>t>0);if(o.length===0)return[];const i=Math.min(...o),r=Math.max(...o),x=r-i;let e;const l=x/h;l<=100?e=100:l<=250?e=250:l<=500?e=500:e=Math.ceil(l/500)*500;const C=Math.floor(i/e)*e,S=Math.ceil(r/e)*e,d=[];for(let t=C;t<S;t+=e)d.push({rpmRange:`${t}`,rpmMin:t,rpmMax:t+e,timeSpent:0});for(let t=1;t<a.length;t++){const c=a[t].t_s-a[t-1].t_s;if(c<=0)continue;const p=a[t].rpm,f=d.find(u=>p>=u.rpmMin&&p<u.rpmMax);f&&(f.timeSpent+=c)}return d.filter(t=>t.timeSpent>.001)},[a,h]);if(!m||m.length===0)return n.jsx("div",{className:"text-center text-muted",style:{padding:"var(--space-6)"},children:"No RPM data available"});const b=(o,i)=>{const r=o/(i-1||1);if(r<.5){const x=Math.round(34+200*(r*2)),e=Math.round(197+-18*(r*2)),l=Math.round(94+-86*(r*2));return`rgb(${x}, ${e}, ${l})`}else{const x=Math.round(234+5*((r-.5)*2)),e=Math.round(179-179*((r-.5)*2)),l=Math.round(8+60*((r-.5)*2));return`rgb(${x}, ${e}, ${l})`}};return n.jsx(j,{width:"100%",height:"100%",children:n.jsxs(z,{data:m,margin:s?{top:4,right:8,left:35,bottom:20}:{top:5,right:20,left:0,bottom:25},children:[n.jsx(A,{strokeDasharray:"3 3",stroke:"var(--color-border)",opacity:.3}),n.jsx(g,{dataKey:"rpmRange",stroke:"var(--color-text-muted)",tick:{fontSize:s?8:9,fill:"var(--color-text-muted)"},interval:s?"preserveStartEnd":0,angle:s?0:-45,textAnchor:s?"middle":"end",height:s?20:50,label:s?void 0:{value:"Engine RPM",position:"insideBottom",offset:-5,fontSize:10,fill:"var(--color-text-muted)"}}),n.jsx(v,{stroke:"var(--color-text-muted)",tick:{fontSize:s?8:9,fill:"var(--color-text-muted)"},tickFormatter:o=>`${o.toFixed(1)}s`,width:s?32:40}),n.jsx(T,{contentStyle:{backgroundColor:"var(--color-bg)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",color:"var(--color-text)",fontSize:"0.75rem"},formatter:o=>[`${o.toFixed(2)}s`,"Time"],labelFormatter:(o,i)=>{if(i&&i[0]){const r=i[0].payload;return`${r.rpmMin} - ${r.rpmMax} RPM`}return""}}),n.jsx(M,{dataKey:"timeSpent",radius:[3,3,0,0],children:m.map((o,i)=>n.jsx(k,{fill:b(i,m.length)},`cell-${i}`))})]})})}export{E as default};
//# sourceMappingURL=RPMHistogram-Dz4DEcQu.js.map
