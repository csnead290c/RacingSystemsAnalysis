{"version":3,"file":"VehicleEditorPopup-BSuaZut8.js","sources":["../../src/shared/components/VehicleEditorPanel.tsx","../../src/shared/components/VehicleEditorPopup.tsx"],"sourcesContent":["/**\r\n * VehicleEditorPanel - Compact 1-page vehicle editor like original VB6 program\r\n * \r\n * This component displays all vehicle settings in a single scrollable view,\r\n * organized into logical sections but without tabs. Designed to be used:\r\n * 1. As the main vehicle editor (replacing tabbed layout)\r\n * 2. As a popup/sidebar editor in the ET Sim page\r\n */\r\n\r\nimport { useState } from 'react';\r\nimport type { Vehicle } from '../../domain/schemas/vehicle.schema';\r\nimport type { RaceLength } from '../../domain/config/raceLengths';\r\nimport { \r\n  WorksheetButton, \r\n  FrontalAreaWorksheet, \r\n  TireWidthWorksheet, \r\n  GearRatioWorksheet,\r\n  RolloutWorksheet,\r\n} from './WorksheetModal';\r\nimport { TOOLTIPS } from '../../domain/config/tooltips';\r\n\r\ntype TransType = 'clutch' | 'converter';\r\n\r\nconst FUEL_TYPES = [\r\n  { value: 'Gasoline', label: 'Gasoline (Carb)' },\r\n  { value: 'Gasoline EFI', label: 'Gasoline (EFI)' },\r\n  { value: 'Methanol', label: 'Methanol (Carb)' },\r\n  { value: 'Methanol EFI', label: 'Methanol (EFI)' },\r\n  { value: 'Nitromethane', label: 'Nitromethane' },\r\n  { value: 'E85', label: 'E85' },\r\n] as const;\r\n\r\nconst BODY_STYLES = [\r\n  { value: 1, label: 'Dragster w/Wing' },\r\n  { value: 2, label: 'Dragster' },\r\n  { value: 3, label: 'Funny Car' },\r\n  { value: 4, label: 'Altered/Roadster' },\r\n  { value: 5, label: 'Fastback' },\r\n  { value: 6, label: 'Sedan' },\r\n  { value: 7, label: 'Wagon/Van' },\r\n  { value: 8, label: 'Motorcycle' },\r\n] as const;\r\n\r\ninterface VehicleEditorPanelProps {\r\n  vehicle: Partial<Vehicle>;\r\n  onChange: (vehicle: Partial<Vehicle>) => void;\r\n  isPro?: boolean;\r\n  compact?: boolean; // More compact layout for popup use\r\n  showName?: boolean; // Show name field (false for popup where vehicle is already selected)\r\n}\r\n\r\nexport default function VehicleEditorPanel({\r\n  vehicle,\r\n  onChange,\r\n  isPro = false,\r\n  compact = false,\r\n  showName = true,\r\n}: VehicleEditorPanelProps) {\r\n  // Worksheet modal states\r\n  const [showFrontalAreaWorksheet, setShowFrontalAreaWorksheet] = useState(false);\r\n  const [showTireWidthWorksheet, setShowTireWidthWorksheet] = useState(false);\r\n  const [showGearRatioWorksheet, setShowGearRatioWorksheet] = useState(false);\r\n  const [showRolloutWorksheet, setShowRolloutWorksheet] = useState(false);\r\n\r\n  const transType: TransType = (vehicle.transmissionType as TransType) ?? 'clutch';\r\n\r\n  // Helper to update a field\r\n  const updateField = (field: keyof Vehicle, value: any) => {\r\n    onChange({ ...vehicle, [field]: value });\r\n  };\r\n\r\n  // Helper to update gear array at index\r\n  const updateGearAt = (field: 'gearRatios' | 'gearEfficiencies' | 'shiftRPMs', index: number, value: number) => {\r\n    const arr = [...(vehicle[field] ?? [])];\r\n    arr[index] = value;\r\n    onChange({ ...vehicle, [field]: arr });\r\n  };\r\n\r\n  // Styles\r\n  const sectionStyle: React.CSSProperties = {\r\n    marginBottom: compact ? '12px' : '20px',\r\n    padding: compact ? '10px' : '14px',\r\n    backgroundColor: 'var(--color-surface)',\r\n    borderRadius: '8px',\r\n    border: '1px solid var(--color-border)',\r\n  };\r\n\r\n  const sectionTitleStyle: React.CSSProperties = {\r\n    fontSize: compact ? '0.8rem' : '0.9rem',\r\n    fontWeight: 600,\r\n    color: 'var(--color-accent)',\r\n    marginBottom: compact ? '8px' : '12px',\r\n    textTransform: 'uppercase',\r\n    letterSpacing: '0.5px',\r\n  };\r\n\r\n  const gridStyle: React.CSSProperties = {\r\n    display: 'grid',\r\n    gridTemplateColumns: compact ? '1fr 1fr' : '1fr 1fr 1fr',\r\n    gap: compact ? '8px' : '12px',\r\n  };\r\n\r\n  const labelStyle: React.CSSProperties = {\r\n    fontSize: compact ? '0.7rem' : '0.75rem',\r\n    color: 'var(--color-text-muted)',\r\n    marginBottom: '2px',\r\n    display: 'block',\r\n  };\r\n\r\n  const inputStyle: React.CSSProperties = {\r\n    width: '100%',\r\n    padding: compact ? '6px 8px' : '8px 10px',\r\n    fontSize: compact ? '0.85rem' : '0.9rem',\r\n    borderRadius: '4px',\r\n    border: '1px solid var(--color-border)',\r\n    backgroundColor: 'var(--color-bg)',\r\n    color: 'var(--color-text)',\r\n  };\r\n\r\n  const selectStyle: React.CSSProperties = {\r\n    ...inputStyle,\r\n    cursor: 'pointer',\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {/* ===== IDENTITY ===== */}\r\n      {showName && (\r\n        <div style={sectionStyle}>\r\n          <div style={sectionTitleStyle}>Identity</div>\r\n          <div style={gridStyle}>\r\n            <div style={{ gridColumn: 'span 2' }}>\r\n              <label style={labelStyle}>Vehicle Name *</label>\r\n              <input\r\n                type=\"text\"\r\n                style={inputStyle}\r\n                value={vehicle.name ?? ''}\r\n                onChange={(e) => updateField('name', e.target.value)}\r\n                placeholder=\"My Race Car\"\r\n              />\r\n            </div>\r\n            <div>\r\n              <label style={labelStyle}>Race Length</label>\r\n              <select\r\n                style={selectStyle}\r\n                value={vehicle.defaultRaceLength ?? 'QUARTER'}\r\n                onChange={(e) => updateField('defaultRaceLength', e.target.value as RaceLength)}\r\n              >\r\n                <option value=\"EIGHTH\">1/8 Mile</option>\r\n                <option value=\"QUARTER\">1/4 Mile</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* ===== VEHICLE / WEIGHT ===== */}\r\n      <div style={sectionStyle}>\r\n        <div style={sectionTitleStyle}>Vehicle</div>\r\n        <div style={gridStyle}>\r\n          <div>\r\n            <label style={labelStyle}>Weight (lb) *</label>\r\n            <input\r\n              type=\"number\"\r\n              style={inputStyle}\r\n              value={vehicle.weightLb ?? ''}\r\n              onChange={(e) => updateField('weightLb', parseFloat(e.target.value))}\r\n            />\r\n          </div>\r\n          <div>\r\n            <label style={labelStyle}>Wheelbase (in)</label>\r\n            <input\r\n              type=\"number\"\r\n              style={inputStyle}\r\n              value={vehicle.wheelbaseIn ?? 108}\r\n              onChange={(e) => updateField('wheelbaseIn', parseFloat(e.target.value))}\r\n            />\r\n          </div>\r\n          <div>\r\n            <label style={labelStyle}>\r\n              Rollout (in)\r\n              <WorksheetButton onClick={() => setShowRolloutWorksheet(true)} tooltip={TOOLTIPS.btnRollout} />\r\n            </label>\r\n            <input\r\n              type=\"number\"\r\n              step=\"0.1\"\r\n              style={inputStyle}\r\n              value={vehicle.rolloutIn ?? 12}\r\n              onChange={(e) => updateField('rolloutIn', parseFloat(e.target.value))}\r\n            />\r\n          </div>\r\n          <div>\r\n            <label style={labelStyle}>Body Style</label>\r\n            <select\r\n              style={selectStyle}\r\n              value={vehicle.bodyStyle ?? 6}\r\n              onChange={(e) => updateField('bodyStyle', parseInt(e.target.value))}\r\n            >\r\n              {BODY_STYLES.map(bs => (\r\n                <option key={bs.value} value={bs.value}>{bs.label}</option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n          <div>\r\n            <label style={labelStyle}>\r\n              Frontal Area (ft²)\r\n              <WorksheetButton onClick={() => setShowFrontalAreaWorksheet(true)} tooltip={TOOLTIPS.btnFrontalArea} />\r\n            </label>\r\n            <input\r\n              type=\"number\"\r\n              step=\"0.1\"\r\n              style={inputStyle}\r\n              value={vehicle.frontalAreaFt2 ?? 22}\r\n              onChange={(e) => updateField('frontalAreaFt2', parseFloat(e.target.value))}\r\n            />\r\n          </div>\r\n          <div>\r\n            <label style={labelStyle}>Tire Dia (in)</label>\r\n            <input\r\n              type=\"number\"\r\n              step=\"0.1\"\r\n              style={inputStyle}\r\n              value={vehicle.tireDiaIn ?? 28}\r\n              onChange={(e) => updateField('tireDiaIn', parseFloat(e.target.value))}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* ===== ENGINE ===== */}\r\n      <div style={sectionStyle}>\r\n        <div style={sectionTitleStyle}>Engine</div>\r\n        <div style={gridStyle}>\r\n          <div>\r\n            <label style={labelStyle}>Peak HP *</label>\r\n            <input\r\n              type=\"number\"\r\n              style={inputStyle}\r\n              value={vehicle.powerHP ?? ''}\r\n              onChange={(e) => updateField('powerHP', parseFloat(e.target.value))}\r\n            />\r\n          </div>\r\n          <div>\r\n            <label style={labelStyle}>RPM @ Peak HP *</label>\r\n            <input\r\n              type=\"number\"\r\n              step=\"100\"\r\n              style={inputStyle}\r\n              value={vehicle.rpmAtPeakHP ?? 6500}\r\n              onChange={(e) => updateField('rpmAtPeakHP', parseFloat(e.target.value))}\r\n            />\r\n          </div>\r\n          <div>\r\n            <label style={labelStyle}>Displacement (CID)</label>\r\n            <input\r\n              type=\"number\"\r\n              style={inputStyle}\r\n              value={vehicle.displacementCID ?? 350}\r\n              onChange={(e) => updateField('displacementCID', parseFloat(e.target.value))}\r\n            />\r\n          </div>\r\n          <div>\r\n            <label style={labelStyle}>Fuel Type</label>\r\n            <select\r\n              style={selectStyle}\r\n              value={vehicle.fuelType ?? 'Gasoline'}\r\n              onChange={(e) => updateField('fuelType', e.target.value)}\r\n            >\r\n              {FUEL_TYPES.map(ft => (\r\n                <option key={ft.value} value={ft.value}>{ft.label}</option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n          <div>\r\n            <label style={labelStyle}>Shift RPM</label>\r\n            <input\r\n              type=\"number\"\r\n              step=\"100\"\r\n              style={inputStyle}\r\n              value={vehicle.shiftRPMs?.[0] ?? 6500}\r\n              onChange={(e) => {\r\n                const rpm = parseFloat(e.target.value);\r\n                const numGears = vehicle.gearRatios?.length ?? 4;\r\n                updateField('shiftRPMs', Array(numGears).fill(rpm));\r\n              }}\r\n            />\r\n          </div>\r\n          <div>\r\n            <label style={labelStyle}>Rev Limiter</label>\r\n            <input\r\n              type=\"number\"\r\n              step=\"100\"\r\n              style={inputStyle}\r\n              value={vehicle.revLimiterRPM ?? ''}\r\n              placeholder=\"None\"\r\n              onChange={(e) => updateField('revLimiterRPM', e.target.value ? parseFloat(e.target.value) : undefined)}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div style={{ marginTop: '8px' }}>\r\n          <label style={{ display: 'flex', alignItems: 'center', gap: '6px', fontSize: '0.8rem', cursor: 'pointer' }}>\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={vehicle.n2oEnabled ?? false}\r\n              onChange={(e) => updateField('n2oEnabled', e.target.checked)}\r\n            />\r\n            N2O (Nitrous Oxide)\r\n          </label>\r\n        </div>\r\n      </div>\r\n\r\n      {/* ===== TRANSMISSION ===== */}\r\n      <div style={sectionStyle}>\r\n        <div style={sectionTitleStyle}>Transmission</div>\r\n        <div style={{ marginBottom: '10px' }}>\r\n          <div style={{ display: 'flex', gap: '12px' }}>\r\n            <label style={{ display: 'flex', alignItems: 'center', gap: '4px', fontSize: '0.85rem', cursor: 'pointer' }}>\r\n              <input\r\n                type=\"radio\"\r\n                name=\"transType\"\r\n                checked={transType === 'clutch'}\r\n                onChange={() => updateField('transmissionType', 'clutch')}\r\n              />\r\n              Clutch\r\n            </label>\r\n            <label style={{ display: 'flex', alignItems: 'center', gap: '4px', fontSize: '0.85rem', cursor: 'pointer' }}>\r\n              <input\r\n                type=\"radio\"\r\n                name=\"transType\"\r\n                checked={transType === 'converter'}\r\n                onChange={() => updateField('transmissionType', 'converter')}\r\n              />\r\n              Converter\r\n            </label>\r\n          </div>\r\n        </div>\r\n        <div style={gridStyle}>\r\n          {transType === 'clutch' ? (\r\n            <>\r\n              <div>\r\n                <label style={labelStyle}>Launch RPM</label>\r\n                <input\r\n                  type=\"number\"\r\n                  step=\"100\"\r\n                  style={inputStyle}\r\n                  value={vehicle.clutchLaunchRPM ?? 5500}\r\n                  onChange={(e) => updateField('clutchLaunchRPM', parseFloat(e.target.value))}\r\n                />\r\n              </div>\r\n              <div>\r\n                <label style={labelStyle}>Slip RPM</label>\r\n                <input\r\n                  type=\"number\"\r\n                  step=\"100\"\r\n                  style={inputStyle}\r\n                  value={vehicle.clutchSlipRPM ?? 6000}\r\n                  onChange={(e) => updateField('clutchSlipRPM', parseFloat(e.target.value))}\r\n                />\r\n              </div>\r\n              <div>\r\n                <label style={labelStyle}>Slippage Factor</label>\r\n                <input\r\n                  type=\"number\"\r\n                  step=\"0.001\"\r\n                  style={inputStyle}\r\n                  value={vehicle.clutchSlippage ?? 1.004}\r\n                  onChange={(e) => updateField('clutchSlippage', parseFloat(e.target.value))}\r\n                />\r\n              </div>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <div>\r\n                <label style={labelStyle}>Stall RPM</label>\r\n                <input\r\n                  type=\"number\"\r\n                  step=\"100\"\r\n                  style={inputStyle}\r\n                  value={vehicle.converterStallRPM ?? 3000}\r\n                  onChange={(e) => updateField('converterStallRPM', parseFloat(e.target.value))}\r\n                />\r\n              </div>\r\n              <div>\r\n                <label style={labelStyle}>Torque Mult</label>\r\n                <input\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  style={inputStyle}\r\n                  value={vehicle.converterTorqueMult ?? 2.0}\r\n                  onChange={(e) => updateField('converterTorqueMult', parseFloat(e.target.value))}\r\n                />\r\n              </div>\r\n              <div>\r\n                <label style={labelStyle}>Slippage %</label>\r\n                <input\r\n                  type=\"number\"\r\n                  step=\"0.1\"\r\n                  style={inputStyle}\r\n                  value={vehicle.converterSlippage ?? 5}\r\n                  onChange={(e) => updateField('converterSlippage', parseFloat(e.target.value))}\r\n                />\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* ===== FINAL DRIVE ===== */}\r\n      <div style={sectionStyle}>\r\n        <div style={sectionTitleStyle}>Final Drive</div>\r\n        <div style={gridStyle}>\r\n          <div>\r\n            <label style={labelStyle}>\r\n              Rear Gear Ratio\r\n              <WorksheetButton onClick={() => setShowGearRatioWorksheet(true)} tooltip=\"Calculate gear ratio\" />\r\n            </label>\r\n            <input\r\n              type=\"number\"\r\n              step=\"0.01\"\r\n              style={inputStyle}\r\n              value={vehicle.rearGear ?? 3.73}\r\n              onChange={(e) => updateField('rearGear', parseFloat(e.target.value))}\r\n            />\r\n          </div>\r\n          <div>\r\n            <label style={labelStyle}>Trans Efficiency</label>\r\n            <input\r\n              type=\"number\"\r\n              step=\"0.01\"\r\n              style={inputStyle}\r\n              value={vehicle.transEfficiency ?? 0.97}\r\n              onChange={(e) => updateField('transEfficiency', parseFloat(e.target.value))}\r\n            />\r\n          </div>\r\n          <div>\r\n            <label style={labelStyle}># of Gears</label>\r\n            <select\r\n              style={selectStyle}\r\n              value={vehicle.gearRatios?.length ?? 4}\r\n              onChange={(e) => {\r\n                const numGears = parseInt(e.target.value);\r\n                const currentRatios = vehicle.gearRatios ?? [2.5, 1.8, 1.4, 1.0];\r\n                const currentShifts = vehicle.shiftRPMs ?? [7000, 7000, 7000, 7000];\r\n                \r\n                // Adjust arrays to new size\r\n                const newRatios = Array(numGears).fill(0).map((_, i) => currentRatios[i] ?? 1.0);\r\n                const newShifts = Array(numGears).fill(0).map((_, i) => currentShifts[i] ?? 7000);\r\n                \r\n                onChange({\r\n                  ...vehicle,\r\n                  gearRatios: newRatios,\r\n                  shiftRPMs: newShifts,\r\n                });\r\n              }}\r\n            >\r\n              {[1, 2, 3, 4, 5, 6].map(n => (\r\n                <option key={n} value={n}>{n}</option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n        </div>\r\n        \r\n        {/* Gear ratios inline */}\r\n        {(vehicle.gearRatios?.length ?? 0) > 1 && (\r\n          <div style={{ marginTop: '10px' }}>\r\n            <label style={labelStyle}>Gear Ratios</label>\r\n            <div style={{ display: 'flex', gap: '6px', flexWrap: 'wrap' }}>\r\n              {vehicle.gearRatios?.map((ratio, i) => (\r\n                <div key={i} style={{ width: compact ? '60px' : '70px' }}>\r\n                  <input\r\n                    type=\"number\"\r\n                    step=\"0.01\"\r\n                    style={{ ...inputStyle, textAlign: 'center' }}\r\n                    value={ratio}\r\n                    onChange={(e) => updateGearAt('gearRatios', i, parseFloat(e.target.value))}\r\n                    title={`Gear ${i + 1}`}\r\n                  />\r\n                  <div style={{ fontSize: '0.65rem', textAlign: 'center', color: 'var(--color-text-muted)' }}>\r\n                    {i + 1}{i === 0 ? 'st' : i === 1 ? 'nd' : i === 2 ? 'rd' : 'th'}\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* ===== THROTTLE STOP (Pro only or if enabled) ===== */}\r\n      {(isPro || vehicle.throttleStopEnabled) && (\r\n        <div style={sectionStyle}>\r\n          <div style={sectionTitleStyle}>Throttle Stop</div>\r\n          <div style={{ marginBottom: '10px' }}>\r\n            <label style={{ display: 'flex', alignItems: 'center', gap: '6px', fontSize: '0.8rem', cursor: 'pointer' }}>\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={vehicle.throttleStopEnabled ?? false}\r\n                onChange={(e) => updateField('throttleStopEnabled', e.target.checked)}\r\n              />\r\n              Enable Throttle Stop\r\n            </label>\r\n          </div>\r\n          {vehicle.throttleStopEnabled && (\r\n            <div style={gridStyle}>\r\n              <div>\r\n                <label style={labelStyle}>Delay (sec)</label>\r\n                <input\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  style={inputStyle}\r\n                  value={vehicle.throttleStopDelay ?? 0.5}\r\n                  onChange={(e) => updateField('throttleStopDelay', parseFloat(e.target.value))}\r\n                />\r\n              </div>\r\n              <div>\r\n                <label style={labelStyle}>Duration (sec)</label>\r\n                <input\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  style={inputStyle}\r\n                  value={vehicle.throttleStopDuration ?? 0.3}\r\n                  onChange={(e) => updateField('throttleStopDuration', parseFloat(e.target.value))}\r\n                />\r\n              </div>\r\n              <div>\r\n                <label style={labelStyle}>Throttle %</label>\r\n                <input\r\n                  type=\"number\"\r\n                  step=\"1\"\r\n                  style={inputStyle}\r\n                  value={vehicle.throttleStopPct ?? 50}\r\n                  onChange={(e) => updateField('throttleStopPct', parseFloat(e.target.value))}\r\n                />\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Worksheet Modals */}\r\n      <FrontalAreaWorksheet\r\n        isOpen={showFrontalAreaWorksheet}\r\n        onClose={() => setShowFrontalAreaWorksheet(false)}\r\n        onApply={(value) => {\r\n          updateField('frontalAreaFt2', value);\r\n          setShowFrontalAreaWorksheet(false);\r\n        }}\r\n      />\r\n      <TireWidthWorksheet\r\n        isOpen={showTireWidthWorksheet}\r\n        onClose={() => setShowTireWidthWorksheet(false)}\r\n        onApply={(value) => {\r\n          updateField('tireWidthIn', value);\r\n          setShowTireWidthWorksheet(false);\r\n        }}\r\n      />\r\n      <GearRatioWorksheet\r\n        isOpen={showGearRatioWorksheet}\r\n        onClose={() => setShowGearRatioWorksheet(false)}\r\n        onApply={(value) => {\r\n          updateField('rearGear', value);\r\n          setShowGearRatioWorksheet(false);\r\n        }}\r\n      />\r\n      <RolloutWorksheet\r\n        isOpen={showRolloutWorksheet}\r\n        onClose={() => setShowRolloutWorksheet(false)}\r\n        onApply={(value) => {\r\n          updateField('rolloutIn', value);\r\n          setShowRolloutWorksheet(false);\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","/**\r\n * VehicleEditorPopup - Popup modal for editing vehicle settings in ET Sim\r\n * \r\n * Allows quick adjustments to vehicle specs without leaving the simulation page.\r\n * Changes can be applied temporarily (for what-if) or saved permanently.\r\n */\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport VehicleEditorPanel from './VehicleEditorPanel';\r\nimport type { Vehicle } from '../../domain/schemas/vehicle.schema';\r\nimport { saveVehicle } from '../../state/vehicles';\r\n\r\ninterface VehicleEditorPopupProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  vehicle: Vehicle | null;\r\n  onApply: (vehicle: Vehicle) => void; // Apply changes (temporary or permanent)\r\n  isPro?: boolean;\r\n}\r\n\r\nexport default function VehicleEditorPopup({\r\n  isOpen,\r\n  onClose,\r\n  vehicle,\r\n  onApply,\r\n  isPro = false,\r\n}: VehicleEditorPopupProps) {\r\n  const [editedVehicle, setEditedVehicle] = useState<Partial<Vehicle>>({});\r\n  const [saving, setSaving] = useState(false);\r\n  const [hasChanges, setHasChanges] = useState(false);\r\n\r\n  // Initialize edited vehicle when popup opens\r\n  useEffect(() => {\r\n    if (isOpen && vehicle) {\r\n      setEditedVehicle({ ...vehicle });\r\n      setHasChanges(false);\r\n    }\r\n  }, [isOpen, vehicle]);\r\n\r\n  // Handle changes from the editor panel\r\n  const handleChange = (updated: Partial<Vehicle>) => {\r\n    setEditedVehicle(updated);\r\n    setHasChanges(true);\r\n  };\r\n\r\n  // Apply changes temporarily (just update the sim)\r\n  const handleApplyTemp = () => {\r\n    if (editedVehicle && vehicle) {\r\n      onApply({ ...vehicle, ...editedVehicle } as Vehicle);\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  // Save changes permanently\r\n  const handleSave = async () => {\r\n    if (!editedVehicle || !vehicle) return;\r\n    \r\n    setSaving(true);\r\n    try {\r\n      const updatedVehicle = { ...vehicle, ...editedVehicle } as Vehicle;\r\n      await saveVehicle(updatedVehicle);\r\n      onApply(updatedVehicle);\r\n      onClose();\r\n    } catch (error) {\r\n      console.error('Failed to save vehicle:', error);\r\n      alert('Failed to save vehicle. Please try again.');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  // Handle escape key\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n    \r\n    const handleKeyDown = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape') {\r\n        onClose();\r\n      }\r\n    };\r\n    \r\n    window.addEventListener('keydown', handleKeyDown);\r\n    return () => window.removeEventListener('keydown', handleKeyDown);\r\n  }, [isOpen, onClose]);\r\n\r\n  if (!isOpen || !vehicle) return null;\r\n\r\n  return (\r\n    <>\r\n      {/* Backdrop */}\r\n      <div\r\n        onClick={onClose}\r\n        style={{\r\n          position: 'fixed',\r\n          top: 0,\r\n          left: 0,\r\n          right: 0,\r\n          bottom: 0,\r\n          backgroundColor: 'rgba(0, 0, 0, 0.6)',\r\n          zIndex: 1000,\r\n        }}\r\n      />\r\n\r\n      {/* Modal */}\r\n      <div style={{\r\n        position: 'fixed',\r\n        top: '50%',\r\n        left: '50%',\r\n        transform: 'translate(-50%, -50%)',\r\n        backgroundColor: 'var(--color-bg)',\r\n        borderRadius: '12px',\r\n        boxShadow: '0 20px 60px rgba(0,0,0,0.5)',\r\n        zIndex: 1001,\r\n        width: '500px',\r\n        maxWidth: '95vw',\r\n        maxHeight: '90vh',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n      }}>\r\n        {/* Header */}\r\n        <div style={{\r\n          padding: '14px 18px',\r\n          borderBottom: '1px solid var(--color-border)',\r\n          display: 'flex',\r\n          justifyContent: 'space-between',\r\n          alignItems: 'center',\r\n          flexShrink: 0,\r\n        }}>\r\n          <div>\r\n            <h3 style={{ margin: 0, fontSize: '1.1rem', color: 'var(--color-text)' }}>\r\n              ⚙️ Edit Vehicle\r\n            </h3>\r\n            <div style={{ fontSize: '0.8rem', color: 'var(--color-text-muted)' }}>\r\n              {vehicle.name}\r\n            </div>\r\n          </div>\r\n          <button\r\n            onClick={onClose}\r\n            style={{\r\n              background: 'none',\r\n              border: 'none',\r\n              fontSize: '1.5rem',\r\n              cursor: 'pointer',\r\n              color: 'var(--color-text-muted)',\r\n              padding: '0 4px',\r\n            }}\r\n          >\r\n            ×\r\n          </button>\r\n        </div>\r\n\r\n        {/* Content - scrollable */}\r\n        <div style={{\r\n          padding: '16px',\r\n          overflowY: 'auto',\r\n          flex: 1,\r\n        }}>\r\n          <VehicleEditorPanel\r\n            vehicle={editedVehicle}\r\n            onChange={handleChange}\r\n            isPro={isPro}\r\n            compact={true}\r\n            showName={false}\r\n          />\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div style={{\r\n          padding: '12px 18px',\r\n          borderTop: '1px solid var(--color-border)',\r\n          display: 'flex',\r\n          justifyContent: 'space-between',\r\n          alignItems: 'center',\r\n          flexShrink: 0,\r\n          backgroundColor: 'var(--color-surface)',\r\n        }}>\r\n          <div style={{ fontSize: '0.75rem', color: 'var(--color-text-muted)' }}>\r\n            {hasChanges ? '• Unsaved changes' : 'No changes'}\r\n          </div>\r\n          <div style={{ display: 'flex', gap: '8px' }}>\r\n            <button\r\n              onClick={onClose}\r\n              style={{\r\n                padding: '8px 16px',\r\n                borderRadius: '6px',\r\n                border: '1px solid var(--color-border)',\r\n                backgroundColor: 'transparent',\r\n                color: 'var(--color-text)',\r\n                cursor: 'pointer',\r\n                fontSize: '0.85rem',\r\n              }}\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button\r\n              onClick={handleApplyTemp}\r\n              disabled={!hasChanges}\r\n              style={{\r\n                padding: '8px 16px',\r\n                borderRadius: '6px',\r\n                border: '1px solid var(--color-accent)',\r\n                backgroundColor: 'transparent',\r\n                color: 'var(--color-accent)',\r\n                cursor: hasChanges ? 'pointer' : 'not-allowed',\r\n                opacity: hasChanges ? 1 : 0.5,\r\n                fontSize: '0.85rem',\r\n              }}\r\n              title=\"Apply changes for this session only\"\r\n            >\r\n              Apply\r\n            </button>\r\n            <button\r\n              onClick={handleSave}\r\n              disabled={!hasChanges || saving}\r\n              style={{\r\n                padding: '8px 16px',\r\n                borderRadius: '6px',\r\n                border: 'none',\r\n                backgroundColor: hasChanges ? 'var(--color-accent)' : 'var(--color-border)',\r\n                color: 'white',\r\n                cursor: hasChanges && !saving ? 'pointer' : 'not-allowed',\r\n                fontSize: '0.85rem',\r\n                fontWeight: 500,\r\n              }}\r\n              title=\"Save changes permanently\"\r\n            >\r\n              {saving ? 'Saving...' : 'Save'}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"],"names":["FUEL_TYPES","BODY_STYLES","VehicleEditorPanel","vehicle","onChange","isPro","compact","showName","showFrontalAreaWorksheet","setShowFrontalAreaWorksheet","useState","showTireWidthWorksheet","setShowTireWidthWorksheet","showGearRatioWorksheet","setShowGearRatioWorksheet","showRolloutWorksheet","setShowRolloutWorksheet","transType","updateField","field","value","updateGearAt","index","arr","sectionStyle","sectionTitleStyle","gridStyle","labelStyle","inputStyle","selectStyle","jsxs","jsx","e","WorksheetButton","TOOLTIPS","bs","ft","_a","rpm","numGears","Fragment","_b","currentRatios","currentShifts","newRatios","_","i","newShifts","n","_c","_d","ratio","FrontalAreaWorksheet","TireWidthWorksheet","GearRatioWorksheet","RolloutWorksheet","VehicleEditorPopup","isOpen","onClose","onApply","editedVehicle","setEditedVehicle","saving","setSaving","hasChanges","setHasChanges","useEffect","handleChange","updated","handleApplyTemp","handleSave","updatedVehicle","saveVehicle","error","handleKeyDown"],"mappings":"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"}