import{u as _t,a as jt,b as Ur,r as v,j as e,c as Ae,s as gr,d as qr,e as $r,f as Qr,g as St,v as Rt,h as Je,V as Xe,i as Jr,k as Xr,R as Lr,W as dr,T as cr,P as Dr,l as Pt,m as zr,B as kt,n as Q,Z as $e,o as De,J as Oe,p as Ue,A as xe,C as Kr,q as Yr,t as Tt,w as Ct,F as Et,x as wt,K as Mt,y as At,z as It,D as Ft,E as Bt,G as Ht,H as Nr,I as Wr,L as Zr,M as Lt,N as Dt,O as zt,Q as Nt,S as Wt,U as Me,X as Gt,Y as Vt,_ as mr,$ as Ot,a0 as Ut,a1 as qt,a2 as et,a3 as qe,a4 as rt,a5 as hr,a6 as He,a7 as $t,a8 as Qt,a9 as Jt,aa as Xt}from"./index-YEFCsBDD.js";const Ke=["quarterJr","quarterPro","admin"],pr={quarterJr:"Quarter Jr",quarterPro:"Quarter Pro",admin:"Admin / Developer"},Kt={quarterJr:"Basic mode - enter peak HP and RPM, other parameters are calculated automatically",quarterPro:"Full mode - enter complete HP curve and all vehicle parameters",admin:"Developer mode - all features plus dev tools and diagnostics"};function Yt(r,t){const n=Ke.indexOf(r),i=Ke.indexOf(t);return n>=i}function Zt(r){return Yt(r,"quarterPro")}const fe={engine:["peakHP","rpmAtPeakHP","displacement_cid","fuelSystem"],vehicle:["weight_lb","wheelbase_in","tireDia_in","tireWidth_in","rollout_in","bodyStyle"],drivetrain:["gearRatios","finalDrive","shiftRPM","isConverter","slipStallRPM","converterDia_in"],environment:["elevation_ft","barometer_inHg","temperature_F","relHumidity_pct","trackTemp_F","tractionIndex","wind_mph","wind_angle_deg"]},Le={engine:["hpCurve","hpTorqueMultiplier"],vehicle:["staticFrontWeight_lb","cgHeight_in","overhang_in"],drivetrain:["perGearEff","shiftsRPM","launchRPM","slippage","torqueMult","lockup"],aero:["frontalArea_ft2","Cd","Cl"],pmi:["engine_flywheel_clutch","transmission_driveshaft","tires_wheels_ringgear"]};function eo(r){return Zt(r)?{engine:[...fe.engine,...Le.engine],vehicle:[...fe.vehicle,...Le.vehicle],drivetrain:[...fe.drivetrain,...Le.drivetrain],environment:[...fe.environment],aero:[...Le.aero],pmi:[...Le.pmi]}:{engine:fe.engine,vehicle:fe.vehicle,drivetrain:fe.drivetrain,environment:fe.environment,aero:[],pmi:[]}}function ro(){const r=_t(),t=jt(),{setFlag:n,setUserLevel:i,resetFlags:c}=Ur(),s=eo(t),[p,u]=v.useState([]),[a,k]=v.useState(""),[S,C]=v.useState(!0),[T,P]=v.useState(!1),m=v.useRef(null);v.useEffect(()=>{const g=console.log,_=console.warn,o=console.error,b=(x,...l)=>{const j=new Date().toISOString().split("T")[1].slice(0,12),M=l.map(N=>typeof N=="object"?JSON.stringify(N):String(N)).join(" "),A=`[${j}] [${x}] ${M}`;u(N=>[...N.slice(-500),A])};return console.log=(...x)=>{g(...x),b("LOG",...x)},console.warn=(...x)=>{_(...x),b("WARN",...x)},console.error=(...x)=>{o(...x),b("ERROR",...x)},()=>{console.log=g,console.warn=_,console.error=o}},[]),v.useEffect(()=>{S&&m.current&&(m.current.scrollTop=m.current.scrollHeight)},[p,S]);const y=()=>{const g=p.join(`
`),_=new Blob([g],{type:"text/plain"}),o=URL.createObjectURL(_),b=document.createElement("a");b.href=o,b.download=`rsa-logs-${Date.now()}.log`,b.click(),URL.revokeObjectURL(o)},h=a?p.filter(g=>g.toLowerCase().includes(a.toLowerCase())):p,R=[{key:"vb6StrictMode",label:"VB6 Strict Mode",description:"Require complete VB6 fixture for simulation (no defaults)"},{key:"showDiagnostics",label:"Show Diagnostics",description:"Display debug information in console and UI"},{key:"enableStepTrace",label:"Step Trace",description:"Log detailed step-by-step simulation data"},{key:"enableEnergyLogging",label:"Energy Logging",description:"Log energy balance calculations"}];return e.jsxs("div",{style:{padding:"2rem",height:"100%",overflow:"auto"},children:[e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx("h2",{style:{marginTop:0,marginBottom:"0.5rem"},children:"Settings & Flags"}),e.jsx("p",{style:{color:"var(--color-muted)",fontSize:"0.875rem",margin:0},children:"Configure user level, feature flags, and debug options."})]}),e.jsxs("div",{style:{padding:"1rem",backgroundColor:"var(--color-surface)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)",marginBottom:"1rem"},children:[e.jsx("h3",{style:{marginTop:0,marginBottom:"1rem",fontSize:"1rem",fontWeight:"600"},children:"User Level (Program Tier)"}),e.jsx("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},children:Ke.map(g=>e.jsx("button",{onClick:()=>i(g),style:{flex:1,padding:"0.75rem",fontSize:"0.875rem",fontWeight:t===g?"600":"400",backgroundColor:t===g?g==="admin"?"#8b5cf6":g==="quarterPro"?"#3b82f6":"#10b981":"var(--color-bg)",color:t===g?"white":"var(--color-text)",border:`2px solid ${t===g?g==="admin"?"#8b5cf6":g==="quarterPro"?"#3b82f6":"#10b981":"var(--color-border)"}`,borderRadius:"var(--radius-md)",cursor:"pointer",transition:"all 0.2s"},children:pr[g]},g))}),e.jsxs("div",{style:{fontSize:"0.875rem",color:"var(--color-muted)",marginBottom:"1rem"},children:[e.jsx("strong",{children:"Current:"})," ",pr[t]," ‚Äî ",Kt[t]]}),e.jsxs("details",{style:{fontSize:"0.875rem"},children:[e.jsxs("summary",{style:{cursor:"pointer",fontWeight:"500",marginBottom:"0.5rem"},children:["View Available Inputs for ",pr[t]]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"0.75rem",padding:"0.75rem",backgroundColor:"var(--color-bg)",borderRadius:"var(--radius-sm)",marginTop:"0.5rem"},children:[e.jsxs("div",{children:[e.jsx("strong",{style:{fontSize:"0.75rem",color:"var(--color-muted)"},children:"Engine"}),e.jsxs("ul",{style:{margin:"0.25rem 0",paddingLeft:"1rem",fontSize:"0.75rem"},children:[s.engine.slice(0,5).map(g=>e.jsx("li",{children:g},g)),s.engine.length>5&&e.jsxs("li",{children:["+",s.engine.length-5," more"]})]})]}),e.jsxs("div",{children:[e.jsx("strong",{style:{fontSize:"0.75rem",color:"var(--color-muted)"},children:"Vehicle"}),e.jsxs("ul",{style:{margin:"0.25rem 0",paddingLeft:"1rem",fontSize:"0.75rem"},children:[s.vehicle.slice(0,5).map(g=>e.jsx("li",{children:g},g)),s.vehicle.length>5&&e.jsxs("li",{children:["+",s.vehicle.length-5," more"]})]})]}),e.jsxs("div",{children:[e.jsx("strong",{style:{fontSize:"0.75rem",color:"var(--color-muted)"},children:"Drivetrain"}),e.jsxs("ul",{style:{margin:"0.25rem 0",paddingLeft:"1rem",fontSize:"0.75rem"},children:[s.drivetrain.slice(0,5).map(g=>e.jsx("li",{children:g},g)),s.drivetrain.length>5&&e.jsxs("li",{children:["+",s.drivetrain.length-5," more"]})]})]})]})]})]}),e.jsxs("div",{style:{padding:"1rem",backgroundColor:"var(--color-surface)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)",marginBottom:"1rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h3",{style:{margin:0,fontSize:"1rem",fontWeight:"600"},children:"Feature Flags"}),e.jsx("button",{onClick:c,style:{padding:"0.375rem 0.75rem",fontSize:"0.75rem",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Reset All"})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.75rem"},children:R.map(g=>e.jsxs("label",{style:{display:"flex",alignItems:"flex-start",gap:"0.5rem",padding:"0.75rem",backgroundColor:r[g.key]?"#dbeafe":"var(--color-bg)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:r[g.key],onChange:_=>n(g.key,_.target.checked),style:{marginTop:"2px"}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"500",fontSize:"0.875rem"},children:g.label}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--color-muted)"},children:g.description})]})]},g.key))})]}),e.jsxs("div",{style:{padding:"1rem",backgroundColor:"var(--color-surface)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[e.jsxs("h3",{style:{margin:0,fontSize:"1rem",fontWeight:"600"},children:["Console Logs (",p.length,")"]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{onClick:()=>P(!T),style:{padding:"0.375rem 0.75rem",fontSize:"0.75rem",backgroundColor:T?"#3b82f6":"#6b7280",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:T?"Hide":"Show"}),e.jsx("button",{onClick:y,disabled:p.length===0,style:{padding:"0.375rem 0.75rem",fontSize:"0.75rem",backgroundColor:p.length>0?"#10b981":"#d1d5db",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:p.length>0?"pointer":"not-allowed"},children:"Download"}),e.jsx("button",{onClick:()=>u([]),disabled:p.length===0,style:{padding:"0.375rem 0.75rem",fontSize:"0.75rem",backgroundColor:p.length>0?"#ef4444":"#d1d5db",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:p.length>0?"pointer":"not-allowed"},children:"Clear"})]})]}),T&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx("input",{type:"text",value:a,onChange:g=>k(g.target.value),placeholder:"Filter logs...",style:{flex:1,padding:"0.375rem 0.5rem",fontSize:"0.75rem",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",backgroundColor:"var(--color-bg)"}}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"0.75rem"},children:[e.jsx("input",{type:"checkbox",checked:S,onChange:g=>C(g.target.checked)}),"Auto-scroll"]})]}),e.jsx("div",{ref:m,style:{height:"200px",padding:"0.5rem",backgroundColor:"#1e293b",color:"#e2e8f0",borderRadius:"var(--radius-sm)",fontFamily:"monospace",fontSize:"0.7rem",overflow:"auto",whiteSpace:"pre-wrap",wordBreak:"break-all"},children:h.length===0?e.jsx("div",{style:{color:"#9ca3af",fontStyle:"italic"},children:p.length===0?"No logs yet":"No matches"}):h.map((g,_)=>{let o="#e2e8f0";return g.includes("[WARN]")&&(o="#fbbf24"),g.includes("[ERROR]")&&(o="#ef4444"),e.jsx("div",{style:{color:o},children:g},_)})})]})]})]})}function Ye(r){var n,i,c,s,p,u;const t=[];return r.drivetrain?((n=r.drivetrain.gearRatios)!=null&&n.length||t.push("drivetrain.gearRatios"),(i=r.drivetrain.perGearEff)!=null&&i.length||t.push("drivetrain.perGearEff"),r.drivetrain.gearRatios&&r.drivetrain.perGearEff&&r.drivetrain.gearRatios.length!==r.drivetrain.perGearEff.length&&t.push("perGearEff length must equal gearRatios length"),!r.drivetrain.clutch&&!r.drivetrain.converter&&t.push("drivetrain.clutch or drivetrain.converter"),(!r.engineHP||r.engineHP.length<2)&&t.push("engineHP (>=2 points)"),(c=r.fuel)!=null&&c.type||t.push("fuel.type"),((s=r.pmi)==null?void 0:s.engine_flywheel_clutch)==null&&t.push("pmi.engine_flywheel_clutch"),((p=r.pmi)==null?void 0:p.transmission_driveshaft)==null&&t.push("pmi.transmission_driveshaft"),((u=r.pmi)==null?void 0:u.tires_wheels_ringgear)==null&&t.push("pmi.tires_wheels_ringgear"),t.length?{ok:!1,missing:t}:{ok:!0}):(t.push("drivetrain.*"),{ok:!1,missing:t})}function to(){var m,y;const{fixture:r}=Ae(),[t,n]=v.useState(null),[i,c]=v.useState(null),[s,p]=v.useState(null),[u,a]=v.useState(null),[k,S]=v.useState(null),C=()=>{a("validate"),S(null);try{const h=Ye(r);n(h)}catch(h){S((h==null?void 0:h.message)??String(h))}finally{a(null)}},T=async()=>{a("dryrun"),S(null),c(null);try{const h=Ye(r);c({ok:h.ok,message:h.ok?"Fixture can be normalized successfully":`Missing fields: ${h.missing.join(", ")}`,details:h})}catch(h){S((h==null?void 0:h.message)??String(h))}finally{a(null)}},P=async()=>{var h,R,g;a("smoke"),S(null),p(null);try{const _=await gr("VB6Exact",{...r,raceLengthFt:1320});p({et_s:_.et_s,mph:_.mph,model:(h=_.meta)==null?void 0:h.model,steps:(g=(R=_.meta)==null?void 0:R.termination)==null?void 0:g.steps})}catch(_){S((_==null?void 0:_.message)??String(_))}finally{a(null)}};return e.jsxs("div",{style:{padding:"2rem"},children:[e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx("h2",{style:{marginTop:0,marginBottom:"0.5rem"},children:"Health Check"}),e.jsx("p",{style:{color:"var(--color-muted)",fontSize:"0.875rem",margin:0},children:"Quick validation and testing tools for VB6 fixtures."})]}),k&&e.jsx("div",{style:{padding:"1rem",backgroundColor:"#fee2e2",border:"1px solid #ef4444",borderRadius:"var(--radius-md)",marginBottom:"1rem",whiteSpace:"pre-wrap",fontFamily:"monospace",fontSize:"0.875rem",color:"#991b1b"},children:k}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[e.jsx("button",{onClick:C,disabled:u!==null,style:{padding:"1rem",fontSize:"1rem",fontWeight:500,backgroundColor:u==="validate"?"#9ca3af":"#3b82f6",color:"white",border:"none",borderRadius:"var(--radius-md)",cursor:u!==null?"not-allowed":"pointer",transition:"background-color 0.2s"},children:u==="validate"?"Validating...":"Validate Current VB6 Fixture"}),e.jsx("button",{onClick:T,disabled:u!==null,style:{padding:"1rem",fontSize:"1rem",fontWeight:500,backgroundColor:u==="dryrun"?"#9ca3af":"#8b5cf6",color:"white",border:"none",borderRadius:"var(--radius-md)",cursor:u!==null?"not-allowed":"pointer",transition:"background-color 0.2s"},children:u==="dryrun"?"Running...":"Normalize & Dry-Run"}),e.jsx("button",{onClick:P,disabled:u!==null,style:{padding:"1rem",fontSize:"1rem",fontWeight:500,backgroundColor:u==="smoke"?"#9ca3af":"#10b981",color:"white",border:"none",borderRadius:"var(--radius-md)",cursor:u!==null?"not-allowed":"pointer",transition:"background-color 0.2s"},children:u==="smoke"?"Running...":"Smoke Sim (1320 ft)"})]}),t&&e.jsxs("div",{style:{padding:"1rem",backgroundColor:t.ok?"#dcfce7":"#fee2e2",border:`1px solid ${t.ok?"#22c55e":"#ef4444"}`,borderRadius:"var(--radius-md)",marginBottom:"1rem"},children:[e.jsx("h3",{style:{marginTop:0,marginBottom:"0.5rem",fontSize:"1rem"},children:"Validation Result"}),t.ok?e.jsx("p",{style:{margin:0,color:"#166534"},children:"‚úÖ Fixture is valid and complete"}):e.jsxs("div",{children:[e.jsx("p",{style:{margin:"0 0 0.5rem 0",color:"#991b1b",fontWeight:500},children:"‚ùå Fixture is incomplete"}),e.jsx("p",{style:{margin:"0 0 0.5rem 0",color:"#991b1b",fontSize:"0.875rem"},children:"Missing fields:"}),e.jsx("ul",{style:{margin:0,paddingLeft:"1.5rem",color:"#991b1b"},children:t.missing.map(h=>e.jsx("li",{style:{fontSize:"0.875rem"},children:h},h))})]})]}),i&&e.jsxs("div",{style:{padding:"1rem",backgroundColor:i.ok?"#dbeafe":"#fee2e2",border:`1px solid ${i.ok?"#3b82f6":"#ef4444"}`,borderRadius:"var(--radius-md)",marginBottom:"1rem"},children:[e.jsx("h3",{style:{marginTop:0,marginBottom:"0.5rem",fontSize:"1rem"},children:"Dry-Run Result"}),e.jsxs("p",{style:{margin:0,color:i.ok?"#1e40af":"#991b1b"},children:[i.ok?"‚úÖ":"‚ùå"," ",i.message]})]}),s&&e.jsxs("div",{style:{padding:"1rem",backgroundColor:"#dcfce7",border:"1px solid #22c55e",borderRadius:"var(--radius-md)",marginBottom:"1rem"},children:[e.jsx("h3",{style:{marginTop:0,marginBottom:"1rem",fontSize:"1rem"},children:"Smoke Test Result"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#166534",marginBottom:"0.25rem"},children:"ET (s)"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#166534"},children:((m=s.et_s)==null?void 0:m.toFixed(3))??"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#166534",marginBottom:"0.25rem"},children:"MPH"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#166534"},children:((y=s.mph)==null?void 0:y.toFixed(2))??"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#166534",marginBottom:"0.25rem"},children:"Model"}),e.jsx("div",{style:{fontSize:"1rem",fontWeight:"500",color:"#166534"},children:s.model??"N/A"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#166534",marginBottom:"0.25rem"},children:"Steps"}),e.jsx("div",{style:{fontSize:"1rem",fontWeight:"500",color:"#166534"},children:s.steps??"N/A"})]})]})]}),e.jsxs("div",{style:{padding:"1rem",backgroundColor:"#eff6ff",border:"1px solid #3b82f6",borderRadius:"var(--radius-md)"},children:[e.jsx("h3",{style:{marginTop:0,marginBottom:"0.5rem",fontSize:"1rem"},children:"About These Tests"}),e.jsxs("ul",{style:{margin:0,paddingLeft:"1.5rem",fontSize:"0.875rem"},children:[e.jsxs("li",{style:{marginBottom:"0.5rem"},children:[e.jsx("strong",{children:"Validate:"})," Checks if all required VB6 fixture fields are present"]}),e.jsxs("li",{style:{marginBottom:"0.5rem"},children:[e.jsx("strong",{children:"Dry-Run:"})," Validates that the fixture can be normalized (no actual simulation)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Smoke Sim:"})," Runs a quick 1320 ft simulation to verify the fixture works end-to-end"]})]})]})]})}function oo(r){var t;return(((t=r[r.length-1])==null?void 0:t.rpm)??8e3)+100}function io(r){const t=r.pmi??{};return{engine_flywheel_clutch:t.engine_flywheel_clutch??3.42,transmission_driveshaft:t.transmission_driveshaft??.247,tires_wheels_ringgear:t.tires_wheels_ringgear??50.8}}function no(r){const t=r.environment??{};return{elevationFt:t.elevation_ft??t.elevation??0,baroInHg:t.barometer_inHg??t.barometer??29.92,tempF:t.temp_F??t.temperature??59,rhPct:t.rel_humidity_pct??t.humidity??0,windMPH:t.wind_mph??t.windVelocity??0,windDeg:t.wind_angle_deg??t.windAngle??0,trackTempF:t.trackTemp_F??t.trackTemp??80,tractionIdx:t.tractionIndex??3}}function so(r,t){var C,T,P,m,y,h,R,g;const n=io(r),i=no(r),c=t<=660?"EIGHTH":"QUARTER",s=r.drivetrain??{},p={finalDrive:Number(s.finalDrive??s.final_drive??0),overallEff:Number(s.overallEff??s.overallEfficiency??s.efficiency??1),gearRatios:Array.isArray(s.gearRatios)?s.gearRatios.map(Number):[],perGearEff:Array.isArray(s.perGearEff)?s.perGearEff.map(Number):[],shiftRPM:Array.isArray(s.shiftRPM??s.shiftsRPM)?(s.shiftRPM??s.shiftsRPM).map(Number):[],clutch:s.clutch?{...s.clutch}:void 0,converter:s.converter?{...s.converter}:void 0},u=r.vehicle??{},a={weightLb:u.weight_lb??u.weight??r.weight??2400,wheelbaseIn:u.wheelbase_in??u.wheelbase??107,tireRolloutIn:((C=r.finalDrive)==null?void 0:C.tireRolloutIn)??u.tire_rollout_in??u.rollout??102.5,tireWidthIn:((T=r.finalDrive)==null?void 0:T.tireWidthIn)??u.tire_width_in??u.tireWidth??17,frontalAreaFt2:((P=r.aero)==null?void 0:P.frontalArea)??u.frontalArea_ft2??18.2,Cd:((m=r.aero)==null?void 0:m.cd)??u.Cd??.24,Cl:((y=r.aero)==null?void 0:y.cl)??u.Cl??.1,overhangIn:u.overhang_in??u.overhang??40},k={model:"VB6Exact",distanceFt:t,raceLength:c,env:i,vehicle:a,drivetrain:p,pmi:n,fuel:r.fuel};if(r.engineHP&&Array.isArray(r.engineHP)){const _=((h=r==null?void 0:r.fuel)==null?void 0:h.hpTorqueMultiplier)??1,o=(r.engineHP??[]).map(b=>Array.isArray(b)?{rpm:Number(b[0]),hp:Number(b[1])*_}:{rpm:Number(b==null?void 0:b.rpm),hp:Number(b==null?void 0:b.hp)*_}).filter(b=>Number.isFinite(b.rpm)&&Number.isFinite(b.hp)).sort((b,x)=>b.rpm-x.rpm);o.length>=2&&(k.engineParams={powerHP:o,redlineRPM:oo(o),idleRPM:900})}const S=Number.isFinite(t)?Number(t):Number(r==null?void 0:r.raceLengthFt)||((r==null?void 0:r.raceLength)==="EIGHTH"?660:1320);if(k.raceLengthFt=S,k.raceLength=S===660?"EIGHTH":"QUARTER",!((R=k.engineParams)!=null&&R.powerHP)&&Array.isArray(r==null?void 0:r.engineHP)){const _=((g=r==null?void 0:r.fuel)==null?void 0:g.hpTorqueMultiplier)??1,o=r.engineHP.map(b=>Array.isArray(b)?{rpm:Number(b[0]),hp:Number(b[1])*_}:{rpm:Number(b==null?void 0:b.rpm),hp:Number(b==null?void 0:b.hp)*_}).filter(b=>Number.isFinite(b.rpm)&&Number.isFinite(b.hp)).sort((b,x)=>b.rpm-x.rpm);o.length>=2&&(k.engineParams={...k.engineParams??{},powerHP:o})}return k}function lo({onSelect:r,showEditButton:t=!0,onEditClick:n}){const{vehicles:i,activeVehicleId:c,setActiveVehicleById:s,loading:p}=qr(),u=a=>{const k=a.target.value||null;s(k),k&&r&&r(k)};return p?e.jsx("div",{style:{padding:"0.75rem",backgroundColor:"var(--color-bg-secondary)",borderRadius:"var(--radius-md)",marginBottom:"1rem",border:"1px solid var(--color-border)"},children:e.jsx("span",{style:{color:"var(--color-text-secondary)",fontSize:"0.875rem"},children:"Loading vehicles..."})}):e.jsxs("div",{style:{padding:"0.75rem",backgroundColor:"var(--color-bg-secondary)",borderRadius:"var(--radius-md)",marginBottom:"1rem",border:"1px solid var(--color-border)",display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("label",{style:{fontSize:"0.875rem",fontWeight:"500",color:"var(--color-text)",whiteSpace:"nowrap"},children:"Active Vehicle:"}),e.jsxs("select",{value:c??"",onChange:u,style:{flex:1,padding:"0.5rem",fontSize:"0.875rem",border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)",backgroundColor:"var(--color-bg)"},children:[e.jsx("option",{value:"",children:"‚Äî Select a vehicle ‚Äî"}),i.map(a=>e.jsx("option",{value:a.id,children:a.name||a.id},a.id))]}),t&&c&&e.jsx("button",{onClick:n,style:{padding:"0.5rem 0.75rem",fontSize:"0.75rem",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"var(--radius-md)",cursor:"pointer",whiteSpace:"nowrap"},children:"Edit in Vehicle Editor"}),i.length===0&&e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--color-text-secondary)",fontStyle:"italic"},children:"No vehicles saved yet"})]})}function ao(r){var t,n;if(!((t=r==null?void 0:r.engineParams)!=null&&t.powerHP)&&Array.isArray(r==null?void 0:r.engineHP)){const i=((n=r==null?void 0:r.fuel)==null?void 0:n.hpTorqueMultiplier)??1,c=r.engineHP.map(s=>Array.isArray(s)?{rpm:Number(s[0]),hp:Number(s[1])*i}:{rpm:Number(s==null?void 0:s.rpm),hp:Number(s==null?void 0:s.hp)*i}).filter(s=>Number.isFinite(s.rpm)&&Number.isFinite(s.hp)).sort((s,p)=>s.rpm-p.rpm);c.length>=2&&(r.engineParams={...r.engineParams??{},powerHP:c})}return r}function co(){var l,j,M,A,N,J,oe,ee,re,te,ce,ie,X,de,ne;const r=$r(),{fixture:t,setFixture:n}=Ae(),i=Qr("enableStepTrace"),c=Ur(),{userLevel:s,setUserLevel:p}=c,{activeVehicle:u}=qr(),[a,k]=v.useState("QUARTER"),[S,C]=v.useState(!1),[T,P]=v.useState(null),[m,y]=v.useState(null),[h,R]=v.useState([]),g=Ye(t),_=d=>{var w,H,F;if(console.log("[RunInspector] Vehicle selected:",d),u&&u.id===d)try{const D=St(u),z=Rt(D);if(!z.ok){console.warn("[RunInspector] Adapter validation warnings:",z.errors),P(`Vehicle data incomplete: ${z.errors.join("; ")}`);return}n(D),console.log("[RunInspector] Fixture updated from vehicle:",{vehicleId:d,vehicleName:u.name,engineHPCount:(w=D.engineHP)==null?void 0:w.length,gearCount:(F=(H=D.drivetrain)==null?void 0:H.gearRatios)==null?void 0:F.length})}catch(D){console.error("[RunInspector] Failed to convert vehicle to fixture:",D),P(`Failed to load vehicle: ${D.message}`)}},o=()=>{v.startTransition(()=>r("/vehicles"))},b=async()=>{var w,H,F,D,z,E,Z;if(!t){P("No fixture loaded.");return}C(!0),P(null),y(null),R([]);let d=null;try{const V=a==="EIGHTH"?660:1320;d=so(t,V),d=ao(d),d.raceLengthFt=V,console.log("[RUN] powerHP?",Array.isArray((w=d==null?void 0:d.engineParams)==null?void 0:w.powerHP),(D=(F=(H=d==null?void 0:d.engineParams)==null?void 0:H.powerHP)==null?void 0:F.slice)==null?void 0:D.call(F,0,2),"raceLengthFt",d==null?void 0:d.raceLengthFt);const B=await gr("VB6Exact",d);y(B),R([])}catch(V){const B=(z=d==null?void 0:d.engineParams)==null?void 0:z.powerHP;console.error("[Run Inspector error]",V,{hpSummary:Array.isArray(B)?`n=${B.length},first=${(E=B[0])==null?void 0:E.rpm},last=${(Z=B[B.length-1])==null?void 0:Z.rpm}`:"none"}),P((V==null?void 0:V.message)??String(V))}finally{C(!1)}},x=()=>{if(h.length===0){alert("No step data available to download");return}const d=["step","v_ftps","EngRPM","wheelRPM","ClutchSlip","HPSave","HPEngPMI","HPChasPMI","DragHP","HP_afterL1","HP_afterL2","PQWT","AMin","AMax","AGS_applied","Vel_next","Dist_next"],w=h.map(E=>[E.step,E.v_ftps,E.EngRPM,E.wheelRPM,E.ClutchSlip,E.HPSave,E.HPEngPMI,E.HPChasPMI,E.DragHP,E.HP_afterL1,E.HP_afterL2,E.PQWT,E.AMin,E.AMax,E.AGS_applied,E.Vel_next,E.Dist_next]),H=[d.join(","),...w.map(E=>E.join(","))].join(`
`),F=new Blob([H],{type:"text/csv"}),D=URL.createObjectURL(F),z=document.createElement("a");z.href=D,z.download=`run-inspector-VB6Exact-${a}-${Date.now()}.csv`,z.click(),URL.revokeObjectURL(D)};return e.jsxs("div",{style:{padding:"2rem",height:"100%",overflow:"auto"},children:[e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx("h2",{style:{marginTop:0,marginBottom:"0.5rem"},children:"Run Inspector & Steps"}),e.jsx("p",{style:{color:"var(--color-muted)",fontSize:"0.875rem",margin:0},children:"Run simulations with VB6 fixtures and inspect detailed step-by-step physics data."})]}),!g.ok&&e.jsxs("div",{style:{padding:"1rem",backgroundColor:"#fee2e2",border:"1px solid #ef4444",borderRadius:"var(--radius-md)",marginBottom:"1rem"},children:[e.jsx("p",{style:{margin:"0 0 0.75rem 0",fontSize:"0.875rem",color:"#991b1b",fontWeight:"600"},children:"Fixture validation failed."}),e.jsx("pre",{style:{margin:"0 0 0.75rem 0",padding:"0.5rem",backgroundColor:"#fef2f2",border:"1px solid #fca5a5",borderRadius:"var(--radius-sm)",fontSize:"0.75rem",color:"#991b1b",fontFamily:"monospace",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:g.missing.join(", ")}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{onClick:()=>v.startTransition(()=>r("/dev?panel=input-inspector")),style:{padding:"0.5rem 1rem",fontSize:"0.875rem",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"var(--radius-md)",cursor:"pointer"},children:"Open VB6 Inputs"}),e.jsx("button",{onClick:()=>r("/dev?panel=quick-paste&example=prostock"),style:{padding:"0.5rem 1rem",fontSize:"0.875rem",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"var(--radius-md)",cursor:"pointer"},children:"Load ProStock_Pro Example"})]})]}),!i&&e.jsx("div",{style:{padding:"1rem",backgroundColor:"#fef3c7",border:"1px solid #fbbf24",borderRadius:"var(--radius-md)",marginBottom:"1rem"},children:e.jsxs("p",{style:{margin:0,fontSize:"0.875rem",color:"#92400e"},children:[e.jsx("strong",{children:"üí° Hint:"})," Enable ",e.jsx("code",{children:"enableStepTrace"})," flag in the Feature Flags panel to capture detailed step data during simulation runs."]})}),T&&e.jsx("div",{style:{padding:"1rem",backgroundColor:"#fee2e2",border:"1px solid #ef4444",borderRadius:"var(--radius-md)",marginBottom:"1rem",whiteSpace:"pre-wrap",fontFamily:"monospace",fontSize:"0.875rem",color:"#991b1b"},children:T}),e.jsxs("div",{style:{padding:"0.75rem",backgroundColor:"var(--color-bg-secondary)",borderRadius:"var(--radius-md)",marginBottom:"1rem",border:"1px solid var(--color-border)",display:"flex",alignItems:"center",gap:"0.75rem"},children:[e.jsx("label",{style:{fontSize:"0.875rem",fontWeight:"500",color:"var(--color-text)",whiteSpace:"nowrap"},children:"User Level:"}),e.jsx("div",{style:{display:"flex",gap:"0.25rem"},children:Ke.map(d=>e.jsx("button",{onClick:()=>p(d),style:{padding:"0.375rem 0.75rem",fontSize:"0.75rem",fontWeight:s===d?"600":"400",backgroundColor:s===d?"var(--color-primary)":"var(--color-bg)",color:s===d?"white":"var(--color-text)",border:`1px solid ${s===d?"var(--color-primary)":"var(--color-border)"}`,borderRadius:"var(--radius-sm)",cursor:"pointer",textTransform:"capitalize"},children:d},d))}),s==="admin"&&e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--color-text-secondary)"},children:"üîì Full access"})]}),e.jsx(lo,{onSelect:_,onEditClick:o}),e.jsxs("div",{style:{padding:"1rem",backgroundColor:"var(--color-surface)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)",marginBottom:"1rem"},children:[e.jsx("h3",{style:{marginTop:0,marginBottom:"1rem",fontSize:"1rem",fontWeight:"600"},children:"Controls"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",marginBottom:"0.5rem"},children:"Distance"}),e.jsxs("select",{value:a,onChange:d=>k(d.target.value),style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem",border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)",backgroundColor:"var(--color-bg)"},children:[e.jsx("option",{value:"EIGHTH",children:"EIGHTH (660 ft)"}),e.jsx("option",{value:"QUARTER",children:"QUARTER (1320 ft)"})]})]}),e.jsx("div",{style:{display:"flex",alignItems:"flex-end"},children:e.jsx("button",{onClick:b,disabled:S||!g.ok,style:{width:"100%",padding:"0.5rem 1rem",fontSize:"0.875rem",fontWeight:"500",backgroundColor:S||!g.ok?"#9ca3af":"#10b981",color:"white",border:"none",borderRadius:"var(--radius-md)",cursor:S||!g.ok?"not-allowed":"pointer"},children:S?"Running...":"Run with current VB6 UI Fixture"})})]}),e.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",backgroundColor:g.ok?"#f0fdf4":"#fef2f2",border:`1px solid ${g.ok?"#86efac":"#fca5a5"}`,borderRadius:"var(--radius-md)"},children:[e.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"600",marginBottom:"0.5rem",color:g.ok?"#166534":"#991b1b"},children:"Fixture Requirements"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.25rem",fontSize:"0.75rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx("span",{children:(j=(l=t.drivetrain)==null?void 0:l.gearRatios)!=null&&j.length?"‚úÖ":"‚ùå"}),e.jsx("span",{style:{color:"var(--color-text)"},children:"drivetrain.gearRatios"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx("span",{children:(A=(M=t.drivetrain)==null?void 0:M.perGearEff)!=null&&A.length?"‚úÖ":"‚ùå"}),e.jsx("span",{style:{color:"var(--color-text)"},children:"drivetrain.perGearEff"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx("span",{children:(N=t.drivetrain)!=null&&N.clutch||(J=t.drivetrain)!=null&&J.converter?"‚úÖ":"‚ùå"}),e.jsx("span",{style:{color:"var(--color-text)"},children:"clutch or converter"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx("span",{children:(oe=t.engineHP)!=null&&oe.length?"‚úÖ":"‚ùå"}),e.jsx("span",{style:{color:"var(--color-text)"},children:"engineHP"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx("span",{children:(ee=t.fuel)!=null&&ee.type?"‚úÖ":"‚ùå"}),e.jsx("span",{style:{color:"var(--color-text)"},children:"fuel.type"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[e.jsx("span",{title:((re=t.pmi)==null?void 0:re.engine_flywheel_clutch)!=null&&((te=t.pmi)==null?void 0:te.transmission_driveshaft)!=null&&((ce=t.pmi)==null?void 0:ce.tires_wheels_ringgear)!=null?"All PMI fields present":(()=>{var w,H,F;const d=[];return((w=t.pmi)==null?void 0:w.engine_flywheel_clutch)==null&&d.push("engine_flywheel_clutch"),((H=t.pmi)==null?void 0:H.transmission_driveshaft)==null&&d.push("transmission_driveshaft"),((F=t.pmi)==null?void 0:F.tires_wheels_ringgear)==null&&d.push("tires_wheels_ringgear"),`Missing: ${d.join(", ")}`})(),children:((ie=t.pmi)==null?void 0:ie.engine_flywheel_clutch)!=null&&((X=t.pmi)==null?void 0:X.transmission_driveshaft)!=null&&((de=t.pmi)==null?void 0:de.tires_wheels_ringgear)!=null?"‚úÖ":"‚ùå"}),e.jsx("span",{style:{color:"var(--color-text)"},children:"pmi.*"})]})]})]})]}),m&&e.jsxs("div",{style:{padding:"1rem",backgroundColor:"var(--color-surface)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)",marginBottom:"1rem"},children:[e.jsx("h3",{style:{marginTop:0,marginBottom:"1rem",fontSize:"1rem",fontWeight:"600"},children:"Results"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--color-muted)",marginBottom:"0.25rem"},children:"ET (s)"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold"},children:m.et_s.toFixed(3)})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--color-muted)",marginBottom:"0.25rem"},children:"MPH"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold"},children:m.mph.toFixed(2)})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--color-muted)",marginBottom:"0.25rem"},children:"Model"}),e.jsx("div",{style:{fontSize:"1rem",fontWeight:"500"},children:m.meta.model})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--color-muted)",marginBottom:"0.25rem"},children:"Termination"}),e.jsx("div",{style:{fontSize:"0.875rem"},children:((ne=m.meta.termination)==null?void 0:ne.reason)||"DISTANCE"})]})]})]}),h.length>0&&e.jsxs("div",{style:{padding:"1rem",backgroundColor:"var(--color-surface)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h3",{style:{margin:0,fontSize:"1rem",fontWeight:"600"},children:"First 12 Steps"}),e.jsx("button",{onClick:x,style:{padding:"0.5rem 1rem",fontSize:"0.875rem",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"var(--radius-md)",cursor:"pointer"},children:"Download CSV"})]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",fontSize:"0.75rem",borderCollapse:"collapse",fontFamily:"monospace"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#1e293b",color:"#e2e8f0"},children:[e.jsx("th",{style:{padding:"0.5rem",textAlign:"left",borderBottom:"2px solid var(--color-border)"},children:"Step"}),e.jsx("th",{style:{padding:"0.5rem",textAlign:"right",borderBottom:"2px solid var(--color-border)"},children:"v_ftps"}),e.jsx("th",{style:{padding:"0.5rem",textAlign:"right",borderBottom:"2px solid var(--color-border)"},children:"EngRPM"}),e.jsx("th",{style:{padding:"0.5rem",textAlign:"right",borderBottom:"2px solid var(--color-border)"},children:"wheelRPM"}),e.jsx("th",{style:{padding:"0.5rem",textAlign:"right",borderBottom:"2px solid var(--color-border)"},children:"ClutchSlip"}),e.jsx("th",{style:{padding:"0.5rem",textAlign:"right",borderBottom:"2px solid var(--color-border)"},children:"HPSave"}),e.jsx("th",{style:{padding:"0.5rem",textAlign:"right",borderBottom:"2px solid var(--color-border)"},children:"HPEngPMI"}),e.jsx("th",{style:{padding:"0.5rem",textAlign:"right",borderBottom:"2px solid var(--color-border)"},children:"HPChasPMI"}),e.jsx("th",{style:{padding:"0.5rem",textAlign:"right",borderBottom:"2px solid var(--color-border)"},children:"DragHP"}),e.jsx("th",{style:{padding:"0.5rem",textAlign:"right",borderBottom:"2px solid var(--color-border)"},children:"HP_L1"}),e.jsx("th",{style:{padding:"0.5rem",textAlign:"right",borderBottom:"2px solid var(--color-border)"},children:"HP_L2"}),e.jsx("th",{style:{padding:"0.5rem",textAlign:"right",borderBottom:"2px solid var(--color-border)"},children:"PQWT"}),e.jsx("th",{style:{padding:"0.5rem",textAlign:"right",borderBottom:"2px solid var(--color-border)"},children:"AMin"}),e.jsx("th",{style:{padding:"0.5rem",textAlign:"right",borderBottom:"2px solid var(--color-border)"},children:"AMax"}),e.jsx("th",{style:{padding:"0.5rem",textAlign:"right",borderBottom:"2px solid var(--color-border)"},children:"AGS"}),e.jsx("th",{style:{padding:"0.5rem",textAlign:"right",borderBottom:"2px solid var(--color-border)"},children:"Vel_next"}),e.jsx("th",{style:{padding:"0.5rem",textAlign:"right",borderBottom:"2px solid var(--color-border)"},children:"Dist_next"})]})}),e.jsx("tbody",{children:h.map((d,w)=>e.jsxs("tr",{style:{backgroundColor:w%2===0?"transparent":"rgba(0,0,0,0.02)"},children:[e.jsx("td",{style:{padding:"0.5rem",borderBottom:"1px solid var(--color-border)"},children:d.step}),e.jsx("td",{style:{padding:"0.5rem",textAlign:"right",borderBottom:"1px solid var(--color-border)"},children:d.v_ftps.toFixed(3)}),e.jsx("td",{style:{padding:"0.5rem",textAlign:"right",borderBottom:"1px solid var(--color-border)"},children:d.EngRPM.toFixed(0)}),e.jsx("td",{style:{padding:"0.5rem",textAlign:"right",borderBottom:"1px solid var(--color-border)"},children:d.wheelRPM.toFixed(2)}),e.jsx("td",{style:{padding:"0.5rem",textAlign:"right",borderBottom:"1px solid var(--color-border)"},children:d.ClutchSlip.toFixed(4)}),e.jsx("td",{style:{padding:"0.5rem",textAlign:"right",borderBottom:"1px solid var(--color-border)"},children:d.HPSave.toFixed(1)}),e.jsx("td",{style:{padding:"0.5rem",textAlign:"right",borderBottom:"1px solid var(--color-border)"},children:d.HPEngPMI.toFixed(1)}),e.jsx("td",{style:{padding:"0.5rem",textAlign:"right",borderBottom:"1px solid var(--color-border)"},children:d.HPChasPMI.toFixed(1)}),e.jsx("td",{style:{padding:"0.5rem",textAlign:"right",borderBottom:"1px solid var(--color-border)"},children:d.DragHP.toFixed(2)}),e.jsx("td",{style:{padding:"0.5rem",textAlign:"right",borderBottom:"1px solid var(--color-border)"},children:d.HP_afterL1.toFixed(1)}),e.jsx("td",{style:{padding:"0.5rem",textAlign:"right",borderBottom:"1px solid var(--color-border)"},children:d.HP_afterL2.toFixed(1)}),e.jsx("td",{style:{padding:"0.5rem",textAlign:"right",borderBottom:"1px solid var(--color-border)"},children:d.PQWT.toFixed(1)}),e.jsx("td",{style:{padding:"0.5rem",textAlign:"right",borderBottom:"1px solid var(--color-border)"},children:d.AMin.toFixed(3)}),e.jsx("td",{style:{padding:"0.5rem",textAlign:"right",borderBottom:"1px solid var(--color-border)"},children:d.AMax.toFixed(3)}),e.jsx("td",{style:{padding:"0.5rem",textAlign:"right",borderBottom:"1px solid var(--color-border)"},children:d.AGS_applied.toFixed(3)}),e.jsx("td",{style:{padding:"0.5rem",textAlign:"right",borderBottom:"1px solid var(--color-border)"},children:d.Vel_next.toFixed(3)}),e.jsx("td",{style:{padding:"0.5rem",textAlign:"right",borderBottom:"1px solid var(--color-border)"},children:d.Dist_next.toFixed(6)})]},d.step))})]})})]}),m&&h.length===0&&e.jsx("div",{style:{padding:"2rem",textAlign:"center",backgroundColor:"var(--color-surface)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)",color:"var(--color-muted)"},children:e.jsxs("p",{style:{margin:0,fontSize:"0.875rem"},children:["Step data capture not yet implemented. Enable ",e.jsx("code",{children:"enableStepTrace"})," flag and implement step data collection hook in rsaclassic.ts."]})})]})}function tt(r){return{vehicle:{name:"VB6 Fixture Vehicle",weightLb:r.vehicle.weight_lb},env:{elevation:r.env.elevation_ft,temperatureF:r.env.temperature_F,barometerInHg:r.env.barometer_inHg,humidityPct:r.env.relHumidity_pct,trackTempF:r.env.trackTemp_F,tractionIndex:r.env.tractionIndex,windMph:r.env.wind_mph,windAngleDeg:r.env.wind_angle_deg},raceLength:"QUARTER"}}function mo(){const{fixture:r}=Ae(),t=Qr("enableEnergyLogging"),[n,i]=v.useState(!1),[c,s]=v.useState(null),[p,u]=v.useState(null),[a,k]=v.useState(null),S=async()=>{i(!0),s(null),u(null),k(null);try{Je(r);const P=tt(r);P.raceLength="QUARTER";const m=await gr("VB6Exact",P);u(m);const y=m.meta.energy;if(y){const h=y.engine_in_ftlbf||0,R=y.balance_ftlbf||0;k({engine_in_ftlbf:y.engine_in_ftlbf||0,drag_loss_ftlbf:y.drag_loss_ftlbf||0,rolling_resistance_ftlbf:y.rolling_resistance_ftlbf||0,driveline_loss_ftlbf:y.driveline_loss_ftlbf||0,engine_pmi_loss_ftlbf:y.engine_pmi_loss_ftlbf||0,chassis_pmi_loss_ftlbf:y.chassis_pmi_loss_ftlbf||0,final_ke_ftlbf:y.final_ke_ftlbf||0,balance_ftlbf:R,balance_pct:h>0?R/h*100:0})}else s("Energy data not available in simulation result. Enable enableEnergyLogging flag.")}catch(P){P instanceof Xe?s(`Fixture validation failed:

${P.message}

Please complete all required fields in VB6 Inputs panel.`):s(P instanceof Error?P.message:String(P))}finally{i(!1)}},C=()=>{if(!a)return;const P=JSON.stringify(a,null,2),m=new Blob([P],{type:"application/json"}),y=URL.createObjectURL(m),h=document.createElement("a");h.href=y,h.download=`energy-breakdown-${Date.now()}.json`,h.click(),URL.revokeObjectURL(y)},T=()=>{if(!a)return;const P=["Category","Energy (ft-lbf)","Percentage"],m=a.engine_in_ftlbf,y=[["Engine Input",a.engine_in_ftlbf,"100.00%"],["Drag Loss",a.drag_loss_ftlbf,`${(a.drag_loss_ftlbf/m*100).toFixed(2)}%`],["Rolling Resistance",a.rolling_resistance_ftlbf,`${(a.rolling_resistance_ftlbf/m*100).toFixed(2)}%`],["Driveline Loss",a.driveline_loss_ftlbf,`${(a.driveline_loss_ftlbf/m*100).toFixed(2)}%`],["Engine PMI Loss",a.engine_pmi_loss_ftlbf,`${(a.engine_pmi_loss_ftlbf/m*100).toFixed(2)}%`],["Chassis PMI Loss",a.chassis_pmi_loss_ftlbf,`${(a.chassis_pmi_loss_ftlbf/m*100).toFixed(2)}%`],["Final Kinetic Energy",a.final_ke_ftlbf,`${(a.final_ke_ftlbf/m*100).toFixed(2)}%`],["Balance",a.balance_ftlbf,`${a.balance_pct.toFixed(2)}%`]],h=[P.join(","),...y.map(o=>o.join(","))].join(`
`),R=new Blob([h],{type:"text/csv"}),g=URL.createObjectURL(R),_=document.createElement("a");_.href=g,_.download=`energy-breakdown-${Date.now()}.csv`,_.click(),URL.revokeObjectURL(g)};return e.jsxs("div",{style:{padding:"2rem",height:"100%",overflow:"auto"},children:[e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx("h2",{style:{marginTop:0,marginBottom:"0.5rem"},children:"Energy Accounting"}),e.jsx("p",{style:{color:"var(--color-muted)",fontSize:"0.875rem",margin:0},children:"Visualize energy flow and balance during simulation runs."})]}),!t&&e.jsx("div",{style:{padding:"1rem",backgroundColor:"#fef3c7",border:"1px solid #fbbf24",borderRadius:"var(--radius-md)",marginBottom:"1rem"},children:e.jsxs("p",{style:{margin:0,fontSize:"0.875rem",color:"#92400e"},children:[e.jsx("strong",{children:"üí° Instructions:"})," Enable ",e.jsx("code",{children:"enableEnergyLogging"})," flag in the Feature Flags panel to capture energy accounting data during simulation runs."]})}),c&&e.jsx("div",{style:{padding:"1rem",backgroundColor:"#fee2e2",border:"1px solid #ef4444",borderRadius:"var(--radius-md)",marginBottom:"1rem",whiteSpace:"pre-wrap",fontFamily:"monospace",fontSize:"0.875rem",color:"#991b1b"},children:c}),e.jsx("div",{style:{marginBottom:"1rem"},children:e.jsx("button",{onClick:S,disabled:n,style:{padding:"0.75rem 1.5rem",fontSize:"0.875rem",fontWeight:"500",backgroundColor:n?"#9ca3af":"#10b981",color:"white",border:"none",borderRadius:"var(--radius-md)",cursor:n?"not-allowed":"pointer"},children:n?"Running...":"Run VB6Exact (QUARTER)"})}),p&&e.jsxs("div",{style:{padding:"1rem",backgroundColor:"var(--color-surface)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)",marginBottom:"1rem"},children:[e.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem",fontSize:"1rem",fontWeight:"600"},children:"Run Results"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--color-muted)"},children:"ET (s)"}),e.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"bold"},children:p.et_s.toFixed(3)})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--color-muted)"},children:"MPH"}),e.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"bold"},children:p.mph.toFixed(2)})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--color-muted)"},children:"Model"}),e.jsx("div",{style:{fontSize:"1rem",fontWeight:"500"},children:p.meta.model})]})]})]}),a&&e.jsxs("div",{style:{padding:"1rem",backgroundColor:"var(--color-surface)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)",marginBottom:"1rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h3",{style:{margin:0,fontSize:"1rem",fontWeight:"600"},children:"Energy Breakdown"}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{onClick:C,style:{padding:"0.5rem 1rem",fontSize:"0.875rem",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"var(--radius-md)",cursor:"pointer"},children:"Export JSON"}),e.jsx("button",{onClick:T,style:{padding:"0.5rem 1rem",fontSize:"0.875rem",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"var(--radius-md)",cursor:"pointer"},children:"Export CSV"})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[e.jsx(be,{label:"Engine Input",value:a.engine_in_ftlbf,percentage:100,color:"#10b981",isInput:!0}),e.jsx(be,{label:"Drag Loss",value:a.drag_loss_ftlbf,percentage:a.drag_loss_ftlbf/a.engine_in_ftlbf*100,color:"#ef4444"}),e.jsx(be,{label:"Rolling Resistance",value:a.rolling_resistance_ftlbf,percentage:a.rolling_resistance_ftlbf/a.engine_in_ftlbf*100,color:"#f59e0b"}),e.jsx(be,{label:"Driveline Loss",value:a.driveline_loss_ftlbf,percentage:a.driveline_loss_ftlbf/a.engine_in_ftlbf*100,color:"#f59e0b"}),e.jsx(be,{label:"Engine PMI Loss",value:a.engine_pmi_loss_ftlbf,percentage:a.engine_pmi_loss_ftlbf/a.engine_in_ftlbf*100,color:"#f59e0b"}),e.jsx(be,{label:"Chassis PMI Loss",value:a.chassis_pmi_loss_ftlbf,percentage:a.chassis_pmi_loss_ftlbf/a.engine_in_ftlbf*100,color:"#f59e0b"}),e.jsx(be,{label:"Final Kinetic Energy",value:a.final_ke_ftlbf,percentage:a.final_ke_ftlbf/a.engine_in_ftlbf*100,color:"#3b82f6"}),e.jsx(be,{label:"Balance (Error)",value:a.balance_ftlbf,percentage:a.balance_pct,color:Math.abs(a.balance_pct)<1?"#10b981":"#ef4444",showSign:!0})]}),e.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",backgroundColor:"#1e293b",borderRadius:"var(--radius-md)",color:"#e2e8f0",fontFamily:"monospace",fontSize:"0.875rem"},children:[e.jsxs("div",{style:{marginBottom:"0.5rem"},children:[e.jsx("strong",{children:"Total Energy In:"})," ",a.engine_in_ftlbf.toLocaleString()," ft-lbf"]}),e.jsxs("div",{style:{marginBottom:"0.5rem"},children:[e.jsx("strong",{children:"Total Losses:"})," ",(a.drag_loss_ftlbf+a.rolling_resistance_ftlbf+a.driveline_loss_ftlbf+a.engine_pmi_loss_ftlbf+a.chassis_pmi_loss_ftlbf).toLocaleString()," ","ft-lbf"]}),e.jsxs("div",{style:{marginBottom:"0.5rem"},children:[e.jsx("strong",{children:"Final KE:"})," ",a.final_ke_ftlbf.toLocaleString()," ft-lbf"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Balance:"})," ",a.balance_ftlbf.toLocaleString()," ft-lbf (",a.balance_pct.toFixed(2),"%)"]})]})]})]})}function be({label:r,value:t,percentage:n,color:i,isInput:c,showSign:s}){const p=s&&t>=0?`+${t.toLocaleString()}`:t.toLocaleString(),u=Math.min(Math.abs(n),100);return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem",fontSize:"0.875rem"},children:[e.jsx("span",{style:{fontWeight:c?"600":"400"},children:r}),e.jsxs("span",{style:{fontFamily:"monospace"},children:[p," ft-lbf (",n.toFixed(2),"%)"]})]}),e.jsx("div",{style:{width:"100%",height:"24px",backgroundColor:"#e5e7eb",borderRadius:"var(--radius-sm)",overflow:"hidden"},children:e.jsx("div",{style:{width:`${u}%`,height:"100%",backgroundColor:i,transition:"width 0.3s ease"}})})]})}const Qe=[{name:"SuperGas_Pro",source:"QuarterPro",raceLengthTargets:{EIGHTH:{et_s:6.27,mph:108.2,tolET_s:.2,tolMPH:3,anchors:{t60_s:1.35}},QUARTER:{et_s:9.9,mph:135.1,tolET_s:.3,tolMPH:4}}},{name:"TA_Dragster_Pro",source:"QuarterPro",raceLengthTargets:{EIGHTH:{et_s:3.56,mph:205.3,tolET_s:.12,tolMPH:5},QUARTER:{et_s:5.52,mph:243.1,tolET_s:.12,tolMPH:6}}},{name:"ProStock_Pro",source:"QuarterPro",raceLengthTargets:{EIGHTH:{et_s:4.37,mph:160.9,tolET_s:.12,tolMPH:4,anchors:{t60_s:1.01}},QUARTER:{et_s:6.8,mph:202.3,tolET_s:.15,tolMPH:5}}},{name:"FunnyCar_Pro",source:"QuarterPro",raceLengthTargets:{EIGHTH:{et_s:3.37,mph:243.5,tolET_s:.1,tolMPH:6},QUARTER:{et_s:4.98,mph:297,tolET_s:.1,tolMPH:7}}},{name:"Motorcycle_Pro",source:"QuarterPro",raceLengthTargets:{EIGHTH:{et_s:7.63,mph:91.1,tolET_s:.25,tolMPH:3},QUARTER:{et_s:11.99,mph:111.3,tolET_s:.3,tolMPH:3}}},{name:"SuperComp_Pro",source:"QuarterPro",raceLengthTargets:{EIGHTH:{et_s:5.66,mph:120.4,tolET_s:.18,tolMPH:4},QUARTER:{et_s:8.9,mph:151.6,tolET_s:.2,tolMPH:4}}},{name:"Motorcycle_Jr",source:"QuarterJr",raceLengthTargets:{EIGHTH:{et_s:7.45,mph:89.4,tolET_s:.25,tolMPH:3},QUARTER:{et_s:12,mph:104.5,tolET_s:.3,tolMPH:3}}},{name:"ETRacer_Jr",source:"QuarterJr",raceLengthTargets:{EIGHTH:{et_s:8.6,mph:80.3,tolET_s:.3,tolMPH:3},QUARTER:{et_s:13.5,mph:100.8,tolET_s:.35,tolMPH:3.5}}},{name:"EXP_Jr",source:"QuarterJr",raceLengthTargets:{EIGHTH:{et_s:5.15,mph:130.3,tolET_s:.15,tolMPH:4},QUARTER:{et_s:8.18,mph:160.2,tolET_s:.2,tolMPH:4}}},{name:"EXP_050523_Jr",source:"QuarterJr",raceLengthTargets:{EIGHTH:{et_s:5.06,mph:132.5,tolET_s:.15,tolMPH:4},QUARTER:{et_s:8.04,mph:163.5,tolET_s:.2,tolMPH:4}}}];function ho(r,t,n,i){const c=r.raceLengthTargets[t];if(!c)throw new Error(`Benchmark ${r.name} has no target for ${t}`);const s=n-c.et_s,p=i-c.mph,u=Math.abs(s)<=c.tolET_s,a=Math.abs(p)<=c.tolMPH;return{pass:u&&a,etPass:u,mphPass:a,etDelta:s,mphDelta:p,etTolerance:c.tolET_s,mphTolerance:c.tolMPH}}function po(r){const t=[];if(r.env.elevation===void 0&&t.push("env.elevation"),r.env.barometerInHg===void 0&&t.push("env.barometerInHg"),r.env.temperatureF===void 0&&t.push("env.temperatureF"),r.env.humidityPct===void 0&&t.push("env.humidityPct"),r.vehicle.weightLb||t.push("vehicle.weightLb"),!r.vehicle.tireDiaIn&&!r.vehicle.tireRolloutIn&&t.push("vehicle.tireDiaIn OR vehicle.tireRolloutIn"),r.vehicle.rolloutIn===void 0&&t.push("vehicle.rolloutIn"),!r.vehicle.rearGear&&!r.vehicle.finalDrive&&t.push("vehicle.rearGear OR vehicle.finalDrive"),(!r.vehicle.gearRatios||r.vehicle.gearRatios.length===0)&&t.push("vehicle.gearRatios[]"),(!r.vehicle.shiftRPM||r.vehicle.shiftRPM.length===0)&&t.push("vehicle.shiftRPM[]"),r.vehicle.frontalArea_ft2===void 0&&t.push("vehicle.frontalArea_ft2"),r.vehicle.cd===void 0&&t.push("vehicle.cd"),!r.vehicle.torqueCurve||r.vehicle.torqueCurve.length===0?t.push("vehicle.torqueCurve[]"):r.vehicle.torqueCurve.every(i=>i.rpm!==void 0&&(i.hp!==void 0||i.tq_lbft!==void 0))||t.push("vehicle.torqueCurve[] must have rpm and (hp OR tq_lbft) for each point"),r.vehicle.converter&&(r.vehicle.converter.stallRPM===void 0&&t.push("vehicle.converter.stallRPM (required if converter present)"),r.vehicle.converter.torqueMult===void 0&&t.push("vehicle.converter.torqueMult (required if converter present)"),r.vehicle.converter.slipRatio===void 0&&t.push("vehicle.converter.slipRatio (required if converter present)")),r.vehicle.clutch&&(r.vehicle.clutch.slipRPM===void 0&&r.vehicle.clutch.launchRPM===void 0&&t.push("vehicle.clutch.slipRPM OR vehicle.clutch.launchRPM (required if clutch present)"),r.vehicle.clutch.slipRatio===void 0&&t.push("vehicle.clutch.slipRatio (required if clutch present)")),r.vehicle.gearRatios&&r.vehicle.shiftRPM){const n=r.vehicle.gearRatios.length,i=r.vehicle.shiftRPM.length;i!==n-1&&i!==n&&t.push(`vehicle.shiftRPM[] length mismatch (${i} shifts for ${n} gears)`)}if(r.vehicle.gearEff&&r.vehicle.gearRatios&&r.vehicle.gearEff.length!==r.vehicle.gearRatios.length&&t.push(`vehicle.gearEff[] length mismatch (${r.vehicle.gearEff.length} vs ${r.vehicle.gearRatios.length} gears)`),t.length>0)throw new Error(`Benchmark config '${r.name}' is missing required VB6 parameters:
`+t.map(n=>`  - ${n}`).join(`
`)+`

All required fields must be present from VB6 printouts - NO DEFAULTS ALLOWED.
This ensures VB6 parity by preventing silent defaults in the simulation.`)}const fr={ProStock_Pro:{name:"ProStock_Pro",fuel:"GAS",env:{elevation:32,barometerInHg:29.92,temperatureF:75,humidityPct:55,windMph:5,windAngleDeg:135,trackTempF:105,tractionIndex:3},vehicle:{weightLb:2355,wheelbaseIn:107,overhangIn:40,rolloutIn:9,tireRolloutIn:102.5,tireWidthIn:17,frontalArea_ft2:18.2,cd:.24,liftCoeff:.1,finalDrive:4.86,transEff:.975,gearRatios:[2.6,1.9,1.5,1.2,1],gearEff:[.99,.991,.992,.993,.994],shiftRPM:[9400,9400,9400,9400],clutch:{launchRPM:7200,slipRPM:7600,slipRatio:1.004,lockup:!1},torqueCurve:[{rpm:7e3,hp:1220},{rpm:7200,hp:1235},{rpm:7400,hp:1248},{rpm:7600,hp:1258},{rpm:7800,hp:1266},{rpm:8e3,hp:1272},{rpm:8200,hp:1276},{rpm:8400,hp:1278},{rpm:8600,hp:1279},{rpm:8800,hp:1278},{rpm:9e3,hp:1276},{rpm:9200,hp:1272},{rpm:9400,hp:1266},{rpm:9500,hp:1263}]}},FunnyCar_Pro:{name:"FunnyCar_Pro",fuel:"NITRO",env:{elevation:300,barometerInHg:29.92,temperatureF:76,humidityPct:50,windMph:0,trackTempF:112,tractionIndex:1},vehicle:{weightLb:2350,wheelbaseIn:125,overhangIn:40,rolloutIn:12,tireRolloutIn:118,tireWidthIn:18,frontalArea_ft2:24.1,cd:.5,liftCoeff:.8,finalDrive:3.2,transEff:.96,gearRatios:[1],gearEff:[1],shiftRPM:[100],clutch:{launchRPM:6400,slipRPM:6800,slippageFactor:1.0068,lockup:!1},pmi:{engine_flywheel_clutch:6.03,transmission_driveshaft:.107,tires_wheels_ringgear:75.4},torqueCurve:[{rpm:6400,hp:6116},{rpm:6600,hp:6276},{rpm:6800,hp:6306},{rpm:7e3,hp:6139},{rpm:7200,hp:5829},{rpm:7400,hp:5344},{rpm:7600,hp:4732},{rpm:7800,hp:3993},{rpm:9e3,hp:1297},{rpm:9250,hp:1269},{rpm:9500,hp:1222}]}},TA_Dragster_Pro:{name:"TA_Dragster_Pro",fuel:"METHANOL",env:{elevation:0,barometerInHg:29.92,temperatureF:77,humidityPct:45,windMph:0,trackTempF:110,tractionIndex:2},vehicle:{weightLb:1980,wheelbaseIn:280,overhangIn:30,rolloutIn:12,tireRolloutIn:110,tireWidthIn:17,frontalArea_ft2:19.5,cd:.58,liftCoeff:.4,finalDrive:4.56,transEff:.97,gearRatios:[1.85,1.3,1],gearEff:[.97,.98,.99],shiftRPM:[9200,9400],clutch:{launchRPM:6e3,slipRPM:7200,slipRatio:1.01,lockup:!1},pmi:{engine_flywheel_clutch:4.84,transmission_driveshaft:.426,tires_wheels_ringgear:64.6},torqueCurve:[{rpm:6e3,hp:1847},{rpm:6500,hp:2058},{rpm:7e3,hp:2256},{rpm:7500,hp:2458},{rpm:8e3,hp:2639},{rpm:8500,hp:2729},{rpm:9e3,hp:2672},{rpm:9500,hp:2415},{rpm:1e4,hp:1999},{rpm:11e3,hp:73},{rpm:11500,hp:72}]}},SuperComp_Pro:{name:"SuperComp_Pro",fuel:"GAS",env:{elevation:600,barometerInHg:29.92,temperatureF:87,humidityPct:35,windMph:0,trackTempF:112,tractionIndex:5},vehicle:{weightLb:1700,wheelbaseIn:225,overhangIn:30,rolloutIn:12,tireDiaIn:32.6,tireWidthIn:13.2,frontalArea_ft2:13.6,cd:.5,liftCoeff:.15,finalDrive:4.56,transEff:.97,gearRatios:[1.76,1],gearEff:[.97,.99],shiftRPM:[7500],converter:{launchRPM:5e3,stallRPM:5500,slipRatio:1.06,torqueMult:1.7,lockup:!1,diameterIn:10},torqueCurve:[{rpm:3500,hp:520},{rpm:4e3,hp:560},{rpm:4500,hp:600},{rpm:5e3,hp:640},{rpm:5500,hp:680},{rpm:6e3,hp:715},{rpm:6500,hp:745},{rpm:7e3,hp:770},{rpm:7500,hp:790},{rpm:8e3,hp:805},{rpm:8500,hp:815},{rpm:9e3,hp:820},{rpm:9500,hp:820},{rpm:1e4,hp:815}]}},SuperGas_Pro:{name:"SuperGas_Pro",fuel:"GAS",env:{elevation:850,barometerInHg:29.92,temperatureF:77,humidityPct:30,windMph:0,trackTempF:102,tractionIndex:5},vehicle:{weightLb:2300,wheelbaseIn:103,overhangIn:30,rolloutIn:12,tireDiaIn:32.4,tireWidthIn:14.4,frontalArea_ft2:22.1,cd:.4,liftCoeff:.25,finalDrive:5.14,transEff:.97,gearRatios:[1.76,1],gearEff:[.97,.99],shiftRPM:[7600],converter:{launchRPM:5e3,stallRPM:5500,slipRatio:1.06,torqueMult:1.7,lockup:!1,diameterIn:10},torqueCurve:[{rpm:3500,hp:450},{rpm:4e3,hp:490},{rpm:4500,hp:530},{rpm:5e3,hp:565},{rpm:5500,hp:600},{rpm:6e3,hp:630},{rpm:6500,hp:655},{rpm:7e3,hp:675},{rpm:7500,hp:690},{rpm:8e3,hp:700},{rpm:8500,hp:705},{rpm:9e3,hp:705},{rpm:9500,hp:700}]}},Motorcycle_Pro:{name:"Motorcycle_Pro",fuel:"GAS",env:{elevation:500,barometerInHg:29.92,temperatureF:75,humidityPct:50,windMph:0,trackTempF:100,tractionIndex:4},vehicle:{weightLb:650,wheelbaseIn:54,rolloutIn:12,tireDiaIn:28,tireWidthIn:5,frontalArea_ft2:7.5,cd:.55,liftCoeff:.05,finalDrive:6.5,transEff:.99,gearRatios:[2.74,1.96,1.4,1],shiftRPM:[8e3,8e3,8e3],clutch:{launchRPM:6e3,slipRPM:6e3,slipRatio:1,lockup:!0},torqueCurve:[{rpm:5e3,hp:60},{rpm:5500,hp:64},{rpm:6e3,hp:68},{rpm:6500,hp:71},{rpm:7e3,hp:73},{rpm:7200,hp:74},{rpm:7500,hp:74},{rpm:8e3,hp:73},{rpm:8500,hp:71}]}},Motorcycle_Jr:{name:"Motorcycle_Jr",fuel:"GAS",env:{elevation:900,barometerInHg:29.92,temperatureF:74,humidityPct:40,tractionIndex:4},vehicle:{weightLb:730,wheelbaseIn:54,rolloutIn:12,tireDiaIn:28,tireWidthIn:5,frontalArea_ft2:7.9,cd:.55,liftCoeff:.05,finalDrive:6.81,transEff:.99,gearRatios:[2.74,1.96,1.4,1],shiftRPM:[8e3,8e3,8e3],clutch:{launchRPM:6e3,slipRPM:6e3,slipRatio:1,lockup:!0},torqueCurve:[{rpm:5e3,hp:62},{rpm:5500,hp:68},{rpm:6e3,hp:73},{rpm:6500,hp:77},{rpm:7e3,hp:80},{rpm:7200,hp:81},{rpm:7500,hp:81},{rpm:8e3,hp:80},{rpm:8500,hp:78}]}},ETRacer_Jr:{name:"ETRacer_Jr",fuel:"GAS",env:{elevation:680,barometerInHg:29.92,temperatureF:86,humidityPct:60,tractionIndex:5},vehicle:{weightLb:3600,wheelbaseIn:108,rolloutIn:14,tireDiaIn:28,tireWidthIn:10,frontalArea_ft2:26.1,cd:.45,liftCoeff:.2,finalDrive:4.11,transEff:.97,gearRatios:[2.48,1.48,1],shiftRPM:[6e3,6e3],converter:{launchRPM:2500,stallRPM:3e3,lockup:!1,diameterIn:10,slipRatio:1.05,torqueMult:1.6},powerHP:325,torqueCurve:[{rpm:3e3,hp:220},{rpm:3500,hp:250},{rpm:4e3,hp:275},{rpm:4500,hp:295},{rpm:5e3,hp:310},{rpm:5500,hp:322},{rpm:5600,hp:325},{rpm:6e3,hp:325},{rpm:6500,hp:320}]}},EXP_Jr:{name:"EXP_Jr",fuel:"GAS",env:{elevation:400,barometerInHg:29.92,temperatureF:80,humidityPct:45,tractionIndex:4},vehicle:{weightLb:2100,wheelbaseIn:180,rolloutIn:12,tireDiaIn:30,tireWidthIn:12,frontalArea_ft2:15.5,cd:.48,liftCoeff:.18,finalDrive:4.3,transEff:.97,gearRatios:[1.8,1.3,1],shiftRPM:[7800,8e3],clutch:{launchRPM:5500,slipRPM:6e3,slipRatio:1.005,lockup:!1},torqueCurve:[{rpm:5e3,hp:750},{rpm:5500,hp:810},{rpm:6e3,hp:860},{rpm:6500,hp:900},{rpm:7e3,hp:930},{rpm:7500,hp:950},{rpm:8e3,hp:960},{rpm:8500,hp:960},{rpm:9e3,hp:950}]}},EXP_050523_Jr:{name:"EXP_050523_Jr",fuel:"GAS",env:{elevation:420,barometerInHg:29.92,temperatureF:78,humidityPct:48,tractionIndex:4},vehicle:{weightLb:2080,wheelbaseIn:180,rolloutIn:12,tireDiaIn:30.5,tireWidthIn:12.5,frontalArea_ft2:15.2,cd:.46,liftCoeff:.16,finalDrive:4.25,transEff:.975,gearRatios:[1.82,1.32,1],shiftRPM:[7900,8100],clutch:{launchRPM:5600,slipRPM:6100,slipRatio:1.004,lockup:!1},torqueCurve:[{rpm:5e3,hp:770},{rpm:5500,hp:830},{rpm:6e3,hp:880},{rpm:6500,hp:920},{rpm:7e3,hp:955},{rpm:7500,hp:980},{rpm:8e3,hp:995},{rpm:8500,hp:1e3},{rpm:9e3,hp:995}]}}};(()=>{const r=fr.ProStock_Pro;if(!r)return;const t=Jr,n=r.vehicle;n.weightLb=t.vehicle.weight_lb,n.wheelbaseIn=t.vehicle.wheelbase_in,n.overhangIn=t.vehicle.overhang_in??n.overhangIn,n.rolloutIn=t.vehicle.rollout_in??n.rolloutIn,n.tireDiaIn=t.vehicle.tire.diameter_in,n.tireRolloutIn=t.vehicle.tire.diameter_in*Math.PI,n.tireWidthIn=t.vehicle.tire.width_in,n.frontalArea_ft2=t.aero.frontalArea_ft2,n.cd=t.aero.Cd,n.liftCoeff=t.aero.Cl??n.liftCoeff,n.finalDrive=t.drivetrain.finalDrive,n.transEff=t.drivetrain.overallEfficiency,n.gearRatios=[...t.drivetrain.gearRatios],n.gearEff=[...t.drivetrain.perGearEff],n.shiftRPM=[...t.drivetrain.shiftsRPM],n.clutch={launchRPM:t.drivetrain.clutch.launchRPM,slipRPM:t.drivetrain.clutch.slipRPM,slipRatio:t.drivetrain.clutch.slippageFactor,lockup:t.drivetrain.clutch.lockup},n.pmi={engine_flywheel_clutch:t.pmi.engine_flywheel_clutch,transmission_driveshaft:t.pmi.transmission_driveshaft,tires_wheels_ringgear:t.pmi.tires_wheels_ringgear},n.engine={hpCurve:t.engineHP.map(([i,c])=>({rpm:i,hp:c})),fuelType:t.fuel.type,hpTorqueMultiplier:t.fuel.hpTorqueMultiplier},r.env.elevation=t.env.elevation_ft,r.env.barometerInHg=t.env.barometer_inHg,r.env.temperatureF=t.env.temperature_F,r.env.humidityPct=t.env.relHumidity_pct,r.env.windMph=t.env.wind_mph,r.env.windAngleDeg=t.env.wind_angle_deg,r.env.trackTempF=t.env.trackTemp_F,r.env.tractionIndex=t.env.tractionIndex})();const Gr={ProStock_Pro:Jr};function uo(r){var i;const t=fr[r];if(!t)throw new Error(`Benchmark config not found: ${r}`);return{env:{elevation_ft:t.env.elevation,barometer_inHg:t.env.barometerInHg,temperature_F:t.env.temperatureF,relHumidity_pct:t.env.humidityPct,wind_mph:t.env.windMph??0,wind_angle_deg:t.env.windAngleDeg??0,trackTemp_F:t.env.trackTempF??t.env.temperatureF,tractionIndex:t.env.tractionIndex??1},vehicle:{weight_lb:t.vehicle.weightLb,wheelbase_in:t.vehicle.wheelbaseIn??100,overhang_in:t.vehicle.overhangIn??40,rollout_in:t.vehicle.rolloutIn,staticFrontWeight_lb:t.vehicle.weightLb*.38,cgHeight_in:(t.vehicle.tireDiaIn??32)/2+3.75,bodyStyle:1,tire:{diameter_in:t.vehicle.tireDiaIn??(t.vehicle.tireRolloutIn??100)/Math.PI,width_in:t.vehicle.tireWidthIn??10}},aero:{frontalArea_ft2:t.vehicle.frontalArea_ft2,Cd:t.vehicle.cd,Cl:t.vehicle.liftCoeff??0},drivetrain:{finalDrive:t.vehicle.finalDrive??t.vehicle.rearGear??3,overallEfficiency:t.vehicle.transEff??.95,gearRatios:t.vehicle.gearRatios??[1],perGearEff:t.vehicle.gearEff??[.95],shiftsRPM:t.vehicle.shiftRPM??[7e3],clutch:t.vehicle.clutch?{launchRPM:t.vehicle.clutch.launchRPM??3e3,slipRPM:t.vehicle.clutch.slipRPM??3500,slippageFactor:t.vehicle.clutch.slipRatio??.1,lockup:t.vehicle.clutch.lockup??!1}:void 0,converter:t.vehicle.converter?{stallRPM:t.vehicle.converter.stallRPM??2500,torqueMult:t.vehicle.converter.torqueMult??2,slippageFactor:t.vehicle.converter.slipRatio??.1,lockup:t.vehicle.converter.lockup??!1}:void 0},pmi:{engine_flywheel_clutch:.5,transmission_driveshaft:.2,tires_wheels_ringgear:.3},engineHP:((i=t.vehicle.torqueCurve)==null?void 0:i.map(c=>[c.rpm,c.hp??0]))??[],fuel:{type:t.fuel??"GAS",hpTorqueMultiplier:1}}}function go(){const{fixture:r,setFixture:t}=Ae(),[n,i]=v.useState(JSON.stringify(r,null,2)),[c,s]=v.useState(null),[p,u]=v.useState(null),[a,k]=v.useState("ProStock_Pro"),[S,C]=v.useState("ProStock_Pro"),[T,P]=v.useState(null),m=()=>{try{const o=JSON.parse(n);Je(o),s(null),alert("‚úì Fixture is valid and complete!")}catch(o){o instanceof Xe?s(o.message):o instanceof SyntaxError?s(`JSON Syntax Error: ${o.message}`):s(o instanceof Error?o.message:String(o))}},y=()=>{try{const o=JSON.parse(n);t(o),s(null),alert("‚úì Applied to UI fixture store!")}catch(o){o instanceof SyntaxError?s(`JSON Syntax Error: ${o.message}`):s(o instanceof Error?o.message:String(o))}},h=()=>{try{const o=JSON.parse(n);Je(o);const b=tt(o);u(b),s(null)}catch(o){o instanceof Xe?(s(o.message),u(null)):o instanceof SyntaxError?s(`JSON Syntax Error: ${o.message}`):s(o instanceof Error?o.message:String(o))}},R=()=>{p&&(navigator.clipboard.writeText(JSON.stringify(p,null,2)),alert("‚úì Copied simulation input to clipboard!"))},g=()=>{try{const o=JSON.parse(n),b=Gr[a],x=ot(o,b,"");P(x.length>0?x.join(`
`):"No differences found")}catch(o){P(`Error: ${o instanceof Error?o.message:String(o)}`)}},_=()=>{try{const o=uo(S),b=JSON.stringify(o,null,2);i(b),t(o),s(null),alert(`‚úì Populated from benchmark: ${S}`)}catch(o){s(o instanceof Error?o.message:String(o))}};return e.jsxs("div",{style:{padding:"2rem",height:"100%",overflow:"auto"},children:[e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx("h2",{style:{marginTop:0,marginBottom:"0.5rem"},children:"Input Inspector (VB6)"}),e.jsx("p",{style:{color:"var(--color-muted)",fontSize:"0.875rem",margin:0},children:"Visualize, validate, and compare VB6 fixtures and simulation inputs."})]}),c&&e.jsx("div",{style:{padding:"1rem",backgroundColor:"#fee2e2",border:"1px solid #ef4444",borderRadius:"var(--radius-md)",marginBottom:"1rem",whiteSpace:"pre-wrap",fontFamily:"monospace",fontSize:"0.875rem",color:"#991b1b"},children:c}),e.jsxs("div",{style:{padding:"1rem",backgroundColor:"var(--color-surface)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)",marginBottom:"1rem"},children:[e.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem",fontSize:"1rem",fontWeight:"600"},children:"Load from Benchmark"}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[e.jsx("select",{value:S,onChange:o=>C(o.target.value),style:{flex:1,padding:"0.5rem",fontSize:"0.875rem",border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)",backgroundColor:"var(--color-bg)"},children:Qe.map(o=>e.jsxs("option",{value:o.name,children:[o.name," (",o.source,")"]},o.name))}),e.jsx("button",{onClick:_,style:{padding:"0.5rem 1rem",fontSize:"0.875rem",backgroundColor:"#8b5cf6",color:"white",border:"none",borderRadius:"var(--radius-md)",cursor:"pointer",whiteSpace:"nowrap"},children:"Populate from Benchmark"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem",fontSize:"1rem",fontWeight:"600"},children:"(A) VB6 UI Fixture (Editable)"}),e.jsx("textarea",{value:n,onChange:o=>i(o.target.value),style:{width:"100%",height:"400px",padding:"0.75rem",fontFamily:"monospace",fontSize:"0.75rem",backgroundColor:"#1e293b",color:"#e2e8f0",border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)",resize:"vertical"}}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.5rem"},children:[e.jsx("button",{onClick:m,style:{padding:"0.5rem 1rem",fontSize:"0.875rem",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"var(--radius-md)",cursor:"pointer"},children:"Validate"}),e.jsx("button",{onClick:y,style:{padding:"0.5rem 1rem",fontSize:"0.875rem",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"var(--radius-md)",cursor:"pointer"},children:"Apply to UI"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem",fontSize:"1rem",fontWeight:"600"},children:"(B) Simulation Input (Readonly)"}),e.jsx("pre",{style:{width:"100%",height:"400px",padding:"0.75rem",fontFamily:"monospace",fontSize:"0.75rem",backgroundColor:"#1e293b",color:"#e2e8f0",border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)",overflow:"auto",margin:0},children:p?JSON.stringify(p,null,2):'// Click "Build Input From UI" to generate'}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.5rem"},children:[e.jsx("button",{onClick:h,style:{padding:"0.5rem 1rem",fontSize:"0.875rem",backgroundColor:"#8b5cf6",color:"white",border:"none",borderRadius:"var(--radius-md)",cursor:"pointer"},children:"Build Input From UI"}),e.jsx("button",{onClick:R,disabled:!p,style:{padding:"0.5rem 1rem",fontSize:"0.875rem",backgroundColor:p?"#6b7280":"#d1d5db",color:"white",border:"none",borderRadius:"var(--radius-md)",cursor:p?"pointer":"not-allowed"},children:"Copy Input JSON"})]})]})]}),e.jsxs("div",{style:{padding:"1rem",backgroundColor:"var(--color-surface)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)"},children:[e.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem",fontSize:"1rem",fontWeight:"600"},children:"Diff vs Code Fixture"}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.75rem",alignItems:"center"},children:[e.jsx("label",{style:{fontSize:"0.875rem",fontWeight:"500"},children:"Compare against:"}),e.jsx("select",{value:a,onChange:o=>k(o.target.value),style:{padding:"0.5rem",fontSize:"0.875rem",border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)",backgroundColor:"var(--color-bg)"},children:Object.keys(Gr).map(o=>e.jsx("option",{value:o,children:o},o))}),e.jsx("button",{onClick:g,style:{padding:"0.5rem 1rem",fontSize:"0.875rem",backgroundColor:"#f59e0b",color:"white",border:"none",borderRadius:"var(--radius-md)",cursor:"pointer"},children:"Diff vs Fixture"})]}),T&&e.jsx("pre",{style:{padding:"0.75rem",backgroundColor:"#1e293b",color:"#e2e8f0",borderRadius:"var(--radius-sm)",fontSize:"0.75rem",overflow:"auto",margin:0,maxHeight:"300px",whiteSpace:"pre-wrap"},children:T})]})]})}function ot(r,t,n){const i=[];for(const c in t){const s=n?`${n}.${c}`:c;c in r?typeof t[c]=="object"&&t[c]!==null&&!Array.isArray(t[c])?i.push(...ot(r[c],t[c],s)):JSON.stringify(r[c])!==JSON.stringify(t[c])&&(i.push(`~ CHANGED: ${s}`),i.push(`  Reference: ${JSON.stringify(t[c])}`),i.push(`  Current:   ${JSON.stringify(r[c])}`)):i.push(`- MISSING: ${s}`)}for(const c in r)if(!(c in t)){const s=n?`${n}.${c}`:c;i.push(`+ ADDED: ${s} = ${JSON.stringify(r[c])}`)}return i}const Vr="rsa.quickpaste.profiles.v1";function fo(){const r=$r(),[t]=Xr(),{fixture:n,setFixture:i}=Ae(),[c,s]=v.useState(""),[p,u]=v.useState([]),[a,k]=v.useState(null),[S,C]=v.useState(""),[T,P]=v.useState(""),[m,y]=v.useState(""),[h,R]=v.useState(null),[g,_]=v.useState([]),[o,b]=v.useState(""),[x,l]=v.useState(""),[j,M]=v.useState(null),[A,N]=v.useState(!1);v.useEffect(()=>{try{const d=localStorage.getItem(Vr);d&&_(JSON.parse(d))}catch(d){console.error("Failed to load profiles:",d)}},[]);const J=d=>{try{localStorage.setItem(Vr,JSON.stringify(d)),_(d)}catch(w){console.error("Failed to save profiles:",w)}},oe=d=>{const w=d.trim().split(`
`),H=[];for(const F of w){const D=F.trim();if(!D)continue;const z=D.split(/[\s,]+/);if(z.length<2)throw new Error(`Invalid line: "${F}" - expected "RPM HP" or "RPM,HP"`);const E=parseFloat(z[0]),Z=parseFloat(z[1]);if(isNaN(E)||isNaN(Z))throw new Error(`Invalid numbers in line: "${F}"`);H.push({rpm:E,hp:Z})}if(H.length===0)throw new Error("No valid dyno data found");return H.sort((F,D)=>F.rpm-D.rpm),H},ee=()=>{try{const d=oe(c);u(d),k(null)}catch(d){k(d instanceof Error?d.message:String(d)),u([])}},re=()=>{try{const d=oe(c);i({...n,engineHP:d.map(w=>[w.rpm,w.hp])}),k(null),alert(`‚úì Applied ${d.length} dyno points to VB6 UI Fixture!`)}catch(d){k(d instanceof Error?d.message:String(d))}},te=()=>{try{R(null);const d={},w={};if(S.trim()){const F=parseFloat(S);if(isNaN(F))throw new Error("Invalid PMI Engine value");d.engine_flywheel_clutch=F}if(T.trim()){const F=parseFloat(T);if(isNaN(F))throw new Error("Invalid PMI Chassis value");d.tires_wheels_ringgear=F}if(m.trim()){const F=m.split(",").map(z=>z.trim()),D=[];for(const z of F){const E=parseFloat(z);if(isNaN(E))throw new Error(`Invalid gear efficiency value: "${z}"`);D.push(E)}w.perGearEff=D}if(Object.keys(d).length===0&&Object.keys(w).length===0){R("No values to apply");return}const H={...n};Object.keys(d).length>0&&(H.pmi={...n.pmi,...d}),Object.keys(w).length>0&&(H.drivetrain={...n.drivetrain,...w}),i(H),alert("‚úì Applied PMI values to VB6 UI Fixture!")}catch(d){R(d instanceof Error?d.message:String(d))}},ce=()=>{if(!x.trim()){alert("Please enter a profile name");return}const d={name:x.trim(),timestamp:Date.now(),fixture:JSON.parse(JSON.stringify(n))},w=[...g,d];J(w),l(""),alert(`‚úì Saved profile "${d.name}"`)},ie=()=>{if(!o){alert("Please select a profile");return}const d=g.find(w=>w.name===o);if(!d){alert("Profile not found");return}i(d.fixture),alert(`‚úì Loaded profile "${d.name}"`)},X=()=>{if(!o){alert("Please select a profile");return}if(!confirm(`Delete profile "${o}"?`))return;const d=g.filter(w=>w.name!==o);J(d),b("")},de=()=>{try{Je(n),M(null),alert("‚úì Fixture is complete and valid!")}catch(d){d instanceof Xe?M(d.message):M(d instanceof Error?d.message:String(d))}},ne=async()=>{N(!0),M(null);try{const d=await fetch("/src/dev/fixtures/ProStock_Pro.vb6.json");if(!d.ok)throw new Error(`Failed to load fixture: ${d.statusText}`);const w=await d.json();w.pmi||(w.pmi={engine_flywheel_clutch:3.42,transmission_driveshaft:.247,tires_wheels_ringgear:50.8}),i(w);const H=Ye(w);if(H.ok)alert(`‚úì ProStock_Pro fixture loaded and validated successfully!

Fixture valid: all PMI fields detected.`);else{const F=H.missing.join(", ");alert(`‚ö† Fixture loaded but incomplete.

Missing fields: ${F}`),M(`Missing fields: ${F}`)}v.startTransition(()=>{r("/dev?panel=input-inspector")})}catch(d){const w=d instanceof Error?d.message:String(d);M(`Failed to load ProStock_Pro fixture: ${w}`),alert(`‚ùå Error loading fixture: ${w}`)}finally{N(!1)}};return v.useEffect(()=>{t.get("example")==="prostock"&&setTimeout(()=>{ne()},0)},[t]),e.jsxs("div",{style:{padding:"2rem",height:"100%",overflow:"auto"},children:[e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx("h2",{style:{marginTop:0,marginBottom:"0.5rem"},children:"Quick Paste (Dyno & PMI)"}),e.jsx("p",{style:{color:"var(--color-muted)",fontSize:"0.875rem",margin:0},children:"Quickly paste dyno tables and PMI values into VB6 fixtures."})]}),j&&e.jsx("div",{style:{padding:"1rem",backgroundColor:"#fee2e2",border:"1px solid #ef4444",borderRadius:"var(--radius-md)",marginBottom:"1rem",whiteSpace:"pre-wrap",fontFamily:"monospace",fontSize:"0.875rem",color:"#991b1b"},children:j}),e.jsxs("div",{style:{padding:"1rem",backgroundColor:"var(--color-surface)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)",marginBottom:"1rem"},children:[e.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem",fontSize:"1rem",fontWeight:"600"},children:"1. Paste Dyno Table"}),e.jsx("p",{style:{fontSize:"0.875rem",color:"var(--color-muted)",marginBottom:"0.75rem"},children:'Paste dyno data as "RPM HP" or "RPM,HP" (one pair per line)'}),e.jsx("textarea",{value:c,onChange:d=>s(d.target.value),placeholder:`7000 1275
7100 1280
7200 1285`,style:{width:"100%",height:"150px",padding:"0.75rem",fontFamily:"monospace",fontSize:"0.875rem",backgroundColor:"#1e293b",color:"#e2e8f0",border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)",resize:"vertical"}}),a&&e.jsx("div",{style:{marginTop:"0.5rem",padding:"0.5rem",backgroundColor:"#fee2e2",border:"1px solid #ef4444",borderRadius:"var(--radius-sm)",fontSize:"0.875rem",color:"#991b1b"},children:a}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.75rem"},children:[e.jsx("button",{onClick:ee,style:{padding:"0.5rem 1rem",fontSize:"0.875rem",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"var(--radius-md)",cursor:"pointer"},children:"Preview"}),e.jsx("button",{onClick:re,style:{padding:"0.5rem 1rem",fontSize:"0.875rem",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"var(--radius-md)",cursor:"pointer"},children:"Apply to VB6 UI Fixture"})]}),p.length>0&&e.jsxs("div",{style:{marginTop:"1rem"},children:[e.jsxs("h4",{style:{marginTop:0,marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"600"},children:["Preview (",p.length," points)"]}),e.jsxs("div",{style:{padding:"0.75rem",backgroundColor:"#1e293b",borderRadius:"var(--radius-sm)",fontFamily:"monospace",fontSize:"0.75rem",color:"#e2e8f0",maxHeight:"150px",overflow:"auto"},children:[p.slice(0,10).map((d,w)=>e.jsxs("div",{children:[d.rpm.toFixed(0)," RPM ‚Üí ",d.hp.toFixed(1)," HP"]},w)),p.length>10&&e.jsxs("div",{style:{color:"#9ca3af",marginTop:"0.5rem"},children:["... and ",p.length-10," more points"]})]})]})]}),e.jsxs("div",{style:{padding:"1rem",backgroundColor:"var(--color-surface)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)",marginBottom:"1rem"},children:[e.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem",fontSize:"1rem",fontWeight:"600"},children:"2. Paste PMI Values"}),h&&e.jsx("div",{style:{marginBottom:"0.75rem",padding:"0.5rem",backgroundColor:"#fee2e2",border:"1px solid #ef4444",borderRadius:"var(--radius-sm)",fontSize:"0.875rem",color:"#991b1b"},children:h}),e.jsxs("div",{style:{display:"grid",gap:"0.75rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",marginBottom:"0.25rem"},children:"PMI Engine (slug-ft¬≤)"}),e.jsx("input",{type:"text",value:S,onChange:d=>C(d.target.value),placeholder:"e.g., 3.42",style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem",border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)",backgroundColor:"var(--color-bg)"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",marginBottom:"0.25rem"},children:"PMI Chassis (slug-ft¬≤)"}),e.jsx("input",{type:"text",value:T,onChange:d=>P(d.target.value),placeholder:"e.g., 50.8",style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem",border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)",backgroundColor:"var(--color-bg)"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",marginBottom:"0.25rem"},children:"Gear Efficiencies (comma-separated)"}),e.jsx("input",{type:"text",value:m,onChange:d=>y(d.target.value),placeholder:"e.g., 0.98, 0.97, 0.96, 0.95",style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem",border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)",backgroundColor:"var(--color-bg)"}})]})]}),e.jsx("button",{onClick:te,style:{marginTop:"0.75rem",padding:"0.5rem 1rem",fontSize:"0.875rem",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"var(--radius-md)",cursor:"pointer"},children:"Apply PMI Values"})]}),e.jsxs("div",{style:{padding:"1rem",backgroundColor:"var(--color-surface)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)",marginBottom:"1rem"},children:[e.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem",fontSize:"1rem",fontWeight:"600"},children:"3. Load/Save Profiles"}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",marginBottom:"0.5rem"},children:"Save Current Fixture as Profile"}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("input",{type:"text",value:x,onChange:d=>l(d.target.value),placeholder:"Profile name",style:{flex:1,padding:"0.5rem",fontSize:"0.875rem",border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)",backgroundColor:"var(--color-bg)"}}),e.jsx("button",{onClick:ce,style:{padding:"0.5rem 1rem",fontSize:"0.875rem",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"var(--radius-md)",cursor:"pointer"},children:"Save"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",marginBottom:"0.5rem"},children:"Load Profile"}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsxs("select",{value:o,onChange:d=>b(d.target.value),style:{flex:1,padding:"0.5rem",fontSize:"0.875rem",border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)",backgroundColor:"var(--color-bg)"},children:[e.jsx("option",{value:"",children:"Select a profile..."}),g.map(d=>e.jsxs("option",{value:d.name,children:[d.name," (",new Date(d.timestamp).toLocaleDateString(),")"]},d.name))]}),e.jsx("button",{onClick:ie,disabled:!o,style:{padding:"0.5rem 1rem",fontSize:"0.875rem",backgroundColor:o?"#10b981":"#d1d5db",color:"white",border:"none",borderRadius:"var(--radius-md)",cursor:o?"pointer":"not-allowed"},children:"Load"}),e.jsx("button",{onClick:X,disabled:!o,style:{padding:"0.5rem 1rem",fontSize:"0.875rem",backgroundColor:o?"#ef4444":"#d1d5db",color:"white",border:"none",borderRadius:"var(--radius-md)",cursor:o?"pointer":"not-allowed"},children:"Delete"})]})]}),g.length===0&&e.jsx("p",{style:{marginTop:"0.75rem",fontSize:"0.875rem",color:"var(--color-muted)",fontStyle:"italic"},children:"No saved profiles yet"})]}),e.jsxs("div",{style:{padding:"1rem",backgroundColor:"var(--color-surface)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)",marginBottom:"1rem"},children:[e.jsx("h3",{style:{marginTop:0,marginBottom:"0.75rem",fontSize:"1rem",fontWeight:"600"},children:"4. Load Example Fixture"}),e.jsx("button",{onClick:ne,disabled:A,style:{padding:"0.75rem 1.5rem",fontSize:"0.875rem",fontWeight:"500",backgroundColor:A?"#9ca3af":"#f59e0b",color:"white",border:"none",borderRadius:"var(--radius-md)",cursor:A?"not-allowed":"pointer"},children:A?"Loading...":"Load Example: ProStock_Pro"}),e.jsx("p",{style:{marginTop:"0.5rem",fontSize:"0.75rem",color:"var(--color-muted)"},children:"Loads complete ProStock_Pro fixture from VB6 printout, validates it, and opens Input Inspector"})]}),e.jsxs("div",{children:[e.jsx("button",{onClick:de,style:{padding:"0.75rem 1.5rem",fontSize:"0.875rem",fontWeight:"500",backgroundColor:"#8b5cf6",color:"white",border:"none",borderRadius:"var(--radius-md)",cursor:"pointer"},children:"Validate Current Fixture"}),e.jsx("p",{style:{marginTop:"0.5rem",fontSize:"0.75rem",color:"var(--color-muted)"},children:"Runs assertComplete() to check if all required fields are present"})]})]})}function it(r){const t=r.elevation_ft??0,n=r.fuelSystem??1,i=[.0205558,.00118163,154988e-10,40245e-11,434856e-15,2096e-14],c=i[0]+i[1]*r.temperature_F+i[2]*r.temperature_F**2+i[3]*r.temperature_F**3+i[4]*r.temperature_F**4+i[5]*r.temperature_F**5,s=r.relHumidity_pct/100*c,p=Math.pow((cr-.00356616*t)/cr,5.25588),u=Dr*r.barometer_inHg/kt*p,a=u-s,k=a/Dr,S=s*zr/(a*dr),C=Lr*(1/dr+S/zr)/(1+S),T=C/(Lr/dr),P=r.temperature_F+Pt,m=P/cr,h=144*u/(C*P)/32.174;let R,g;switch(n){case 1:R=1,g=1;break;case 2:R=1,g=2;break;case 3:R=2,g=1;break;case 4:R=2,g=2;break;case 5:R=3,g=2;break;case 6:R=1,g=3;break;case 7:case 9:R=2,g=3;break;case 8:R=3,g=3;break;default:R=1,g=1;break}const _=1+2.48*Math.pow(S,1.5);let o,b,x;switch(R){case 1:o=1,b=.6,x=.15;break;case 2:o=1,b=.3,x=.13;break;case 3:o=.85,b=.5,x=.055;break;default:o=1,b=.6,x=.15;break}if(g===2&&(x=x-.005),g===3){const j=.3050108932461874;o=.95-j*b,b=b+j,x=.6*x}let l=Math.pow(k,o)/(Math.sqrt(T)*Math.pow(m,b));return l=(1+x)*_/l-x,n===9&&(l=1),{rho_slug_per_ft3:h,pamb_psi:u,PWV_psi:s,pair_psi:a,WAR:S,RGAS:C,temp_R:P,hpc:l,delta:k,theta:m,rgrs:T}}const ur=.002377;function bo(r,t){return .5*r*t*t}function xo(r){return r*5280/3600}function vo(){const{fixture:r,setFixture:t}=Ae(),[n,i]=v.useState(""),[c,s]=v.useState(""),[p,u]=v.useState(""),[a,k]=v.useState(null),[S,C]=v.useState(null);v.useEffect(()=>{var m,y,h;r.env?(i(((m=r.env.barometer_inHg)==null?void 0:m.toString())||"29.92"),s(((y=r.env.temperature_F)==null?void 0:y.toString())||"75"),u(((h=r.env.relHumidity_pct)==null?void 0:h.toString())||"50")):(i("29.92"),s("75"),u("50"))},[r.env]),v.useEffect(()=>{try{const m=parseFloat(n),y=parseFloat(c),h=parseFloat(p);if(isNaN(m)||isNaN(y)||isNaN(h)){k(null),C(null);return}const g=it({barometer_inHg:m,temperature_F:y,relHumidity_pct:h});k(g),C(null)}catch(m){C(m instanceof Error?m.message:String(m)),k(null)}},[n,c,p]);const T=()=>{var m,y,h,R,g;try{const _=parseFloat(n),o=parseFloat(c),b=parseFloat(p);if(isNaN(_)||isNaN(o)||isNaN(b)){alert("Please enter valid numbers for all fields");return}t({...r,env:{elevation_ft:((m=r.env)==null?void 0:m.elevation_ft)??0,barometer_inHg:_,temperature_F:o,relHumidity_pct:b,wind_mph:((y=r.env)==null?void 0:y.wind_mph)??0,wind_angle_deg:((h=r.env)==null?void 0:h.wind_angle_deg)??0,trackTemp_F:((R=r.env)==null?void 0:R.trackTemp_F)??o,tractionIndex:((g=r.env)==null?void 0:g.tractionIndex)??1}}),alert("‚úì Applied environment values to VB6 UI Fixture!")}catch(_){alert(`Error: ${_ instanceof Error?_.message:String(_)}`)}},P=a?(a.rho_slug_per_ft3-ur)/ur*100:0;return e.jsxs("div",{style:{padding:"2rem",height:"100%",overflow:"auto"},children:[e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx("h2",{style:{marginTop:0,marginBottom:"0.5rem"},children:"Environment & Air Model"}),e.jsx("p",{style:{color:"var(--color-muted)",fontSize:"0.875rem",margin:0},children:"Visualize air density calculations and dynamic pressure at various speeds."})]}),S&&e.jsx("div",{style:{padding:"1rem",backgroundColor:"#fee2e2",border:"1px solid #ef4444",borderRadius:"var(--radius-md)",marginBottom:"1rem",fontSize:"0.875rem",color:"#991b1b"},children:S}),e.jsxs("div",{style:{padding:"1rem",backgroundColor:"var(--color-surface)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)",marginBottom:"1rem"},children:[e.jsx("h3",{style:{marginTop:0,marginBottom:"1rem",fontSize:"1rem",fontWeight:"600"},children:"Environmental Conditions"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",marginBottom:"0.5rem"},children:"Barometer (inHg)"}),e.jsx("input",{type:"text",value:n,onChange:m=>i(m.target.value),placeholder:"29.92",style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem",border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)",backgroundColor:"var(--color-bg)"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",marginBottom:"0.5rem"},children:"Temperature (¬∞F)"}),e.jsx("input",{type:"text",value:c,onChange:m=>s(m.target.value),placeholder:"75",style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem",border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)",backgroundColor:"var(--color-bg)"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",marginBottom:"0.5rem"},children:"Relative Humidity (%)"}),e.jsx("input",{type:"text",value:p,onChange:m=>u(m.target.value),placeholder:"50",style:{width:"100%",padding:"0.5rem",fontSize:"0.875rem",border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)",backgroundColor:"var(--color-bg)"}})]})]}),e.jsx("button",{onClick:T,style:{padding:"0.5rem 1rem",fontSize:"0.875rem",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"var(--radius-md)",cursor:"pointer"},children:"Apply to current VB6 UI Fixture"})]}),a&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{padding:"1rem",backgroundColor:"var(--color-surface)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)",marginBottom:"1rem"},children:[e.jsx("h3",{style:{marginTop:0,marginBottom:"1rem",fontSize:"1rem",fontWeight:"600"},children:"Computed Air Density"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--color-muted)",marginBottom:"0.25rem"},children:"Air Density (œÅ)"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",fontFamily:"monospace"},children:a.rho_slug_per_ft3.toFixed(6)}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--color-muted)"},children:"slugs/ft¬≥"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--color-muted)",marginBottom:"0.25rem"},children:"Standard œÅ"}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",fontFamily:"monospace"},children:ur.toFixed(6)}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--color-muted)"},children:"slugs/ft¬≥ (sea level, 59¬∞F)"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--color-muted)",marginBottom:"0.25rem"},children:"Delta from Standard"}),e.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"bold",fontFamily:"monospace",color:P>0?"#10b981":P<0?"#ef4444":"inherit"},children:[P>=0?"+":"",P.toFixed(2),"%"]}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--color-muted)"},children:P>0?"Denser (more power)":P<0?"Thinner (less power)":"Standard"})]})]}),e.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",backgroundColor:"#1e293b",borderRadius:"var(--radius-sm)",fontFamily:"monospace",fontSize:"0.75rem",color:"#e2e8f0"},children:[e.jsx("div",{style:{marginBottom:"0.25rem"},children:e.jsx("strong",{children:"Intermediate Values:"})}),e.jsxs("div",{children:["Ambient Pressure: ",a.pamb_psi.toFixed(4)," psi"]}),e.jsxs("div",{children:["Water Vapor Pressure: ",a.PWV_psi.toFixed(4)," psi"]}),e.jsxs("div",{children:["Dry Air Pressure: ",a.pair_psi.toFixed(4)," psi"]}),e.jsxs("div",{children:["Water-to-Air Ratio: ",a.WAR.toFixed(6)]}),e.jsxs("div",{children:["Gas Constant: ",a.RGAS.toFixed(4)," ft¬∑lbf/(lbm¬∑¬∞R)"]}),e.jsxs("div",{children:["Temperature: ",a.temp_R.toFixed(2)," ¬∞R"]})]})]}),e.jsxs("div",{style:{padding:"1rem",backgroundColor:"var(--color-surface)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)"},children:[e.jsx("h3",{style:{marginTop:0,marginBottom:"1rem",fontSize:"1rem",fontWeight:"600"},children:"Dynamic Pressure (q) at Various Speeds"}),e.jsxs("table",{style:{width:"100%",fontSize:"0.875rem",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#1e293b",color:"#e2e8f0"},children:[e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",borderBottom:"2px solid var(--color-border)"},children:"Speed (MPH)"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"right",borderBottom:"2px solid var(--color-border)"},children:"Speed (ft/s)"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"right",borderBottom:"2px solid var(--color-border)"},children:"q (psf)"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"right",borderBottom:"2px solid var(--color-border)"},children:"q (psi)"})]})}),e.jsx("tbody",{children:[10,50,100,200].map((m,y)=>{const h=xo(m),R=bo(a.rho_slug_per_ft3,h),g=R/144;return e.jsxs("tr",{style:{backgroundColor:y%2===0?"transparent":"rgba(0,0,0,0.02)"},children:[e.jsx("td",{style:{padding:"0.75rem",borderBottom:"1px solid var(--color-border)"},children:m}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"right",fontFamily:"monospace",borderBottom:"1px solid var(--color-border)"},children:h.toFixed(2)}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"right",fontFamily:"monospace",borderBottom:"1px solid var(--color-border)"},children:R.toFixed(4)}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"right",fontFamily:"monospace",borderBottom:"1px solid var(--color-border)"},children:g.toFixed(6)})]},m)})})]}),e.jsxs("div",{style:{marginTop:"1rem",fontSize:"0.75rem",color:"var(--color-muted)"},children:[e.jsx("strong",{children:"Note:"})," Dynamic pressure q = 0.5 √ó œÅ √ó v¬≤. Used in drag force calculation: F_drag = Cd √ó A √ó q"]})]})]})]})}function Ze(r,t,n,i,c){let s=0;for(s=0;s<n-1&&!(c<=r[s+1]);s++);s>=n-1&&(s=n-2),s<0&&(s=0);const p=r[s],u=r[s+1],a=t[s],k=t[s+1];if(u===p)return a;const S=(c-p)/(u-p);return a+S*(k-a)}function nt(r,t,n,i,c){let s,p;if(c)s=1+4e-5*n,p=s*r*De/12;else{const u=(Math.pow(t,1.4)+r-16)/(.171*Math.pow(r,1.7));s=1+u*135e-7*Math.pow(n,1.6);const a=1+u*35e-5*n;a<s&&(s=a),p=(s-.035*Math.abs(i))*r*De/12}return{TireGrowth:s,TireCirFt:p}}function st(r,t){return(1-(r-1)*.01)/Math.pow(t,.25)}function lt(r){return r?Bt:Ht}function yo(r,t){if(!(t!=null&&t.enabled))return 1;const{activateTime_s:n,duration_s:i,throttlePct:c,rampTime_s:s=0}=t,p=n+i;if(r<n||r>=p)return 1;const u=c/100;if(s>0&&r<n+s){const a=(r-n)/s;return 1-(1-u)*a}if(s>0&&r>p-s){const a=(p-r)/s;return 1-(1-u)*a}return u}function _o(r,t,n,i,c){const s=r.Gear;let p;const u=r.Gear!==r.PrevGear;if(u)p=t.DTShift,r.PrevGear=r.Gear;else{if(p=i,r.Ags0_g>0&&r.L>1){const G=Math.min(r.AgsMax_g/r.Ags0_g,10);p=i*Math.pow(G,4)}p>.1&&(p=.1)}let a=0;const k=r.time_s-r.Time0_s;k>0&&(a=(r.AGS_g-r.Ags0_g)/k),a<Oe&&(a=Oe),a>Ue&&(a=Ue),r.Vel0_ftps=r.Vel_ftps,r.Ags0_g=r.AGS_g,r.Time0_s=r.time_s,r.Dist0_ft=r.Dist_ft,r.RPM0=r.EngRPM,r.DSRPM0=r.DSRPM,r.RPM0===t.LaunchRPM&&r.Time0_s===0&&(r.RPM0=t.Stall,t.LaunchRPM<t.Stall&&(r.Time0_s=t.EnginePMI*(t.Stall-t.LaunchRPM)/25e4));const S=nt(t.TireDia_in,t.TireWidth_in,r.Vel_ftps,r.Ags0_g,n.isLandSpeed);r.TireGrowth=S.TireGrowth,r.TireCirFt=S.TireCirFt;let C;n.isLandSpeed?C=1.01+(n.TractionIndex-1)*.01:C=1.02+(.005*(n.TractionIndex-1)+3*(n.TrackTempEffect-1))*(1-Math.pow(r.Dist0_ft/1320,2));const T=t.TGR[s-1]??1,P=t.TiresPMI+t.TransPMI*Math.pow(t.GearRatio,2)*Math.pow(T,2);let m=r.Vel0_ftps+r.Ags0_g*Q*p+a*Q*p*p/2;m<r.Vel0_ftps*.9&&r.Vel0_ftps>100&&(m=r.Vel0_ftps),m<0&&(m=0);const y=t.ShiftRPM[s-1]??9e3;if(!u&&(p<.005&&(p=.005),p>.05&&(p=.05),m=r.Vel0_ftps+r.Ags0_g*Q*p+a*Q*p*p/2,r.Vel0_ftps>0&&r.RPM0>t.Stall&&s<t.NGR)){const G=r.Vel0_ftps*(y+5)/r.RPM0;m>G&&(m=G,r.Ags0_g*Q>0&&(p=(m-r.Vel0_ftps)/(r.Ags0_g*Q)))}const h=m*m-r.Vel0_ftps*r.Vel0_ftps,R=C*m*60/r.TireCirFt,g=R*t.GearRatio*T;let _=t.Slippage*g,o,b=t.Stall,x=0;t.isClutch?(_<t.Stall&&(s===1||!t.LockUp)&&(_=t.Stall),o=g/_):s===1||!t.LockUp?(b=t.Stall,x=t.Slippage*g/b,r.L>2&&(x>.6&&(b=b*(1+(t.Slippage-1)*(x-.6)/(1/t.Slippage-.6))),x=t.Slippage*g/b),o=1/t.Slippage,_<b&&(_=b,o=(t.TorqueMult-(t.TorqueMult-1)*x)*g/b)):(_=1.005*g,o=g/_),o>1&&(o=1);let l=Ze(t.xrpm,t.yhp,t.NHP,1,_);l=t.HPTQMult*l/n.hpc,t.RevLimiterRPM>0&&_>=t.RevLimiterRPM&&(l=l*.05);const j=yo(r.time_s,c);l=l*j;const M=l;l=l*o;const A=Math.sqrt(m*m+2*m*(n.WindSpeed_mph/$e)*Math.cos(De*n.WindAngle_deg/180)+Math.pow(n.WindSpeed_mph/$e,2)),N=Math.sign(A)*n.rho*Math.pow(Math.abs(A),2)/(2*Q);let J;t.BodyStyle===8?J=t.RefArea_ft2+(r.TireGrowth-1)*t.TireDia_in/2*t.TireWidth_in/144:J=t.RefArea_ft2+(r.TireGrowth-1)*t.TireDia_in/2*(2*t.TireWidth_in)/144;const oe=t.Weight_lbf+t.LiftCoef*J*N,ee=n.isLandSpeed?Kr:Yr,re=n.isLandSpeed?Tt:Ct,te=n.isLandSpeed?Et:wt,ie=(ee-r.Dist0_ft/1320*re)*oe+1e-4*oe*($e*m)+t.DragCoef*J*N,X=ie*m/550,de=12*r.TireCirFt/(2*De),ne=(r.Ags0_g*t.Weight_lbf*(t.YCG_in-de+te/t.Efficiency*de)+ie*t.YCG_in)/t.Wheelbase_in;let d=t.StaticFWt_lbf-ne,w=0;d<0&&(w=-d*t.Wheelbase_in/64,d=0);let H=oe-d-w;H<0&&(H=t.Weight_lbf);const F=st(n.TractionIndex,n.TrackTempEffect),D=lt(n.isLandSpeed);let z=F*D*t.TireDia_in*(t.TireWidth_in+1)*(.92+.08*Math.pow(H/1900,2.15));t.BodyStyle===8&&(z=.5*z);const E=(z/r.TireGrowth-ie)/t.Weight_lbf,Z=t.TGEff[s-1]??.99;l=l*Z*t.Efficiency/C;const V=l;l=l-X;let B=550*Q*l/t.Weight_lbf,W=B/(m*Q),he=!1;W>E&&(he=!0,B=B*(E-(W-E))/W,W=E-(W-E)),W<xe&&(W=xe,B=xe*Q*m);let me=Math.max(0,h)/(2*B)+r.Time0_s;const Ie=n.isLandSpeed?Mt:At,Fe=n.isLandSpeed?It:Ft;let se=t.EnginePMI*_*(_-r.RPM0);se<0&&(t.isClutch?se=Ie*se:se=Fe*se);let je=P*R*(R-r.DSRPM0);je<0&&(je=0);let ze=0,er=0,ue=0;for(ue=1;ue<=12;ue++){const G=me-r.Time0_s;if(G<=0)break;const pe=Math.pow(2*De/60,2)/(12*550*G);ze=se*pe,er=je*pe,l=(M-ze)*o,l=(l*Z*t.Efficiency-er)/C-X,B=550*Q*l/t.Weight_lbf,W=B/(m*Q);let le=0;G!==0&&(le=(W-r.Ags0_g)/G),le<Oe&&(le=Oe,W=r.Ags0_g+le*G,B=W*Q*m),le>Ue&&(le=Ue,W=r.Ags0_g+le*G,B=W*Q*m),he=!1,W>E&&(he=!0,B=B*(E-(W-E))/W,W=E-(W-E)),W<xe&&(B=B*xe/W,W=xe);const rr=Math.max(0,h)/(2*B)+r.Time0_s,Be=rr-r.Time0_s;if(ue===12||Math.abs(100*(Be-G)/Be)<=.01){me=rr;break}let Pe=l/M;Pe<Nr&&(Pe=Nr),Pe>Wr&&(Pe=Wr),me=r.Time0_s+G+Pe*(Be-G)}const Se=me-r.Time0_s;let Re;if(B<.1||Se<=0){const G=(r.Vel0_ftps+m)/2;Re=r.Dist0_ft+Math.max(0,G*Math.abs(Se))}else{const G=Math.pow(r.Vel0_ftps,3),pe=2*B*Se+r.Vel0_ftps*r.Vel0_ftps;if(pe<0){const le=(r.Vel0_ftps+m)/2;Re=r.Dist0_ft+le*Se}else Re=(Math.pow(pe,1.5)-G)/(3*B)+r.Dist0_ft}return r.L+=1,r.time_s=me,r.Vel_ftps=m,r.Dist_ft=Re,r.AGS_g=W,r.EngRPM=_,r.DSRPM=R,r.SLIP=he,{TimeStep_s:p,VelSqrd:h,LockRPM:g,ClutchSlip:o,zStall:b,SlipRatio:x,TireSlip:C,WindFPS:A,q:N,RefArea2_ft2:J,DownForce_lbf:oe,DragForce_lbf:ie,DragHP:X,DynamicFWT_lbf:d,DynamicRWT_lbf:H,WheelBarWT_lbf:w,CRTF:z,AMax_g:E,ChassisPMI:P,EngAccHP:se,ChasAccHP:je,HPSave:M,HPAtWheels:V,HP:l,PQWT:B,iterations:ue}}function jo(r,t,n){const i=nt(r.TireDia_in,r.TireWidth_in,0,0,t.isLandSpeed),c=Ze(r.xrpm,r.yhp,r.NHP,1,n);let u=5252*(r.HPTQMult*c/t.hpc)/n;const a=r.TGR[0]??1,k=r.TGEff[0]??.99;u=u*r.TorqueMult*a*k;const S=t.isLandSpeed?Kr:Yr,C=t.WindSpeed_mph/$e,T=Math.sign(C)*t.rho*Math.pow(Math.abs(C),2)/(2*Q),P=S*r.Weight_lbf+r.DragCoef*r.RefArea_ft2*T;let m;t.isLandSpeed?m=1.01+(t.TractionIndex-1)*.01:m=1.02+(t.TractionIndex-1)*.005+(t.TrackTempEffect-1)*3;const y=u*r.GearRatio*r.Efficiency/(m*r.TireDia_in/24)-P;let R=(r.isClutch?.88:.96)*y/r.Weight_lbf,_=r.Weight_lbf-r.StaticFWt_lbf;_<0&&(_=r.Weight_lbf);const o=st(t.TractionIndex,t.TrackTempEffect),b=lt(t.isLandSpeed);let x=o*b*r.TireDia_in*(r.TireWidth_in+1)*(.92+.08*Math.pow(_/1900,2.15));r.BodyStyle===8&&(x=.5*x);const l=(x-P)/r.Weight_lbf;return R>l&&(R=l),R<xe&&(R=xe),{L:1,time_s:0,Vel_ftps:.001,Dist_ft:0,AGS_g:R,EngRPM:n,DSRPM:0,Gear:1,SLIP:!1,Vel0_ftps:0,Ags0_g:R,Time0_s:0,Dist0_ft:0,RPM0:n,DSRPM0:0,AgsMax_g:R,TireGrowth:i.TireGrowth,TireCirFt:i.TireCirFt,ShiftFlag:0,PrevGear:1}}function So(r,t,n,i){let c=r*.11*Math.pow(t*n/i,-.3333333333333333);return c=c/15,c<.005&&(c=.005),c}function Ro(r){const t=Zr[r];return t?t.lengthFt:r==="EIGHTH"?660:1320}function Po(r){const t=mr[r];return t||(r==="EIGHTH"?mr.EIGHTH:mr.QUARTER)}function ko(r){if(!r)return 1;const t=r.toUpperCase();return t==="GASOLINE"?1:t==="GASOLINE EFI"?2:t==="METHANOL"?3:t==="METHANOL EFI"?4:t==="NITROMETHANE"?5:t==="SUPERCHARGED GASOLINE"?6:t==="SUPERCHARGED METHANOL"?7:t==="SUPERCHARGED NITRO"?8:t==="E85"||t==="DIESEL"||t==="GAS+CARB"||t==="GASOLINE+CARBURETOR"?1:t==="GAS+INJECT"||t==="GASOLINE+FUEL INJECTION"?2:t==="METHANOL+CARB"||t==="METHANOL+CARBURETOR"?3:t==="METHANOL+INJECT"||t==="METHANOL+FUEL INJECTION"?4:t==="NITRO+INJECT"||t==="NITROMETHANE+FUEL INJECTION"?5:t==="GAS+SUPERCHARGED"||t==="GASOLINE+SUPERCHARGED"?6:t==="METHANOL+SUPERCHARGED"?7:t==="NITRO+SUPERCHARGED"||t==="NITROMETHANE+SUPERCHARGED"?8:t==="ELECTRIC"?9:t.includes("SUPERCHARG")||t.includes("BLOWN")?t.includes("NITRO")?8:t.includes("METHANOL")||t.includes("ALCOHOL")?7:6:t.includes("INJECT")||t.includes("EFI")?t.includes("NITRO")?5:t.includes("METHANOL")||t.includes("ALCOHOL")?4:2:t.includes("NITRO")?5:t.includes("METHANOL")||t.includes("ALCOHOL")?3:t.includes("ELECTRIC")?9:1}function To(r){const t=r.vehicle,n=r.engine??t.engine,i=(n==null?void 0:n.hpCurve)??(n==null?void 0:n.torqueCurve)??t.torqueCurve??t.hpCurve??[],c=[],s=[];for(const S of i)Array.isArray(S)?(c.push(S[0]),s.push(S[1])):S&&typeof S=="object"&&(c.push(S.rpm),S.hp!==void 0?s.push(S.hp):S.torque!==void 0?s.push(S.torque*S.rpm/5252):S.tq_lbft!==void 0&&s.push(S.tq_lbft*S.rpm/5252));if(c.length>=2)return{xrpm:c,yhp:s,NHP:c.length,isQuarterJr:!1};const p=Number(t.powerHP??t.peakHP),u=Number(t.rpmAtPeakHP??t.peakRPM??6500),a=Number(t.displacement_cid??t.displacementCID??350),k=r.fuelSystem??t.fuelSystem??1;if(Number.isFinite(p)&&p>0){const S=Gt({peakHP:p,peakRPM:u,displacement_cid:a,fuelSystem:k}),{rpm:C,hp:T}=Vt(S);return{xrpm:C,yhp:T,NHP:S.NHP,isQuarterJr:!0,quarterJrParams:{peakHP:p,rpmAtPeakHP:u,displacement_cid:a,fuelSystem:k}}}return{xrpm:[4e3,6500],yhp:[100,150],NHP:2,isQuarterJr:!1}}function Or(r){const t=Math.abs(100-r);let n;return r>100?n=1+25e-7*Math.pow(t,2.5):n=1+2e-6*Math.pow(t,2.5),n>1.04&&(n=1.04),n}function Co(r){var kr,Tr,Cr,Er,wr,Mr,Ar,Ir,Fr,Br;const t=[],n=[],i=r.vehicle,c=r.env,s=r.raceLength??"QUARTER",p=r.raceLengthFt??Ro(s),u=((kr=Zr[s])==null?void 0:kr.category)==="landspeed",a=i.rolloutIn??9,k=i.overhangIn??0;let S=2*a;S<24&&(S=24);let C=(k+.25*S)/12;const T=.5*S/12;C<T&&(C=T);const P=a/12,m=r.drivetrain??i.drivetrain,y=(m==null?void 0:m.clutch)??r.clutch??i.clutch,h=(m==null?void 0:m.converter)??r.converter??i.converter,R=r.engine??i.engine,g=r.pmi??i.pmi,_=r.throttleStop,o=_!=null&&_.enabled?{enabled:!0,activateTime_s:_.activateTime_s,duration_s:_.duration_s,throttlePct:_.throttlePct,rampTime_s:_.rampTime_s}:void 0,b=i.transmissionType??r.transmissionType,x=b==="clutch"?!0:b==="converter"?!1:!h||y&&!h,l=r.fuel,j=typeof l=="string"?l:(l==null?void 0:l.fuelType)??(l==null?void 0:l.fuelSystem)??(l==null?void 0:l.type)??r.fuelType??i.fuelType??r.fuelSystem??i.fuelSystem,M=ko(j),A=it({barometer_inHg:c.barometerInHg??29.92,temperature_F:c.temperatureF??59,relHumidity_pct:c.humidityPct??50,elevation_ft:c.elevation??0,fuelSystem:M}),N=A.rho_slug_per_ft3*Q,J=A.hpc,oe=To(r),{xrpm:ee,yhp:re,NHP:te,isQuarterJr:ce,quarterJrParams:ie}=oe;te<2&&t.push("HP curve has fewer than 2 points"),ce&&t.push("Using QuarterJr mode (synthetic HP curve from peak HP)");const X=(m==null?void 0:m.gearRatios)??i.gearRatios??[2.5,1.8,1.4,1.1,1],de=(m==null?void 0:m.finalDriveRatio)??i.finalDrive??i.rearGear??3.73,ne=X.length,d=i.tire,w=(d==null?void 0:d.diameter_in)??i.tireDiaIn??32,H=(d==null?void 0:d.width_in)??i.tireWidthIn??17,F=i.bodyStyle??Lt(i.weightLb);let D,z,E,Z,V,B,W,he,_e,me,Ie,Fe;if(ce&&ie){const{displacement_cid:L,fuelSystem:ve}=ie;D=Dt(ne,!x);const K=i.shiftRPM??(m==null?void 0:m.shiftRPM)??7e3;z=X.map(()=>K);const O=(y==null?void 0:y.slipRPM)??(h==null?void 0:h.stallRPM)??i.slipStallRPM??5e3;if(x)Z=Ot(O),V=1,E=O;else{const ar=(h==null?void 0:h.diameter_in)??(h==null?void 0:h.diameter)??i.converterDiameterIn??i.converterDia_in??10;let ge;if(O>220){E=O;const U=zt(ee,re,te,1,E)*(qt/E)/J;ge=E/1e3*(E/U)}else ge=O,E=O;const Ge=ge/(200*Math.pow(7/ar,4));Z=1.01+Ge/20+ge/8e3,V=2.633-Math.pow(Ge,.3)-ge/1500,V<1&&(V=1),V>2&&(V=2)}_e=Ut(F);const Y=Nt(F);me=Y.dragCoef,Ie=Y.liftCoef,Fe=Y.overhang_in;const q=Wt(L,ve,!x,ne,w,H,F);B=q.enginePMI,W=q.transPMI,he=q.tiresPMI}else{D=(m==null?void 0:m.perGearEff)??i.gearEfficiencies??null??X.map(()=>.99),z=(m==null?void 0:m.shiftRPMs)??(m==null?void 0:m.shiftsRPM)??i.shiftRPMs??i.shiftsRPM??i.shiftRPM??X.map(()=>7e3);const ve=(y==null?void 0:y.slipRPM)??i.clutchSlipRPM??7200,K=(h==null?void 0:h.stallRPM)??i.converterStallRPM??5500;E=x?ve:K;const O=(y==null?void 0:y.slippageFactor)??(y==null?void 0:y.slippage)??(y==null?void 0:y.slipRatio)??i.clutchSlippage??1.0025,Y=(h==null?void 0:h.slippageFactor)??(h==null?void 0:h.slippage)??i.converterSlippage??1.06;Z=x?O:Y,V=x?1:(h==null?void 0:h.torqueMult)??(h==null?void 0:h.torqueMultiplier)??i.converterTorqueMult??2.2,B=(g==null?void 0:g.engine_flywheel_clutch)??i.enginePMI??(R==null?void 0:R.enginePMI)??4,he=(g==null?void 0:g.tires_wheels_ringgear)??i.tiresPMI??(R==null?void 0:R.tiresPMI)??.5,W=(g==null?void 0:g.transmission_driveshaft)??i.transPMI??(R==null?void 0:R.transPMI)??.2,_e=(m==null?void 0:m.overallEfficiency)??i.transEfficiency??.97;const q=r.aero??i.aero;me=(q==null?void 0:q.Cd)??(q==null?void 0:q.cd)??i.cd??.35,Ie=(q==null?void 0:q.Cl)??(q==null?void 0:q.cl)??i.liftCoeff??0,Fe=k}const se=w/2+3.75,je=c.trackTempF??100,ze=u?1:Or(je),ue=1.02+((c.tractionIndex??5)-1)*.005+(ze-1)*3,Se=1.03,Re=.025,G=i.wheelbaseIn??100,pe=i.weightLb,le=x?(y==null?void 0:y.launchRPM)??i.clutchLaunchRPM??E:E,Be=5252*(Ze(ee,re,te,1,le)/J)/le*V*X[0]*D[0],tr=(c.windMph??0)/.681818,dt=tr>0?N*tr*tr/(2*Q):0,ct=((Tr=r.aero)==null?void 0:Tr.frontalArea_ft2)??i.frontalArea_ft2??i.frontalAreaFt2??20,br=Re*pe+me*ct*dt,mt=Be*de*_e/(ue*w/24)-br,or=(x?.88:.96)*mt/pe,xr=(1-.035*Math.abs(or))*w/2,vr=(or*pe*(se-xr+Se/_e*xr)+br*se)/G,yr=ce?Fe:k,ae={Weight_lbf:i.weightLb,Wheelbase_in:i.wheelbaseIn??100,YCG_in:se,StaticFWt_lbf:vr,TireDia_in:w,TireWidth_in:H,Rollout_in:i.rolloutIn??12,GearRatio:de,TGR:X,TGEff:D,Efficiency:_e,DTShift:x?.2:.25,Slippage:Z,TorqueMult:V,Stall:E,LockUp:(h==null?void 0:h.lockup)??!1,isClutch:x,RefArea_ft2:((Cr=r.aero)==null?void 0:Cr.frontalArea_ft2)??i.frontalArea_ft2??i.frontalAreaFt2??20,DragCoef:me,LiftCoef:Ie,BodyStyle:F,EnginePMI:B,TiresPMI:he,TransPMI:W,xrpm:ee,yhp:re,NHP:te,HPTQMult:i.hpTorqueMultiplier??(R==null?void 0:R.hpTqMult)??1,ShiftRPM:z,NGR:ne,LaunchRPM:x?(y==null?void 0:y.launchRPM)??i.clutchLaunchRPM??E:E,ShiftMode:i.shiftMode??"rpm",ShiftTimes:i.shiftTimes??[],RevLimiterRPM:i.revLimiterRPM??0};if(ce&&yr!==k){let L=2*a;L<24&&(L=24),C=(yr+.25*L)/12;const ve=.5*L/12;C<ve&&(C=ve)}const ht=c.trackTempF??100,_r=u?1:Or(ht),ir={rho:N,hpc:J,TractionIndex:c.tractionIndex??5,TrackTempEffect:_r,WindSpeed_mph:c.windMph??0,WindAngle_deg:c.windAngleDeg??0,isLandSpeed:u},jr=x?(y==null?void 0:y.launchRPM)??E:E,I=jo(ae,ir,jr),Sr=(i.rolloutIn??12)/12,pt=Sr>0?Sr:1,ut=Ze(ee,re,te,1,jr),gt=So(pt,ut,V,i.weightLb),ft=u?5e4:5e3,bt=u?300:30,nr={iterations:[],convergenceHistory:[]},sr=[],lr=Po(s);let Ne=0,We=null,ke=null,Te=null;for(let L=0;L<ft&&!(I.Dist_ft-P+C>=p+50||I.time_s>=bt);L++){if(!Number.isFinite(I.Vel_ftps)||!Number.isFinite(I.Dist_ft)||!Number.isFinite(I.AGS_g)){t.push(`NaN detected at step ${L}: Vel=${I.Vel_ftps}, Dist=${I.Dist_ft}, AGS=${I.AGS_g}`);break}const K=_o(I,ae,ir,gt,o);if(nr.iterations.push(K.iterations),L<20&&nr.convergenceHistory.push({step:L,iterations:K.iterations,HPSave:K.HPSave,HP:K.HP,PQWT:K.PQWT,AGS_g:I.AGS_g}),We===null&&I.Dist_ft>=P){const $=(I.Dist_ft-P)/I.Vel_ftps;We=I.time_s-$}const O=Math.max(0,I.Dist_ft-P+C),Y=We!==null?I.time_s-We:0,q=ae.TGR[I.Gear-1]??1,ar=(K.LockRPM??I.EngRPM)/q,ge=K.TireSlip,Ge=I.Vel_ftps*ge*Me,Hr=(o==null?void 0:o.enabled)&&Y>=o.activateTime_s&&Y<o.activateTime_s+o.duration_s;if(n.push({t_s:Y,s_ft:O,v_fps:I.Vel_ftps,v_mph:I.Vel_ftps*Me,a_g:I.AGS_g,rpm:I.EngRPM,dsrpm:ar,lockRpm:K.LockRPM,gear:I.Gear,slip:I.SLIP,tireSlip:ge,hp:K.HPAtWheels,dragHp:K.DragHP,netHp:K.HP,wheelSpeed_mph:Ge,throttleStopActive:Hr}),ke===null&&O>=594){const U=n.length>1?((Er=n[n.length-2])==null?void 0:Er.s_ft)??0:0,$=n.length>1?((wr=n[n.length-2])==null?void 0:wr.t_s)??0:0;if(U<594&&O>U){const Ee=(594-U)/(O-U);ke=$+Ee*(Y-$)}else ke=Y}if(Te===null&&O>=1254){const U=n.length>1?((Mr=n[n.length-2])==null?void 0:Mr.s_ft)??0:0,$=n.length>1?((Ar=n[n.length-2])==null?void 0:Ar.t_s)??0:0;if(U<1254&&O>U){const Ee=(1254-U)/(O-U);Te=$+Ee*(Y-$)}else Te=Y}for(;Ne<lr.length&&O>=lr[Ne];){const U=lr[Ne],$=n.length>1?((Ir=n[n.length-2])==null?void 0:Ir.s_ft)??0:0,Ee=n.length>1?((Fr=n[n.length-2])==null?void 0:Fr.t_s)??0:0;let we=Y;if($<U&&O>$){const yt=(U-$)/(O-$);we=Ee+yt*(Y-Ee)}let Ve;U===660&&ke!==null&&we>ke?Ve=Me*66/(we-ke):U===1320&&Te!==null&&we>Te?Ve=Me*66/(we-Te):Ve=I.Vel_ftps*Me,sr.push({d_ft:U,t_s:we,v_mph:Ve}),Ne++}if(I.ShiftFlag===1)I.ShiftFlag=2,I.Gear++;else if(I.ShiftFlag===2)I.ShiftFlag=0;else if(I.Gear<ae.NGR)if((ae.ShiftMode??"rpm")==="time"){const $=(Br=ae.ShiftTimes)==null?void 0:Br[I.Gear-1];$!==void 0&&I.time_s>=$&&(I.ShiftFlag=1)}else{const $=ae.ShiftRPM[I.Gear-1]??7e3;I.EngRPM>=$&&(I.ShiftFlag=1)}}const Ce=sr.find(L=>L.d_ft===p),Rr=(Ce==null?void 0:Ce.t_s)??I.time_s,Pr=(Ce==null?void 0:Ce.v_mph)??I.Vel_ftps*Me,xt=n.map(L=>({t_s:L.t_s,s_ft:L.s_ft,v_mph:L.v_mph,v_fps:L.v_fps,a_g:L.a_g,rpm:L.rpm,dsrpm:L.dsrpm,lockRpm:L.lockRpm,gear:L.gear,slip:L.slip,tireSlip:L.tireSlip,hp:L.hp,dragHp:L.dragHp,wheelSpeed_mph:L.wheelSpeed_mph})),vt={fuelType:{resolved:j??"unknown",fuelSystemType:M,vehicleFuelType:i.fuelType,vehicleFuelSystem:i.fuelSystem},hpCurve:{length:te,peakHP:Math.max(...re),rpmRange:`${Math.min(...ee)} - ${Math.max(...ee)}`},airCalc:{rho_lbm_ft3:N,hpc:J},simParams:{weight:i.weightLb,tireDia:w,wheelbase:i.wheelbaseIn??100,finalDrive:de,NGR:ne,shiftRPMs:ae.ShiftRPM,peakHP:Math.max(...re),stallRPM:E,slippage:Z,slippageSource:(y==null?void 0:y.slippageFactor)!==void 0?"clutch.slippageFactor":(y==null?void 0:y.slippage)!==void 0?"clutch.slippage":i.clutchSlippage!==void 0?"vehicle.clutchSlippage":"default",vehicleClutchSlippage:i.clutchSlippage,isClutch:x,tractionIndex:ir.TractionIndex,trackTempEffect:_r,pmi:{engine:B,trans:W,tires:he},aero:{frontalArea:ae.RefArea_ft2,cd:ae.DragCoef,cl:ae.LiftCoef},launchRPM:ae.LaunchRPM,ycg:se,staticFWt:vr,ags0:or,tireSlipAtLaunch:ue},result:{et:Rr,mph:Pr}};return{et_s:Rr,mph:Pr,timeslip:sr,traces:xt,meta:{model:"VB6Exact",steps:n.length,warnings:t},vb6Diagnostics:nr,debugData:vt}}const Eo={name:"VB6Exact",simulate:Co};function wo(){const[r,t]=v.useState(new Set),[n,i]=v.useState(new Set(["QUARTER"])),[c,s]=v.useState(!1),[p,u]=v.useState([]),[a,k]=v.useState(null),S=o=>{const b=new Set(r);b.has(o)?b.delete(o):b.add(o),t(b)},C=o=>{const b=new Set(n);b.has(o)?b.delete(o):b.add(o),i(b)},T=()=>{t(new Set(Qe.map(o=>o.name)))},P=()=>{t(new Set)},m=(o,b)=>{const x=fr[o];if(!x)throw new Error(`Benchmark config not found: ${o}`);return po(x),{vehicle:{id:`benchmark_${o}`,name:o,weightLb:x.vehicle.weightLb,tireDiaIn:x.vehicle.tireDiaIn??x.vehicle.tireRolloutIn/Math.PI,rearGear:x.vehicle.rearGear??x.vehicle.finalDrive,rolloutIn:x.vehicle.rolloutIn,powerHP:x.vehicle.torqueCurve?Math.max(...x.vehicle.torqueCurve.map(j=>j.hp??0)):x.vehicle.powerHP,defaultRaceLength:b,torqueCurve:x.vehicle.torqueCurve,frontalArea_ft2:x.vehicle.frontalArea_ft2,cd:x.vehicle.cd,gearRatios:x.vehicle.gearRatios,shiftRPM:x.vehicle.shiftRPM,wheelbaseIn:x.vehicle.wheelbaseIn,overhangIn:x.vehicle.overhangIn,tireRolloutIn:x.vehicle.tireRolloutIn,tireWidthIn:x.vehicle.tireWidthIn,liftCoeff:x.vehicle.liftCoeff,rrCoeff:x.vehicle.rrCoeff,finalDrive:x.vehicle.finalDrive??x.vehicle.rearGear,transEff:x.vehicle.transEff,gearEff:x.vehicle.gearEff,converter:x.vehicle.converter,clutch:x.vehicle.clutch},env:{elevation:x.env.elevation,barometerInHg:x.env.barometerInHg,temperatureF:x.env.temperatureF,humidityPct:x.env.humidityPct},raceLength:b}},y=async()=>{if(r.size===0||n.size===0){k("Please select at least one benchmark and one race length");return}s(!0),k(null),u([]);const o=[];try{for(const b of r){const x=Qe.find(l=>l.name===b);if(x)for(const l of n){const j=x.raceLengthTargets[l];if(j)try{const M=m(b,l),A=Eo.simulate(M),N=ho(x,l,A.et_s,A.mph);o.push({benchmarkName:b,raceLength:l,targetET:j.et_s,targetMPH:j.mph,actualET:A.et_s,actualMPH:A.mph,etDelta:N.etDelta,mphDelta:N.mphDelta,etPass:N.etPass,mphPass:N.mphPass,pass:N.pass,etTolerance:N.etTolerance,mphTolerance:N.mphTolerance})}catch(M){console.error(`Error running ${b} ${l}:`,M),o.push({benchmarkName:b,raceLength:l,targetET:j.et_s,targetMPH:j.mph,actualET:0,actualMPH:0,etDelta:0,mphDelta:0,etPass:!1,mphPass:!1,pass:!1,etTolerance:j.tolET_s,mphTolerance:j.tolMPH})}}}u(o)}catch(b){k(b instanceof Error?b.message:String(b))}finally{s(!1)}},h=o=>{alert(`TODO: Load ${o} fixture into VB6 Inputs and navigate to Run Inspector`)},R=()=>{if(p.length===0){alert("No results to export");return}const o=["Benchmark","Distance","Target ET (s)","Actual ET (s)","ET Delta (s)","ET Tolerance (s)","ET Pass","Target MPH","Actual MPH","MPH Delta","MPH Tolerance","MPH Pass","Overall Pass"],b=p.map(A=>[A.benchmarkName,A.raceLength,A.targetET.toFixed(3),A.actualET.toFixed(3),A.etDelta.toFixed(3),A.etTolerance.toFixed(3),A.etPass?"PASS":"FAIL",A.targetMPH.toFixed(2),A.actualMPH.toFixed(2),A.mphDelta.toFixed(2),A.mphTolerance.toFixed(2),A.mphPass?"PASS":"FAIL",A.pass?"PASS":"FAIL"]),x=[o.join(","),...b.map(A=>A.join(","))].join(`
`),l=new Blob([x],{type:"text/csv"}),j=URL.createObjectURL(l),M=document.createElement("a");M.href=j,M.download=`parity-results-${Date.now()}.csv`,M.click(),URL.revokeObjectURL(j)},g=p.filter(o=>o.pass).length,_=p.length;return e.jsxs("div",{style:{padding:"2rem",height:"100%",overflow:"auto"},children:[e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx("h2",{style:{marginTop:0,marginBottom:"0.5rem"},children:"Parity Runner"}),e.jsx("p",{style:{color:"var(--color-muted)",fontSize:"0.875rem",margin:0},children:"Run benchmark tests and compare VB6Exact against Quarter Pro/Jr targets."})]}),a&&e.jsx("div",{style:{padding:"1rem",backgroundColor:"#fee2e2",border:"1px solid #ef4444",borderRadius:"var(--radius-md)",marginBottom:"1rem",fontSize:"0.875rem",color:"#991b1b"},children:a}),e.jsxs("div",{style:{padding:"1rem",backgroundColor:"var(--color-surface)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)",marginBottom:"1rem"},children:[e.jsx("h3",{style:{marginTop:0,marginBottom:"1rem",fontSize:"1rem",fontWeight:"600"},children:"Select Benchmarks"}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem"},children:[e.jsx("button",{onClick:T,style:{padding:"0.5rem 1rem",fontSize:"0.875rem",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"var(--radius-md)",cursor:"pointer"},children:"Select All"}),e.jsx("button",{onClick:P,style:{padding:"0.5rem 1rem",fontSize:"0.875rem",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"var(--radius-md)",cursor:"pointer"},children:"Select None"})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"0.5rem",marginBottom:"1rem"},children:Qe.map(o=>e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem",cursor:"pointer",fontSize:"0.875rem"},children:[e.jsx("input",{type:"checkbox",checked:r.has(o.name),onChange:()=>S(o.name)}),e.jsx("span",{children:o.name}),e.jsxs("span",{style:{fontSize:"0.75rem",color:"var(--color-muted)"},children:["(",o.source,")"]})]},o.name))}),e.jsx("h3",{style:{marginTop:"1rem",marginBottom:"0.75rem",fontSize:"1rem",fontWeight:"600"},children:"Race Lengths"}),e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:n.has("EIGHTH"),onChange:()=>C("EIGHTH")}),e.jsx("span",{children:"EIGHTH (660 ft)"})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:n.has("QUARTER"),onChange:()=>C("QUARTER")}),e.jsx("span",{children:"QUARTER (1320 ft)"})]})]})]}),e.jsx("div",{style:{marginBottom:"1rem"},children:e.jsx("button",{onClick:y,disabled:c,style:{padding:"0.75rem 1.5rem",fontSize:"0.875rem",fontWeight:"500",backgroundColor:c?"#9ca3af":"#10b981",color:"white",border:"none",borderRadius:"var(--radius-md)",cursor:c?"not-allowed":"pointer"},children:c?"Running...":"Run Selected Benchmarks"})}),p.length>0&&e.jsx("div",{style:{padding:"1rem",backgroundColor:g===_?"#d1fae5":"#fee2e2",border:`1px solid ${g===_?"#10b981":"#ef4444"}`,borderRadius:"var(--radius-md)",marginBottom:"1rem"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{fontSize:"1rem",fontWeight:"600"},children:g===_?"‚úì All Tests Passed":`‚ö† ${_-g} Test(s) Failed`}),e.jsxs("div",{style:{fontSize:"0.875rem"},children:[g," / ",_," passed"]})]})}),p.length>0&&e.jsxs("div",{style:{padding:"1rem",backgroundColor:"var(--color-surface)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[e.jsx("h3",{style:{margin:0,fontSize:"1rem",fontWeight:"600"},children:"Results"}),e.jsx("button",{onClick:R,style:{padding:"0.5rem 1rem",fontSize:"0.875rem",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"var(--radius-md)",cursor:"pointer"},children:"Export CSV"})]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",fontSize:"0.875rem",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#1e293b",color:"#e2e8f0"},children:[e.jsx("th",{style:{padding:"0.75rem",textAlign:"left",borderBottom:"2px solid var(--color-border)"},children:"Benchmark"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"center",borderBottom:"2px solid var(--color-border)"},children:"Distance"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"right",borderBottom:"2px solid var(--color-border)"},children:"Target ET"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"right",borderBottom:"2px solid var(--color-border)"},children:"Actual ET"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"right",borderBottom:"2px solid var(--color-border)"},children:"ET Œî"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"right",borderBottom:"2px solid var(--color-border)"},children:"Target MPH"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"right",borderBottom:"2px solid var(--color-border)"},children:"Actual MPH"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"right",borderBottom:"2px solid var(--color-border)"},children:"MPH Œî"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"center",borderBottom:"2px solid var(--color-border)"},children:"Status"}),e.jsx("th",{style:{padding:"0.75rem",textAlign:"center",borderBottom:"2px solid var(--color-border)"},children:"Actions"})]})}),e.jsx("tbody",{children:p.map((o,b)=>e.jsxs("tr",{style:{backgroundColor:b%2===0?"transparent":"rgba(0,0,0,0.02)"},children:[e.jsx("td",{style:{padding:"0.75rem",borderBottom:"1px solid var(--color-border)"},children:o.benchmarkName}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"center",borderBottom:"1px solid var(--color-border)"},children:o.raceLength}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"right",fontFamily:"monospace",borderBottom:"1px solid var(--color-border)"},children:o.targetET.toFixed(3)}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"right",fontFamily:"monospace",borderBottom:"1px solid var(--color-border)"},children:o.actualET.toFixed(3)}),e.jsxs("td",{style:{padding:"0.75rem",textAlign:"right",fontFamily:"monospace",color:o.etPass?"#10b981":"#ef4444",borderBottom:"1px solid var(--color-border)"},children:[o.etDelta>=0?"+":"",o.etDelta.toFixed(3)]}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"right",fontFamily:"monospace",borderBottom:"1px solid var(--color-border)"},children:o.targetMPH.toFixed(2)}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"right",fontFamily:"monospace",borderBottom:"1px solid var(--color-border)"},children:o.actualMPH.toFixed(2)}),e.jsxs("td",{style:{padding:"0.75rem",textAlign:"right",fontFamily:"monospace",color:o.mphPass?"#10b981":"#ef4444",borderBottom:"1px solid var(--color-border)"},children:[o.mphDelta>=0?"+":"",o.mphDelta.toFixed(2)]}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"center",borderBottom:"1px solid var(--color-border)"},children:e.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"600",backgroundColor:o.pass?"#10b981":"#ef4444",color:"white"},children:o.pass?"PASS":"FAIL"})}),e.jsx("td",{style:{padding:"0.75rem",textAlign:"center",borderBottom:"1px solid var(--color-border)"},children:e.jsx("button",{onClick:()=>h(o.benchmarkName),style:{padding:"0.25rem 0.75rem",fontSize:"0.75rem",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer"},children:"Open in Run Inspector"})})]},`${o.benchmarkName}-${o.raceLength}`))})]})})]})]})}const f={container:{padding:"1rem"},tabs:{display:"flex",gap:"0.25rem",marginBottom:"1rem",borderBottom:"1px solid var(--color-border)"},tab:{padding:"0.75rem 1.5rem",border:"none",background:"transparent",cursor:"pointer",fontSize:"0.875rem",fontWeight:500,color:"var(--color-muted)",borderBottom:"2px solid transparent",marginBottom:"-1px"},tabActive:{color:"var(--color-primary)",borderBottomColor:"var(--color-primary)"},section:{marginBottom:"1.5rem"},sectionHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},sectionTitle:{fontSize:"0.875rem",fontWeight:600,textTransform:"uppercase",color:"var(--color-muted)"},card:{backgroundColor:"var(--color-background)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-md)",overflow:"hidden"},row:{display:"flex",alignItems:"center",gap:"1rem",padding:"0.75rem 1rem",borderBottom:"1px solid var(--color-border)"},badge:{padding:"0.25rem 0.5rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:600},button:{padding:"0.5rem 1rem",borderRadius:"var(--radius-sm)",border:"none",cursor:"pointer",fontSize:"0.875rem",fontWeight:500},primaryBtn:{backgroundColor:"var(--color-primary)",color:"white"},secondaryBtn:{backgroundColor:"var(--color-surface)",color:"var(--color-text)",border:"1px solid var(--color-border)"},dangerBtn:{backgroundColor:"#dc2626",color:"white"},smallBtn:{padding:"0.25rem 0.5rem",fontSize:"0.75rem"},input:{width:"100%",padding:"0.5rem",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)",backgroundColor:"var(--color-background)",color:"var(--color-text)",fontSize:"0.875rem"},formGroup:{marginBottom:"1rem"},label:{display:"block",fontSize:"0.875rem",fontWeight:500,marginBottom:"0.25rem"},modal:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},modalContent:{backgroundColor:"var(--color-surface)",borderRadius:"var(--radius-lg)",padding:"1.5rem",width:"500px",maxWidth:"90vw",maxHeight:"90vh",overflow:"auto"},checkboxGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"0.5rem"},checkbox:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.75rem"}},Mo=[{id:"quarter_jr",name:"Quarter Jr"},{id:"quarter_pro",name:"Quarter Pro"},{id:"bonneville_pro",name:"Bonneville Pro"},{id:"engine_pro",name:"Engine Pro"},{id:"fourlink",name:"Four Link"},{id:"cam_analyzer",name:"Cam Analyzer"}];function Ao({user:r,onClose:t,onSave:n,onDelete:i}){const[c,s]=v.useState((r==null?void 0:r.email)||""),[p,u]=v.useState((r==null?void 0:r.name)||""),[a,k]=v.useState((r==null?void 0:r.role)||"user"),[S,C]=v.useState((r==null?void 0:r.products)||[]),[T,P]=v.useState(""),m=h=>{C(R=>R.includes(h)?R.filter(g=>g!==h):[...R,h])},y=h=>{h.preventDefault(),n({email:c,name:p,role:a,products:S,...T?{password:T}:{}}),t()};return e.jsx("div",{style:f.modal,onClick:t,children:e.jsxs("div",{style:f.modalContent,onClick:h=>h.stopPropagation(),children:[e.jsx("h3",{style:{marginTop:0},children:r?"Edit User":"Create User"}),e.jsxs("form",{onSubmit:y,children:[e.jsxs("div",{style:f.formGroup,children:[e.jsx("label",{style:f.label,children:"Email"}),e.jsx("input",{style:f.input,type:"email",value:c,onChange:h=>s(h.target.value),required:!0,disabled:!!r})]}),e.jsxs("div",{style:f.formGroup,children:[e.jsx("label",{style:f.label,children:"Name"}),e.jsx("input",{style:f.input,type:"text",value:p,onChange:h=>u(h.target.value),required:!0})]}),e.jsxs("div",{style:f.formGroup,children:[e.jsx("label",{style:f.label,children:"Role"}),e.jsxs("select",{style:f.input,value:a,onChange:h=>k(h.target.value),children:[e.jsx("option",{value:"user",children:"User"}),e.jsx("option",{value:"beta",children:"Beta Tester"}),e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"owner",children:"Owner"})]})]}),e.jsxs("div",{style:f.formGroup,children:[e.jsx("label",{style:f.label,children:"Products"}),e.jsx("div",{style:f.checkboxGrid,children:Mo.map(h=>e.jsxs("label",{style:f.checkbox,children:[e.jsx("input",{type:"checkbox",checked:S.includes(h.id),onChange:()=>m(h.id)}),h.name]},h.id))})]}),e.jsxs("div",{style:f.formGroup,children:[e.jsx("label",{style:f.label,children:r?"New Password (leave blank to keep)":"Password"}),e.jsx("input",{style:f.input,type:"password",value:T,onChange:h=>P(h.target.value),...!r&&{required:!0,minLength:6}})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"1rem"},children:[r&&i&&e.jsx("button",{type:"button",style:{...f.button,...f.dangerBtn},onClick:()=>{i(),t()},children:"Delete"}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginLeft:"auto"},children:[e.jsx("button",{type:"button",style:{...f.button,...f.secondaryBtn},onClick:t,children:"Cancel"}),e.jsx("button",{type:"submit",style:{...f.button,...f.primaryBtn},children:r?"Save":"Create"})]})]})]})]})})}function Io({role:r,products:t,onClose:n,onSave:i,onDelete:c}){const[s,p]=v.useState((r==null?void 0:r.name)||""),[u,a]=v.useState((r==null?void 0:r.description)||""),[k,S]=v.useState((r==null?void 0:r.color)||"#6b7280"),[C,T]=v.useState((r==null?void 0:r.products)||[]),[P,m]=v.useState((r==null?void 0:r.additionalFeatures)||[]),[y,h]=v.useState((r==null?void 0:r.canManageUsers)||!1),[R,g]=v.useState((r==null?void 0:r.canManageRoles)||!1),[_,o]=v.useState((r==null?void 0:r.sortOrder)||50),b=j=>{j.preventDefault(),i({name:s,description:u,color:k,products:C,additionalFeatures:P,canManageUsers:y,canManageRoles:R,isSystem:(r==null?void 0:r.isSystem)||!1,sortOrder:_}),n()},x=j=>{T(M=>M.includes(j)?M.filter(A=>A!==j):[...M,j])},l=j=>{m(M=>M.includes(j)?M.filter(A=>A!==j):[...M,j])};return e.jsx("div",{style:f.modal,onClick:n,children:e.jsxs("div",{style:f.modalContent,onClick:j=>j.stopPropagation(),children:[e.jsx("h3",{style:{marginTop:0},children:r?"Edit Role":"Create Role"}),e.jsxs("form",{onSubmit:b,children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 100px",gap:"1rem"},children:[e.jsxs("div",{style:f.formGroup,children:[e.jsx("label",{style:f.label,children:"Name"}),e.jsx("input",{style:f.input,value:s,onChange:j=>p(j.target.value),required:!0})]}),e.jsxs("div",{style:f.formGroup,children:[e.jsx("label",{style:f.label,children:"Color"}),e.jsx("input",{type:"color",style:{...f.input,height:"38px",padding:"2px"},value:k,onChange:j=>S(j.target.value)})]})]}),e.jsxs("div",{style:f.formGroup,children:[e.jsx("label",{style:f.label,children:"Description"}),e.jsx("textarea",{style:{...f.input,minHeight:"50px"},value:u,onChange:j=>a(j.target.value)})]}),e.jsxs("div",{style:f.formGroup,children:[e.jsx("label",{style:f.label,children:"Products Access"}),e.jsx("div",{style:f.checkboxGrid,children:t.map(j=>e.jsxs("label",{style:f.checkbox,children:[e.jsx("input",{type:"checkbox",checked:C.includes(j.id),onChange:()=>x(j.id)}),e.jsx("span",{style:{color:j.color},children:j.icon})," ",j.name]},j.id))})]}),e.jsxs("div",{style:f.formGroup,children:[e.jsx("label",{style:f.label,children:"Additional Features"}),e.jsx("div",{style:f.checkboxGrid,children:rt.filter(j=>["dev_tools","user_management","role_management","system_settings","view_analytics","beta_features"].includes(j)).map(j=>e.jsxs("label",{style:f.checkbox,children:[e.jsx("input",{type:"checkbox",checked:P.includes(j),onChange:()=>l(j)}),j.replace(/_/g," ")]},j))})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem"},children:[e.jsxs("label",{style:f.checkbox,children:[e.jsx("input",{type:"checkbox",checked:y,onChange:j=>h(j.target.checked)}),"Can Manage Users"]}),e.jsxs("label",{style:f.checkbox,children:[e.jsx("input",{type:"checkbox",checked:R,onChange:j=>g(j.target.checked)}),"Can Manage Roles"]}),e.jsxs("div",{style:f.formGroup,children:[e.jsx("label",{style:f.label,children:"Sort Order"}),e.jsx("input",{type:"number",style:f.input,value:_,onChange:j=>o(parseInt(j.target.value)||0)})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"1rem"},children:[r&&!r.isSystem&&c&&e.jsx("button",{type:"button",style:{...f.button,...f.dangerBtn},onClick:()=>{c(),n()},children:"Delete"}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginLeft:"auto"},children:[e.jsx("button",{type:"button",style:{...f.button,...f.secondaryBtn},onClick:n,children:"Cancel"}),e.jsx("button",{type:"submit",style:{...f.button,...f.primaryBtn},children:r?"Save":"Create"})]})]})]})]})})}function Fo({product:r,onClose:t,onSave:n,onDelete:i}){const[c,s]=v.useState((r==null?void 0:r.name)||""),[p,u]=v.useState((r==null?void 0:r.description)||""),[a,k]=v.useState((r==null?void 0:r.icon)||"üì¶"),[S,C]=v.useState((r==null?void 0:r.color)||"#6b7280"),[T,P]=v.useState((r==null?void 0:r.features)||[]),[m,y]=v.useState((r==null?void 0:r.isPremium)||!1),[h,R]=v.useState((r==null?void 0:r.sortOrder)||50),g=o=>{o.preventDefault(),n({name:c,description:p,icon:a,color:S,features:T,isPremium:m,sortOrder:h}),t()},_=o=>{P(b=>b.includes(o)?b.filter(x=>x!==o):[...b,o])};return e.jsx("div",{style:f.modal,onClick:t,children:e.jsxs("div",{style:f.modalContent,onClick:o=>o.stopPropagation(),children:[e.jsx("h3",{style:{marginTop:0},children:r?"Edit Product":"Create Product"}),e.jsxs("form",{onSubmit:g,children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"60px 1fr 100px",gap:"1rem"},children:[e.jsxs("div",{style:f.formGroup,children:[e.jsx("label",{style:f.label,children:"Icon"}),e.jsx("input",{style:{...f.input,textAlign:"center",fontSize:"1.5rem"},value:a,onChange:o=>k(o.target.value)})]}),e.jsxs("div",{style:f.formGroup,children:[e.jsx("label",{style:f.label,children:"Name"}),e.jsx("input",{style:f.input,value:c,onChange:o=>s(o.target.value),required:!0})]}),e.jsxs("div",{style:f.formGroup,children:[e.jsx("label",{style:f.label,children:"Color"}),e.jsx("input",{type:"color",style:{...f.input,height:"38px",padding:"2px"},value:S,onChange:o=>C(o.target.value)})]})]}),e.jsxs("div",{style:f.formGroup,children:[e.jsx("label",{style:f.label,children:"Description"}),e.jsx("textarea",{style:{...f.input,minHeight:"50px"},value:p,onChange:o=>u(o.target.value)})]}),e.jsxs("div",{style:f.formGroup,children:[e.jsx("label",{style:f.label,children:"Features"}),e.jsx("div",{style:f.checkboxGrid,children:rt.filter(o=>!["dev_tools","user_management","role_management","system_settings","view_analytics","beta_features"].includes(o)).map(o=>e.jsxs("label",{style:f.checkbox,children:[e.jsx("input",{type:"checkbox",checked:T.includes(o),onChange:()=>_(o)}),o.replace(/_/g," ")]},o))})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[e.jsxs("label",{style:f.checkbox,children:[e.jsx("input",{type:"checkbox",checked:m,onChange:o=>y(o.target.checked)}),"Premium Product"]}),e.jsxs("div",{style:f.formGroup,children:[e.jsx("label",{style:f.label,children:"Sort Order"}),e.jsx("input",{type:"number",style:f.input,value:h,onChange:o=>R(parseInt(o.target.value)||0)})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"1rem"},children:[r&&i&&e.jsx("button",{type:"button",style:{...f.button,...f.dangerBtn},onClick:()=>{i(),t()},children:"Delete"}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginLeft:"auto"},children:[e.jsx("button",{type:"button",style:{...f.button,...f.secondaryBtn},onClick:t,children:"Cancel"}),e.jsx("button",{type:"submit",style:{...f.button,...f.primaryBtn},children:r?"Save":"Create"})]})]})]})]})})}function Bo(){var g,_,o,b,x;const r=et(),[t,n]=v.useState("users"),[i,c]=v.useState(null),[s,p]=v.useState(null),[u,a]=v.useState(null),[k,S]=v.useState([]),[C,T]=v.useState(!0),[P,m]=v.useState(null),y=r.getAllRoles(),h=r.getAllProducts(),R=async()=>{T(!0),m(null);try{const l=await qe.getAll();S(l.users)}catch(l){m(l.message||"Failed to load users")}finally{T(!1)}};return v.useEffect(()=>{R()},[]),e.jsxs("div",{style:f.container,children:[e.jsxs("div",{style:{marginBottom:"1rem",padding:"0.75rem",backgroundColor:"#fef3c7",borderRadius:"var(--radius-sm)",fontSize:"0.75rem"},children:[e.jsx("strong",{children:"Current User:"})," ",(g=r.user)==null?void 0:g.email," (Role: ",(_=r.user)==null?void 0:_.roleId,")",e.jsx("br",{}),e.jsx("strong",{children:"User Role Object:"})," ",((o=r.getUserRole())==null?void 0:o.name)||"NOT FOUND",e.jsx("br",{}),e.jsx("strong",{children:"Products:"})," ",((x=(b=r.getUserRole())==null?void 0:b.products)==null?void 0:x.join(", "))||"NONE",e.jsx("br",{}),e.jsx("button",{onClick:()=>{r.resetAuthData(),window.location.reload()},style:{...f.button,...f.dangerBtn,marginTop:"0.5rem"},children:"üîÑ Reset All Auth Data"})]}),e.jsx("div",{style:f.tabs,children:["users","roles","products"].map(l=>e.jsx("button",{style:{...f.tab,...t===l?f.tabActive:{}},onClick:()=>n(l),children:l==="users"?`üë• Users (${k.length})`:l==="roles"?`üé≠ Roles (${y.length})`:`üì¶ Products (${h.length})`},l))}),t==="users"&&e.jsxs("div",{style:f.section,children:[e.jsxs("div",{style:f.sectionHeader,children:[e.jsx("span",{style:f.sectionTitle,children:"Database Users (API)"}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx("button",{style:{...f.button,...f.secondaryBtn},onClick:R,children:"üîÑ Refresh"}),e.jsx("button",{style:{...f.button,...f.primaryBtn},onClick:()=>c("new"),children:"+ Add User"})]})]}),P&&e.jsx("div",{style:{padding:"0.75rem",backgroundColor:"#fee2e2",color:"#991b1b",borderRadius:"var(--radius-sm)",marginBottom:"0.5rem"},children:P}),C?e.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"var(--color-muted)"},children:"Loading users..."}):e.jsxs("div",{style:f.card,children:[k.map(l=>{var M;const j={owner:"#7c3aed",admin:"#dc2626",beta:"#2563eb",user:"#6b7280"};return e.jsxs("div",{style:f.row,children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:500},children:l.name}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--color-muted)"},children:l.email})]}),e.jsx("span",{style:{...f.badge,backgroundColor:j[l.role]||"#6b7280",color:"white"},children:l.role}),e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--color-muted)"},children:((M=l.products)==null?void 0:M.join(", "))||"no products"}),e.jsx("button",{style:{...f.button,...f.secondaryBtn,...f.smallBtn},onClick:()=>c(l),children:"Edit"})]},l.id)}),k.length===0&&e.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"var(--color-muted)"},children:"No users found"})]})]}),t==="roles"&&e.jsxs("div",{style:f.section,children:[e.jsxs("div",{style:f.sectionHeader,children:[e.jsx("span",{style:f.sectionTitle,children:"All Roles"}),e.jsx("button",{style:{...f.button,...f.primaryBtn},onClick:()=>p("new"),children:"+ Add Role"})]}),e.jsx("div",{style:f.card,children:y.map(l=>e.jsxs("div",{style:f.row,children:[e.jsx("span",{style:{...f.badge,backgroundColor:l.color,color:"white"},children:l.name}),e.jsx("div",{style:{flex:1,fontSize:"0.75rem",color:"var(--color-muted)"},children:l.description}),e.jsxs("div",{style:{fontSize:"0.75rem"},children:[l.products.length," products, ",l.additionalFeatures.length," features"]}),l.isSystem&&e.jsx("span",{style:{...f.badge,backgroundColor:"#f3f4f6",color:"#4b5563"},children:"System"}),e.jsx("button",{style:{...f.button,...f.secondaryBtn,...f.smallBtn},onClick:()=>p(l),children:"Edit"})]},l.id))})]}),t==="products"&&e.jsxs("div",{style:f.section,children:[e.jsxs("div",{style:f.sectionHeader,children:[e.jsx("span",{style:f.sectionTitle,children:"All Products"}),e.jsx("button",{style:{...f.button,...f.primaryBtn},onClick:()=>a("new"),children:"+ Add Product"})]}),e.jsx("div",{style:f.card,children:h.map(l=>e.jsxs("div",{style:f.row,children:[e.jsx("span",{style:{fontSize:"1.5rem"},children:l.icon}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:500,color:l.color},children:l.name}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--color-muted)"},children:l.description})]}),e.jsxs("div",{style:{fontSize:"0.75rem"},children:[l.features.length," features"]}),l.isPremium&&e.jsx("span",{style:{...f.badge,backgroundColor:"#fef3c7",color:"#92400e"},children:"Premium"}),e.jsx("button",{style:{...f.button,...f.secondaryBtn,...f.smallBtn},onClick:()=>a(l),children:"Edit"})]},l.id))})]}),i&&e.jsx(Ao,{user:i==="new"?null:i,onClose:()=>c(null),onSave:async l=>{try{i==="new"?await qe.create({email:l.email,password:l.password,name:l.name,role:l.role,products:l.products}):await qe.update(i.id,{name:l.name,role:l.role,products:l.products}),R()}catch(j){alert(j.message||"Failed to save user")}},onDelete:i!=="new"?async()=>{await qe.delete(i.id),R()}:void 0}),s&&e.jsx(Io,{role:s==="new"?null:s,products:h,onClose:()=>p(null),onSave:l=>{s==="new"?r.createRole(l):r.updateRole(s.id,l)},onDelete:s!=="new"?()=>r.deleteRole(s.id):void 0}),u&&e.jsx(Fo,{product:u==="new"?null:u,onClose:()=>a(null),onSave:l=>{u==="new"?r.createProduct(l):r.updateProduct(u.id,l)},onDelete:u!=="new"?()=>r.deleteProduct(u.id):void 0})]})}function Ho(){const{user:r}=et(),[t,n]=v.useState([]),[i,c]=v.useState(null),[s,p]=v.useState(!1),[u,a]=v.useState(""),[k,S]=v.useState(!1),[C,T]=v.useState(null),P=(r==null?void 0:r.roleId)==="admin"||(r==null?void 0:r.roleId)==="owner",m=(r==null?void 0:r.roleId)==="owner";v.useEffect(()=>{hr().then(n)},[]);const y=[...He,...t.filter(l=>!He.some(j=>j.id===l.id))],h=u?y.filter(l=>l.name.toLowerCase().includes(u.toLowerCase())||l.city.toLowerCase().includes(u.toLowerCase())||l.state.toLowerCase().includes(u.toLowerCase())):y,R=()=>{if(!P){T({type:"error",text:"Only admins can add tracks"});return}c({id:`custom_${Date.now()}`,name:"",city:"",state:"",country:"USA",lat:0,lon:0,elevation_ft:0,length:"1/4"}),p(!0)},g=l=>{if(!P){T({type:"error",text:"Only admins can edit tracks"});return}if(He.some(j=>j.id===l.id)){T({type:"error",text:"Built-in tracks cannot be edited. Create a copy instead."});return}c({...l}),p(!1)},_=l=>{if(!P){T({type:"error",text:"Only admins can add tracks"});return}c({...l,id:`custom_${Date.now()}`,name:`${l.name} (Copy)`}),p(!0)},o=async()=>{if(i){if(!i.name.trim()){T({type:"error",text:"Track name is required"});return}S(!0),T(null);try{if(s){const j=await $t(i);if(!j.success){T({type:"error",text:j.error||"Failed to save track"});return}}else{const j=await Qt(i.id,i);if(!j.success){T({type:"error",text:j.error||"Failed to update track"});return}}const l=await hr();n(l),c(null),p(!1),T({type:"success",text:s?"Track added successfully":"Track updated successfully"})}finally{S(!1)}}},b=async l=>{if(!m){T({type:"error",text:"Only owners can delete tracks"});return}if(He.some(M=>M.id===l)){T({type:"error",text:"Built-in tracks cannot be deleted."});return}if(!confirm("Delete this track?"))return;S(!0);const j=await Jt(l);if(j.success){const M=await hr();n(M),T({type:"success",text:"Track deleted"})}else T({type:"error",text:j.error||"Failed to delete track"});S(!1)},x=l=>He.some(j=>j.id===l);return e.jsxs("div",{children:[C&&e.jsx("div",{style:{padding:"10px 16px",marginBottom:"1rem",borderRadius:"6px",backgroundColor:C.type==="error"?"rgba(239, 68, 68, 0.1)":"rgba(34, 197, 94, 0.1)",color:C.type==="error"?"#ef4444":"#22c55e",border:`1px solid ${C.type==="error"?"#ef4444":"#22c55e"}`},children:C.text}),e.jsxs("div",{style:{marginBottom:"1rem",display:"flex",gap:"1rem",alignItems:"center",flexWrap:"wrap"},children:[e.jsx("button",{onClick:R,className:"btn",style:{backgroundColor:P?"var(--color-primary)":"var(--color-muted)"},disabled:!P||k,children:"+ Add Track"}),e.jsx("input",{type:"text",placeholder:"Search tracks...",value:u,onChange:l=>a(l.target.value),className:"input",style:{width:"200px"}}),e.jsxs("span",{style:{color:"var(--color-muted)",fontSize:"0.85rem"},children:[h.length," tracks (",t.length," custom)"]}),!P&&e.jsx("span",{style:{color:"var(--color-muted)",fontSize:"0.8rem",fontStyle:"italic"},children:"(Admin access required to edit)"})]}),i&&e.jsxs("div",{className:"card",style:{marginBottom:"1rem",padding:"1rem"},children:[e.jsx("h4",{style:{marginBottom:"1rem"},children:s?"New Track":"Edit Track"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Track Name *"}),e.jsx("input",{type:"text",className:"input",value:i.name,onChange:l=>c({...i,name:l.target.value}),placeholder:"e.g., My Local Dragstrip"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"City"}),e.jsx("input",{type:"text",className:"input",value:i.city,onChange:l=>c({...i,city:l.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"State"}),e.jsx("input",{type:"text",className:"input",value:i.state,onChange:l=>c({...i,state:l.target.value}),maxLength:2,style:{width:"60px"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Latitude"}),e.jsx("input",{type:"number",className:"input",step:"0.0001",value:i.lat,onChange:l=>c({...i,lat:parseFloat(l.target.value)||0}),placeholder:"e.g., 34.0589"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Longitude"}),e.jsx("input",{type:"number",className:"input",step:"0.0001",value:i.lon,onChange:l=>c({...i,lon:parseFloat(l.target.value)||0}),placeholder:"e.g., -117.7517"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Elevation (ft)"}),e.jsx("input",{type:"number",className:"input",value:i.elevation_ft,onChange:l=>c({...i,elevation_ft:parseInt(l.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Track Angle (¬∞)"}),e.jsx("input",{type:"number",className:"input",step:"1",min:"0",max:"359",value:i.trackAngle??0,onChange:l=>c({...i,trackAngle:parseInt(l.target.value)||0}),placeholder:"0 = North"}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--color-muted)",marginTop:"4px"},children:"Direction track points (0=N, 90=E, 180=S, 270=W)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Track Length"}),e.jsxs("select",{className:"input",value:i.length,onChange:l=>c({...i,length:l.target.value}),children:[e.jsx("option",{value:"1/4",children:"1/4 Mile"}),e.jsx("option",{value:"1/8",children:"1/8 Mile"}),e.jsx("option",{value:"both",children:"Both"})]})]})]}),e.jsxs("div",{style:{marginTop:"1rem",display:"flex",gap:"0.5rem"},children:[e.jsx("button",{onClick:o,className:"btn",style:{backgroundColor:"var(--color-primary)"},children:"Save Track"}),e.jsx("button",{onClick:()=>{c(null),p(!1)},className:"btn",children:"Cancel"})]})]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.85rem"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"2px solid var(--color-border)"},children:[e.jsx("th",{style:{textAlign:"left",padding:"8px"},children:"Track Name"}),e.jsx("th",{style:{textAlign:"left",padding:"8px"},children:"Location"}),e.jsx("th",{style:{textAlign:"right",padding:"8px"},children:"Lat"}),e.jsx("th",{style:{textAlign:"right",padding:"8px"},children:"Lon"}),e.jsx("th",{style:{textAlign:"right",padding:"8px"},children:"Elev (ft)"}),e.jsx("th",{style:{textAlign:"right",padding:"8px"},children:"Angle"}),e.jsx("th",{style:{textAlign:"center",padding:"8px"},children:"Length"}),e.jsx("th",{style:{textAlign:"center",padding:"8px"},children:"Actions"})]})}),e.jsx("tbody",{children:h.map(l=>e.jsxs("tr",{style:{borderBottom:"1px solid var(--color-border)",backgroundColor:x(l.id)?"transparent":"rgba(34, 197, 94, 0.05)"},children:[e.jsxs("td",{style:{padding:"8px"},children:[l.name,x(l.id)&&e.jsx("span",{style:{marginLeft:"6px",fontSize:"0.7rem",color:"var(--color-muted)"},children:"(built-in)"})]}),e.jsxs("td",{style:{padding:"8px"},children:[l.city,", ",l.state]}),e.jsx("td",{style:{padding:"8px",textAlign:"right",fontFamily:"monospace"},children:l.lat.toFixed(4)}),e.jsx("td",{style:{padding:"8px",textAlign:"right",fontFamily:"monospace"},children:l.lon.toFixed(4)}),e.jsx("td",{style:{padding:"8px",textAlign:"right"},children:l.elevation_ft.toLocaleString()}),e.jsxs("td",{style:{padding:"8px",textAlign:"right"},children:[l.trackAngle??"-","¬∞"]}),e.jsx("td",{style:{padding:"8px",textAlign:"center"},children:l.length}),e.jsx("td",{style:{padding:"8px",textAlign:"center"},children:e.jsxs("div",{style:{display:"flex",gap:"4px",justifyContent:"center"},children:[e.jsx("button",{onClick:()=>_(l),style:{padding:"4px 8px",fontSize:"0.75rem",border:"1px solid var(--color-border)",borderRadius:"4px",backgroundColor:"var(--color-bg-secondary)",cursor:"pointer"},title:"Copy track",children:"üìã"}),!x(l.id)&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>g(l),style:{padding:"4px 8px",fontSize:"0.75rem",border:"1px solid var(--color-border)",borderRadius:"4px",backgroundColor:"var(--color-bg-secondary)",cursor:"pointer"},title:"Edit track",children:"‚úèÔ∏è"}),e.jsx("button",{onClick:()=>b(l.id),style:{padding:"4px 8px",fontSize:"0.75rem",border:"1px solid #ef4444",borderRadius:"4px",backgroundColor:"transparent",color:"#ef4444",cursor:"pointer"},title:"Delete track",children:"üóëÔ∏è"})]})]})})]},l.id))})]})}),e.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",backgroundColor:"var(--color-bg-secondary)",borderRadius:"8px",fontSize:"0.85rem"},children:[e.jsx("h4",{style:{marginBottom:"0.5rem"},children:"Track Angle"}),e.jsxs("p",{style:{color:"var(--color-muted)",margin:0},children:["The track angle is the compass direction the track points (direction cars travel down the strip). This is used to calculate the effective headwind/tailwind from the weather wind direction.",e.jsx("br",{}),e.jsx("br",{}),e.jsx("strong",{children:"0¬∞"})," = North, ",e.jsx("strong",{children:"90¬∞"})," = East, ",e.jsx("strong",{children:"180¬∞"})," = South, ",e.jsx("strong",{children:"270¬∞"})," = West",e.jsx("br",{}),e.jsx("br",{}),e.jsx("strong",{children:"Tip:"})," Use Google Maps to find coordinates. Right-click on the track location and copy the coordinates."]})]})]})}const ye=[{id:"settings",title:"‚öôÔ∏è Settings & Flags",component:ro,category:"core"},{id:"health-check",title:"ü©∫ Health Check",component:to,category:"core"},{id:"run-inspector",title:"‚ñ∂Ô∏è Run Inspector",component:co,category:"simulation"},{id:"energy",title:"‚ö° Energy Accounting",component:mo,category:"simulation"},{id:"input-inspector",title:"üîç Input Inspector",component:go,category:"data"},{id:"quick-paste",title:"üìã Quick Paste",component:fo,category:"data"},{id:"air",title:"üå°Ô∏è Air Model",component:vo,category:"data"},{id:"parity",title:"üß™ Parity Runner",component:wo,category:"testing"},{id:"users",title:"üë• User Management",component:Bo,category:"core"},{id:"tracks",title:"üèÅ Track Editor",component:Ho,category:"data"}];function Go(){const[r,t]=Xr(),n=r.get("panel"),[i,c]=v.useState(()=>n&&ye.some(u=>u.id===n)?n:ye.length>0?ye[0].id:"");v.useEffect(()=>{i&&t({panel:i},{replace:!0})},[i,t]),v.useEffect(()=>{n&&ye.some(u=>u.id===n)&&c(n)},[n]);const s=ye.find(u=>u.id===i),p=s==null?void 0:s.component;return e.jsx(Xt,{title:"Dev Portal",children:e.jsxs("div",{style:{display:"flex",gap:"1rem",minHeight:"70vh"},children:[e.jsxs("nav",{style:{width:"200px",flexShrink:0,borderRight:"1px solid var(--color-border)",paddingRight:"1rem"},children:[e.jsx("h3",{style:{fontSize:"0.875rem",fontWeight:"600",textTransform:"uppercase",color:"var(--color-muted)",marginBottom:"1rem"},children:"Dev Panels"}),e.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:ye.map(u=>e.jsx("li",{style:{marginBottom:"0.25rem"},children:e.jsx("button",{onClick:()=>c(u.id),style:{width:"100%",textAlign:"left",padding:"0.5rem 0.75rem",border:"none",background:i===u.id?"var(--color-primary)":"transparent",color:i===u.id?"white":"var(--color-text)",borderRadius:"var(--radius-sm)",cursor:"pointer",fontSize:"0.875rem",transition:"background-color 0.2s"},onMouseEnter:a=>{i!==u.id&&(a.currentTarget.style.backgroundColor="var(--color-surface)")},onMouseLeave:a=>{i!==u.id&&(a.currentTarget.style.backgroundColor="transparent")},children:u.title})},u.id))}),ye.length===0&&e.jsx("p",{style:{fontSize:"0.875rem",color:"var(--color-muted)",fontStyle:"italic"},children:"No panels registered"})]}),e.jsx("div",{style:{flex:1,minWidth:0,backgroundColor:"var(--color-surface)",borderRadius:"var(--radius-md)",overflow:"auto"},children:p?e.jsx(p,{}):e.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:e.jsx("p",{style:{color:"var(--color-muted)"},children:"No panel selected"})})})]})})}export{Go as default};
//# sourceMappingURL=DevPortal-CQi1Lo31.js.map
