{"version":3,"file":"DetailedParameters-KgIL5Ps5.js","sources":["../../src/shared/components/DetailedParameters.tsx"],"sourcesContent":["/**\r\n * Detailed Parameters Component\r\n * \r\n * Shows detailed simulation output similar to VB6 Quarter Pro's\r\n * \"Detailed Parameters\" screen - a tabular view of all calculated\r\n * vehicle performance data during the run.\r\n */\r\n\r\nimport { useState } from 'react';\r\n\r\ninterface TracePoint {\r\n  t_s: number;\r\n  v_mph: number;\r\n  a_g: number;\r\n  s_ft: number;\r\n  rpm: number;\r\n  gear: number;\r\n  hp?: number;\r\n}\r\n\r\ninterface DetailedParametersProps {\r\n  traces: TracePoint[];\r\n  raceLengthFt: number;\r\n  collapsed?: boolean;\r\n}\r\n\r\n// Key distance triggers (like VB6)\r\nconst DISTANCE_TRIGGERS = [0, 30, 60, 330, 660, 1000, 1320, 2640, 5280, 10560, 26400];\r\n\r\n// Key speed triggers\r\nconst SPEED_TRIGGERS = [60, 100, 150, 200, 250, 300];\r\n\r\nexport default function DetailedParameters({ traces, raceLengthFt, collapsed = true }: DetailedParametersProps) {\r\n  const [isExpanded, setIsExpanded] = useState(!collapsed);\r\n  \r\n  if (!traces || traces.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  // Find key events in the trace data\r\n  const keyEvents: (TracePoint & { event: string })[] = [];\r\n  \r\n  // Add initial conditions\r\n  if (traces[0]) {\r\n    keyEvents.push({ ...traces[0], event: 'Start' });\r\n  }\r\n  \r\n  // Find distance triggers\r\n  for (const dist of DISTANCE_TRIGGERS) {\r\n    if (dist > raceLengthFt) break;\r\n    const point = traces.find(t => t.s_ft >= dist);\r\n    if (point && !keyEvents.some(e => e.s_ft === point.s_ft && e.event.includes(\"'\"))) {\r\n      const label = dist === 660 ? '1/8 mi' : \r\n                    dist === 1320 ? '1/4 mi' :\r\n                    dist === 2640 ? '1/2 mi' :\r\n                    dist === 5280 ? '1 mi' :\r\n                    dist === 10560 ? '2 mi' :\r\n                    dist === 26400 ? '5 mi' :\r\n                    `${dist}'`;\r\n      keyEvents.push({ ...point, event: label });\r\n    }\r\n  }\r\n  \r\n  // Find speed triggers (0-60, 0-100, etc.)\r\n  for (const speed of SPEED_TRIGGERS) {\r\n    const point = traces.find(t => t.v_mph >= speed);\r\n    if (point && !keyEvents.some(e => Math.abs(e.t_s - point.t_s) < 0.01)) {\r\n      keyEvents.push({ ...point, event: `0-${speed} mph` });\r\n    }\r\n  }\r\n  \r\n  // Find gear changes\r\n  let lastGear = traces[0]?.gear ?? 1;\r\n  for (let i = 1; i < traces.length; i++) {\r\n    if (traces[i].gear !== lastGear) {\r\n      // Add point before shift\r\n      if (traces[i-1]) {\r\n        keyEvents.push({ ...traces[i-1], event: `Shift ${lastGear}→${traces[i].gear}` });\r\n      }\r\n      lastGear = traces[i].gear;\r\n    }\r\n  }\r\n  \r\n  // Add finish\r\n  const finish = traces[traces.length - 1];\r\n  if (finish) {\r\n    keyEvents.push({ ...finish, event: 'Finish' });\r\n  }\r\n  \r\n  // Sort by time and remove duplicates\r\n  keyEvents.sort((a, b) => a.t_s - b.t_s);\r\n  const uniqueEvents = keyEvents.filter((e, i, arr) => \r\n    i === 0 || Math.abs(e.t_s - arr[i-1].t_s) > 0.001\r\n  );\r\n\r\n  return (\r\n    <div className=\"card\" style={{ padding: '12px 16px' }}>\r\n      <div \r\n        style={{ \r\n          display: 'flex', \r\n          justifyContent: 'space-between', \r\n          alignItems: 'center',\r\n          cursor: 'pointer',\r\n          marginBottom: isExpanded ? '12px' : 0,\r\n        }}\r\n        onClick={() => setIsExpanded(!isExpanded)}\r\n      >\r\n        <span style={{ fontWeight: '600', color: 'var(--color-text)', fontSize: '0.8rem' }}>\r\n          Detailed Parameters\r\n        </span>\r\n        <button\r\n          style={{\r\n            background: 'none',\r\n            border: 'none',\r\n            color: 'var(--color-text-muted)',\r\n            cursor: 'pointer',\r\n            fontSize: '0.8rem',\r\n            padding: '4px 8px',\r\n          }}\r\n        >\r\n          {isExpanded ? '▼ Collapse' : '▶ Expand'}\r\n        </button>\r\n      </div>\r\n      \r\n      {isExpanded && (\r\n        <div style={{ overflowX: 'auto' }}>\r\n          <table style={{ \r\n            width: '100%', \r\n            borderCollapse: 'collapse', \r\n            fontSize: '0.75rem',\r\n            fontFamily: 'monospace',\r\n          }}>\r\n            <thead>\r\n              <tr style={{ borderBottom: '2px solid var(--color-border)' }}>\r\n                <th style={{ textAlign: 'left', padding: '6px 8px', whiteSpace: 'nowrap' }}>Event</th>\r\n                <th style={{ textAlign: 'right', padding: '6px 8px' }}>Time (s)</th>\r\n                <th style={{ textAlign: 'right', padding: '6px 8px' }}>Dist (ft)</th>\r\n                <th style={{ textAlign: 'right', padding: '6px 8px' }}>MPH</th>\r\n                <th style={{ textAlign: 'right', padding: '6px 8px' }}>Accel (g)</th>\r\n                <th style={{ textAlign: 'center', padding: '6px 8px' }}>Gear</th>\r\n                <th style={{ textAlign: 'right', padding: '6px 8px' }}>RPM</th>\r\n                {uniqueEvents.some(e => e.hp !== undefined) && (\r\n                  <th style={{ textAlign: 'right', padding: '6px 8px' }}>HP</th>\r\n                )}\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {uniqueEvents.map((event, i) => (\r\n                <tr \r\n                  key={i} \r\n                  style={{ \r\n                    borderBottom: '1px solid var(--color-border)',\r\n                    backgroundColor: event.event === 'Finish' ? 'rgba(34, 197, 94, 0.1)' :\r\n                                     event.event.includes('Shift') ? 'rgba(59, 130, 246, 0.05)' :\r\n                                     'transparent',\r\n                  }}\r\n                >\r\n                  <td style={{ padding: '6px 8px', whiteSpace: 'nowrap', fontWeight: event.event === 'Finish' ? '600' : 'normal' }}>\r\n                    {event.event}\r\n                  </td>\r\n                  <td style={{ textAlign: 'right', padding: '6px 8px' }}>{event.t_s.toFixed(3)}</td>\r\n                  <td style={{ textAlign: 'right', padding: '6px 8px' }}>{event.s_ft.toFixed(1)}</td>\r\n                  <td style={{ textAlign: 'right', padding: '6px 8px' }}>{event.v_mph.toFixed(2)}</td>\r\n                  <td style={{ textAlign: 'right', padding: '6px 8px' }}>{event.a_g.toFixed(3)}</td>\r\n                  <td style={{ textAlign: 'center', padding: '6px 8px' }}>{event.gear}</td>\r\n                  <td style={{ textAlign: 'right', padding: '6px 8px' }}>{Math.round(event.rpm).toLocaleString()}</td>\r\n                  {uniqueEvents.some(e => e.hp !== undefined) && (\r\n                    <td style={{ textAlign: 'right', padding: '6px 8px' }}>\r\n                      {event.hp !== undefined ? Math.round(event.hp) : '-'}\r\n                    </td>\r\n                  )}\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n          \r\n          {/* Summary stats */}\r\n          <div style={{ \r\n            marginTop: '12px', \r\n            paddingTop: '12px', \r\n            borderTop: '1px solid var(--color-border)',\r\n            display: 'flex',\r\n            gap: '24px',\r\n            flexWrap: 'wrap',\r\n            fontSize: '0.75rem',\r\n          }}>\r\n            <div>\r\n              <span style={{ color: 'var(--color-text-muted)' }}>Peak Accel: </span>\r\n              <span style={{ fontWeight: '600' }}>\r\n                {Math.max(...traces.map(t => t.a_g)).toFixed(3)} g\r\n              </span>\r\n            </div>\r\n            <div>\r\n              <span style={{ color: 'var(--color-text-muted)' }}>Peak RPM: </span>\r\n              <span style={{ fontWeight: '600' }}>\r\n                {Math.max(...traces.map(t => t.rpm)).toLocaleString()}\r\n              </span>\r\n            </div>\r\n            <div>\r\n              <span style={{ color: 'var(--color-text-muted)' }}>Avg Accel: </span>\r\n              <span style={{ fontWeight: '600' }}>\r\n                {(traces.reduce((sum, t) => sum + t.a_g, 0) / traces.length).toFixed(3)} g\r\n              </span>\r\n            </div>\r\n            <div>\r\n              <span style={{ color: 'var(--color-text-muted)' }}>Data Points: </span>\r\n              <span style={{ fontWeight: '600' }}>\r\n                {traces.length.toLocaleString()}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":["DISTANCE_TRIGGERS","SPEED_TRIGGERS","DetailedParameters","traces","raceLengthFt","collapsed","isExpanded","setIsExpanded","useState","keyEvents","dist","point","t","e","label","speed","lastGear","_a","i","finish","a","b","uniqueEvents","arr","jsxs","jsx","event","sum"],"mappings":"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"}