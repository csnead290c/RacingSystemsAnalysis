import{t as y,B as v,X as h,Y as p,w as R,r as $,x as a,y as S,z as A,T,s as k}from"./index-CUSPxmXn.js";var z=y({chartName:"BarChart",GraphicalChild:v,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:h},{axisType:"yAxis",AxisComp:p}],formatAxisMap:R});function P({data:s,targetBins:d=15,compact:l=!1}){const m=$.useMemo(()=>{if(!s||s.length<2)return[];const o=s.map(t=>t.rpm).filter(t=>t>0);if(o.length===0)return[];const i=Math.min(...o),r=Math.max(...o),x=r-i;let e;const n=x/d;n<=100?e=100:n<=250?e=250:n<=500?e=500:e=Math.ceil(n/500)*500;const C=Math.floor(i/e)*e,j=Math.ceil(r/e)*e,c=[];for(let t=C;t<j;t+=e)c.push({rpmRange:`${t}`,rpmMin:t,rpmMax:t+e,timeSpent:0});for(let t=1;t<s.length;t++){const f=s[t].t_s-s[t-1].t_s;if(f<=0)continue;const u=s[t].rpm,g=c.find(M=>u>=M.rpmMin&&u<M.rpmMax);g&&(g.timeSpent+=f)}return c.filter(t=>t.timeSpent>.001)},[s,d]);if(!m||m.length===0)return a.jsx("div",{className:"text-center text-muted",style:{padding:"var(--space-6)"},children:"No RPM data available"});const b=(o,i)=>{const r=o/(i-1||1);if(r<.5){const x=Math.round(34+200*(r*2)),e=Math.round(197+-18*(r*2)),n=Math.round(94+-86*(r*2));return`rgb(${x}, ${e}, ${n})`}else{const x=Math.round(234+5*((r-.5)*2)),e=Math.round(179-179*((r-.5)*2)),n=Math.round(8+60*((r-.5)*2));return`rgb(${x}, ${e}, ${n})`}};return a.jsx(S,{width:"100%",height:"100%",children:a.jsxs(z,{data:m,margin:l?{top:4,right:8,left:0,bottom:4}:{top:5,right:20,left:0,bottom:25},children:[a.jsx(A,{strokeDasharray:"3 3",stroke:"var(--color-border)",opacity:.3}),!l&&a.jsx(h,{dataKey:"rpmRange",stroke:"var(--color-text-muted)",tick:{fontSize:9,fill:"var(--color-text-muted)"},interval:0,angle:-45,textAnchor:"end",height:50,label:{value:"Engine RPM",position:"insideBottom",offset:-5,fontSize:10,fill:"var(--color-text-muted)"}}),l&&a.jsx(h,{dataKey:"rpmRange",hide:!0}),!l&&a.jsx(p,{stroke:"var(--color-text-muted)",tick:{fontSize:9,fill:"var(--color-text-muted)"},tickFormatter:o=>`${o.toFixed(1)}s`,width:40}),l&&a.jsx(p,{hide:!0}),a.jsx(T,{contentStyle:{backgroundColor:"var(--color-bg)",border:"1px solid var(--color-border)",borderRadius:"var(--radius-sm)",color:"var(--color-text)",fontSize:"0.75rem"},formatter:o=>[`${o.toFixed(2)}s`,"Time"],labelFormatter:(o,i)=>{if(i&&i[0]){const r=i[0].payload;return`${r.rpmMin} - ${r.rpmMax} RPM`}return""}}),a.jsx(v,{dataKey:"timeSpent",radius:[3,3,0,0],children:m.map((o,i)=>a.jsx(k,{fill:b(i,m.length)},`cell-${i}`))})]})})}export{P as default};
//# sourceMappingURL=RPMHistogram-BbwXx3L-.js.map
