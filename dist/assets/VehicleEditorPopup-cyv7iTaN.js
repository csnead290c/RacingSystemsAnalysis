import{r as i,j as e,ao as v,ap as y}from"./index-CrS2kuaK.js";function j({isOpen:a,onClose:t,vehicle:r,onApply:d,isPro:f=!1}){const[l,c]=i.useState({}),[s,x]=i.useState(!1),[n,p]=i.useState(!1);i.useEffect(()=>{a&&r&&(c({...r}),p(!1))},[a,r]);const u=o=>{c(o),p(!0)},h=()=>{l&&r&&(d({...r,...l}),t())},g=async()=>{if(!(!l||!r)){x(!0);try{const o={...r,...l};await y(o),d(o),t()}catch(o){console.error("Failed to save vehicle:",o),alert("Failed to save vehicle. Please try again.")}finally{x(!1)}}};return i.useEffect(()=>{if(!a)return;const o=b=>{b.key==="Escape"&&t()};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[a,t]),!a||!r?null:e.jsxs(e.Fragment,{children:[e.jsx("div",{onClick:t,style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",zIndex:1e3}}),e.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"var(--color-bg)",borderRadius:"12px",boxShadow:"0 20px 60px rgba(0,0,0,0.5)",zIndex:1001,width:"500px",maxWidth:"95vw",maxHeight:"90vh",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{padding:"14px 18px",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",flexShrink:0},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:"1.1rem",color:"var(--color-text)"},children:"⚙️ Edit Vehicle"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--color-text-muted)"},children:r.name})]}),e.jsx("button",{onClick:t,style:{background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",color:"var(--color-text-muted)",padding:"0 4px"},children:"×"})]}),e.jsx("div",{style:{padding:"16px",overflowY:"auto",flex:1},children:e.jsx(v,{vehicle:l,onChange:u,isPro:f,compact:!0,showName:!1})}),e.jsxs("div",{style:{padding:"12px 18px",borderTop:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",flexShrink:0,backgroundColor:"var(--color-surface)"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--color-text-muted)"},children:n?"• Unsaved changes":"No changes"}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:t,style:{padding:"8px 16px",borderRadius:"6px",border:"1px solid var(--color-border)",backgroundColor:"transparent",color:"var(--color-text)",cursor:"pointer",fontSize:"0.85rem"},children:"Cancel"}),e.jsx("button",{onClick:h,disabled:!n,style:{padding:"8px 16px",borderRadius:"6px",border:"1px solid var(--color-accent)",backgroundColor:"transparent",color:"var(--color-accent)",cursor:n?"pointer":"not-allowed",opacity:n?1:.5,fontSize:"0.85rem"},title:"Apply changes for this session only",children:"Apply"}),e.jsx("button",{onClick:g,disabled:!n||s,style:{padding:"8px 16px",borderRadius:"6px",border:"none",backgroundColor:n?"var(--color-accent)":"var(--color-border)",color:"white",cursor:n&&!s?"pointer":"not-allowed",fontSize:"0.85rem",fontWeight:500},title:"Save changes permanently",children:s?"Saving...":"Save"})]})]})]})]})}export{j as default};
//# sourceMappingURL=VehicleEditorPopup-cyv7iTaN.js.map
