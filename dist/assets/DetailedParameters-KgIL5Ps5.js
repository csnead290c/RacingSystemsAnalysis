import{r as c,j as e}from"./index-C_nIj8DS.js";const m=[0,30,60,330,660,1e3,1320,2640,5280,10560,26400],f=[60,100,150,200,250,300];function y({traces:i,raceLengthFt:a,collapsed:h=!0}){var p;const[d,g]=c.useState(!h);if(!i||i.length===0)return null;const l=[];i[0]&&l.push({...i[0],event:"Start"});for(const t of m){if(t>a)break;const n=i.find(s=>s.s_ft>=t);if(n&&!l.some(s=>s.s_ft===n.s_ft&&s.event.includes("'"))){const s=t===660?"1/8 mi":t===1320?"1/4 mi":t===2640?"1/2 mi":t===5280?"1 mi":t===10560?"2 mi":t===26400?"5 mi":`${t}'`;l.push({...n,event:s})}}for(const t of f){const n=i.find(s=>s.v_mph>=t);n&&!l.some(s=>Math.abs(s.t_s-n.t_s)<.01)&&l.push({...n,event:`0-${t} mph`})}let r=((p=i[0])==null?void 0:p.gear)??1;for(let t=1;t<i.length;t++)i[t].gear!==r&&(i[t-1]&&l.push({...i[t-1],event:`Shift ${r}→${i[t].gear}`}),r=i[t].gear);const x=i[i.length-1];x&&l.push({...x,event:"Finish"}),l.sort((t,n)=>t.t_s-n.t_s);const o=l.filter((t,n,s)=>n===0||Math.abs(t.t_s-s[n-1].t_s)>.001);return e.jsxs("div",{className:"card",style:{padding:"12px 16px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer",marginBottom:d?"12px":0},onClick:()=>g(!d),children:[e.jsx("span",{style:{fontWeight:"600",color:"var(--color-text)",fontSize:"0.8rem"},children:"Detailed Parameters"}),e.jsx("button",{style:{background:"none",border:"none",color:"var(--color-text-muted)",cursor:"pointer",fontSize:"0.8rem",padding:"4px 8px"},children:d?"▼ Collapse":"▶ Expand"})]}),d&&e.jsxs("div",{style:{overflowX:"auto"},children:[e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.75rem",fontFamily:"monospace"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"2px solid var(--color-border)"},children:[e.jsx("th",{style:{textAlign:"left",padding:"6px 8px",whiteSpace:"nowrap"},children:"Event"}),e.jsx("th",{style:{textAlign:"right",padding:"6px 8px"},children:"Time (s)"}),e.jsx("th",{style:{textAlign:"right",padding:"6px 8px"},children:"Dist (ft)"}),e.jsx("th",{style:{textAlign:"right",padding:"6px 8px"},children:"MPH"}),e.jsx("th",{style:{textAlign:"right",padding:"6px 8px"},children:"Accel (g)"}),e.jsx("th",{style:{textAlign:"center",padding:"6px 8px"},children:"Gear"}),e.jsx("th",{style:{textAlign:"right",padding:"6px 8px"},children:"RPM"}),o.some(t=>t.hp!==void 0)&&e.jsx("th",{style:{textAlign:"right",padding:"6px 8px"},children:"HP"})]})}),e.jsx("tbody",{children:o.map((t,n)=>e.jsxs("tr",{style:{borderBottom:"1px solid var(--color-border)",backgroundColor:t.event==="Finish"?"rgba(34, 197, 94, 0.1)":t.event.includes("Shift")?"rgba(59, 130, 246, 0.05)":"transparent"},children:[e.jsx("td",{style:{padding:"6px 8px",whiteSpace:"nowrap",fontWeight:t.event==="Finish"?"600":"normal"},children:t.event}),e.jsx("td",{style:{textAlign:"right",padding:"6px 8px"},children:t.t_s.toFixed(3)}),e.jsx("td",{style:{textAlign:"right",padding:"6px 8px"},children:t.s_ft.toFixed(1)}),e.jsx("td",{style:{textAlign:"right",padding:"6px 8px"},children:t.v_mph.toFixed(2)}),e.jsx("td",{style:{textAlign:"right",padding:"6px 8px"},children:t.a_g.toFixed(3)}),e.jsx("td",{style:{textAlign:"center",padding:"6px 8px"},children:t.gear}),e.jsx("td",{style:{textAlign:"right",padding:"6px 8px"},children:Math.round(t.rpm).toLocaleString()}),o.some(s=>s.hp!==void 0)&&e.jsx("td",{style:{textAlign:"right",padding:"6px 8px"},children:t.hp!==void 0?Math.round(t.hp):"-"})]},n))})]}),e.jsxs("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:"1px solid var(--color-border)",display:"flex",gap:"24px",flexWrap:"wrap",fontSize:"0.75rem"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--color-text-muted)"},children:"Peak Accel: "}),e.jsxs("span",{style:{fontWeight:"600"},children:[Math.max(...i.map(t=>t.a_g)).toFixed(3)," g"]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--color-text-muted)"},children:"Peak RPM: "}),e.jsx("span",{style:{fontWeight:"600"},children:Math.max(...i.map(t=>t.rpm)).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--color-text-muted)"},children:"Avg Accel: "}),e.jsxs("span",{style:{fontWeight:"600"},children:[(i.reduce((t,n)=>t+n.a_g,0)/i.length).toFixed(3)," g"]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"var(--color-text-muted)"},children:"Data Points: "}),e.jsx("span",{style:{fontWeight:"600"},children:i.length.toLocaleString()})]})]})]})]})}export{y as default};
//# sourceMappingURL=DetailedParameters-KgIL5Ps5.js.map
