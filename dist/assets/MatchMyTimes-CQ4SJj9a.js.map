{"version":3,"file":"MatchMyTimes-CQ4SJj9a.js","sources":["../../src/shared/components/MatchMyTimes.tsx"],"sourcesContent":["import { useState, useCallback } from 'react';\r\nimport { simulate } from '../../workerBridge';\r\nimport { fromVehicleToVB6Fixture } from '../../dev/vb6/fromVehicle';\r\nimport { fixtureToSimInputs } from '../../domain/physics/vb6/fixtures';\r\nimport type { Vehicle } from '../../domain/schemas/vehicle.schema';\r\nimport type { Env } from '../../domain/schemas/env.schema';\r\nimport type { RaceLength } from '../../domain/config/raceLengths';\r\n\r\ninterface MatchMyTimesProps {\r\n  vehicle: Vehicle;\r\n  env: Env;\r\n  raceLength: RaceLength;\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onApply: (adjustedVehicle: Vehicle, calibrationFactor: number) => void;\r\n}\r\n\r\ninterface ActualRun {\r\n  et: number;\r\n  mph: number;\r\n  sixtyFt?: number;\r\n}\r\n\r\ninterface TuningResult {\r\n  parameter: string;\r\n  originalValue: number;\r\n  adjustedValue: number;\r\n  unit: string;\r\n  change: number;\r\n  changePercent: number;\r\n}\r\n\r\n/**\r\n * Match My Times - Auto-tune vehicle specs to match actual runs.\r\n * \r\n * This is a key differentiator vs competitors. It:\r\n * 1. Takes actual run data from the user\r\n * 2. Runs optimization to find which parameters need adjustment\r\n * 3. Calculates a calibration factor for future predictions\r\n * \r\n * Based on Performance Trends' \"Match My Times\" feature but with\r\n * better UX and more transparency.\r\n */\r\nexport default function MatchMyTimes({\r\n  vehicle,\r\n  env,\r\n  raceLength,\r\n  isOpen,\r\n  onClose,\r\n  onApply,\r\n}: MatchMyTimesProps) {\r\n  const [step, setStep] = useState<'input' | 'tuning' | 'results'>('input');\r\n  const [actualRuns, setActualRuns] = useState<ActualRun[]>([{ et: 0, mph: 0 }]);\r\n  const [isTuning, setIsTuning] = useState(false);\r\n  const [progress, setProgress] = useState(0);\r\n  const [progressText, setProgressText] = useState('');\r\n  const [results, setResults] = useState<TuningResult[]>([]);\r\n  const [calibrationFactor, setCalibrationFactor] = useState(1.0);\r\n  const [adjustedVehicle, setAdjustedVehicle] = useState<Vehicle | null>(null);\r\n  const [predictedET, setPredictedET] = useState(0);\r\n  const [targetET, setTargetET] = useState(0);\r\n\r\n  // Run simulation with given vehicle\r\n  const runSim = useCallback(async (testVehicle: Vehicle): Promise<{ et: number; mph: number }> => {\r\n    try {\r\n      const vb6Fixture = fromVehicleToVB6Fixture(testVehicle as any);\r\n      const simInputs = fixtureToSimInputs(vb6Fixture, raceLength);\r\n      simInputs.env = {\r\n        elevation: env.elevation ?? 0,\r\n        barometerInHg: env.barometerInHg ?? 29.92,\r\n        temperatureF: env.temperatureF ?? 75,\r\n        humidityPct: env.humidityPct ?? 50,\r\n        windMph: env.windMph ?? 0,\r\n        windAngleDeg: env.windAngleDeg ?? 0,\r\n        trackTempF: env.trackTempF ?? 100,\r\n        tractionIndex: env.tractionIndex ?? 5,\r\n      };\r\n      const result = await simulate('VB6Exact', simInputs);\r\n      return { et: result.et_s, mph: result.mph };\r\n    } catch (err) {\r\n      console.error('Simulation failed:', err);\r\n      return { et: 999, mph: 0 };\r\n    }\r\n  }, [env, raceLength]);\r\n\r\n  // Add a run\r\n  const addRun = () => {\r\n    setActualRuns([...actualRuns, { et: 0, mph: 0 }]);\r\n  };\r\n\r\n  // Remove a run\r\n  const removeRun = (index: number) => {\r\n    if (actualRuns.length > 1) {\r\n      setActualRuns(actualRuns.filter((_, i) => i !== index));\r\n    }\r\n  };\r\n\r\n  // Update a run\r\n  const updateRun = (index: number, field: keyof ActualRun, value: number) => {\r\n    const updated = [...actualRuns];\r\n    updated[index] = { ...updated[index], [field]: value };\r\n    setActualRuns(updated);\r\n  };\r\n\r\n  // Run the tuning algorithm\r\n  const runTuning = useCallback(async () => {\r\n    // Filter out empty runs\r\n    const validRuns = actualRuns.filter(r => r.et > 0);\r\n    if (validRuns.length === 0) return;\r\n\r\n    setStep('tuning');\r\n    setIsTuning(true);\r\n    setProgress(0);\r\n    setResults([]);\r\n\r\n    // Calculate average actual ET\r\n    const avgActualET = validRuns.reduce((sum, r) => sum + r.et, 0) / validRuns.length;\r\n    const avgActualMPH = validRuns.reduce((sum, r) => sum + r.mph, 0) / validRuns.length;\r\n    setTargetET(avgActualET);\r\n\r\n    // Get baseline prediction\r\n    setProgressText('Running baseline simulation...');\r\n    const baseline = await runSim(vehicle);\r\n    setProgress(10);\r\n\r\n    const etDelta = avgActualET - baseline.et;\r\n    // mphDelta could be used for future MPH-based tuning\r\n    void avgActualMPH; // Suppress unused warning\r\n\r\n    // Determine which parameters to adjust based on the delta\r\n    const tuningResults: TuningResult[] = [];\r\n    let bestVehicle = { ...vehicle };\r\n\r\n    // If predicted is faster than actual, we need to reduce power or add weight\r\n    // If predicted is slower than actual, we need to add power or reduce weight\r\n    \r\n    if (Math.abs(etDelta) > 0.01) {\r\n      setProgressText('Tuning power output...');\r\n      setProgress(30);\r\n\r\n      // Try adjusting HP (direction based on delta)\r\n      let bestHP = vehicle.powerHP ?? 500;\r\n      let bestETDiff = Math.abs(etDelta);\r\n\r\n      for (let hpAdj = -50; hpAdj <= 50; hpAdj += 5) {\r\n        const testHP = (vehicle.powerHP ?? 500) + hpAdj;\r\n        if (testHP < 50) continue;\r\n        \r\n        const testVehicle = { ...vehicle, powerHP: testHP };\r\n        const result = await runSim(testVehicle);\r\n        const diff = Math.abs(result.et - avgActualET);\r\n        \r\n        if (diff < bestETDiff) {\r\n          bestETDiff = diff;\r\n          bestHP = testHP;\r\n        }\r\n      }\r\n\r\n      if (bestHP !== (vehicle.powerHP ?? 500)) {\r\n        tuningResults.push({\r\n          parameter: 'Horsepower',\r\n          originalValue: vehicle.powerHP ?? 500,\r\n          adjustedValue: bestHP,\r\n          unit: 'HP',\r\n          change: bestHP - (vehicle.powerHP ?? 500),\r\n          changePercent: ((bestHP - (vehicle.powerHP ?? 500)) / (vehicle.powerHP ?? 500)) * 100,\r\n        });\r\n        bestVehicle.powerHP = bestHP;\r\n      }\r\n\r\n      setProgress(50);\r\n      setProgressText('Tuning weight...');\r\n\r\n      // Try adjusting weight\r\n      let bestWeight = vehicle.weightLb ?? 3000;\r\n      bestETDiff = Math.abs(etDelta);\r\n\r\n      for (let weightAdj = -100; weightAdj <= 100; weightAdj += 10) {\r\n        const testWeight = (vehicle.weightLb ?? 3000) + weightAdj;\r\n        if (testWeight < 1000) continue;\r\n        \r\n        const testVehicle = { ...bestVehicle, weightLb: testWeight };\r\n        const result = await runSim(testVehicle);\r\n        const diff = Math.abs(result.et - avgActualET);\r\n        \r\n        if (diff < bestETDiff) {\r\n          bestETDiff = diff;\r\n          bestWeight = testWeight;\r\n        }\r\n      }\r\n\r\n      if (bestWeight !== (vehicle.weightLb ?? 3000)) {\r\n        tuningResults.push({\r\n          parameter: 'Weight',\r\n          originalValue: vehicle.weightLb ?? 3000,\r\n          adjustedValue: bestWeight,\r\n          unit: 'lbs',\r\n          change: bestWeight - (vehicle.weightLb ?? 3000),\r\n          changePercent: ((bestWeight - (vehicle.weightLb ?? 3000)) / (vehicle.weightLb ?? 3000)) * 100,\r\n        });\r\n        bestVehicle.weightLb = bestWeight;\r\n      }\r\n\r\n      setProgress(70);\r\n    }\r\n\r\n    // Calculate calibration factor\r\n    setProgressText('Calculating calibration factor...');\r\n    const finalResult = await runSim(bestVehicle);\r\n    const calFactor = avgActualET / finalResult.et;\r\n    \r\n    setProgress(90);\r\n\r\n    // If we couldn't tune close enough, add a calibration factor\r\n    if (Math.abs(finalResult.et - avgActualET) > 0.02) {\r\n      tuningResults.push({\r\n        parameter: 'Calibration Factor',\r\n        originalValue: 1.0,\r\n        adjustedValue: calFactor,\r\n        unit: '',\r\n        change: calFactor - 1.0,\r\n        changePercent: (calFactor - 1.0) * 100,\r\n      });\r\n    }\r\n\r\n    setProgress(100);\r\n    setProgressText('Complete!');\r\n    setResults(tuningResults);\r\n    setCalibrationFactor(calFactor);\r\n    setAdjustedVehicle(bestVehicle);\r\n    setPredictedET(finalResult.et);\r\n    setIsTuning(false);\r\n    setStep('results');\r\n  }, [actualRuns, vehicle, runSim]);\r\n\r\n  // Apply the tuning\r\n  const handleApply = () => {\r\n    if (adjustedVehicle) {\r\n      onApply(adjustedVehicle, calibrationFactor);\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  // Reset\r\n  const reset = () => {\r\n    setStep('input');\r\n    setActualRuns([{ et: 0, mph: 0 }]);\r\n    setResults([]);\r\n    setCalibrationFactor(1.0);\r\n    setAdjustedVehicle(null);\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <>\r\n      {/* Backdrop */}\r\n      <div\r\n        onClick={onClose}\r\n        style={{\r\n          position: 'fixed',\r\n          top: 0,\r\n          left: 0,\r\n          right: 0,\r\n          bottom: 0,\r\n          backgroundColor: 'rgba(0,0,0,0.6)',\r\n          zIndex: 1000,\r\n        }}\r\n      />\r\n\r\n      {/* Modal */}\r\n      <div style={{\r\n        position: 'fixed',\r\n        top: '50%',\r\n        left: '50%',\r\n        transform: 'translate(-50%, -50%)',\r\n        backgroundColor: 'var(--color-bg)',\r\n        borderRadius: '12px',\r\n        boxShadow: '0 20px 60px rgba(0,0,0,0.4)',\r\n        zIndex: 1001,\r\n        width: '550px',\r\n        maxWidth: '95vw',\r\n        maxHeight: '90vh',\r\n        overflow: 'auto',\r\n      }}>\r\n        {/* Header */}\r\n        <div style={{\r\n          padding: '16px 20px',\r\n          borderBottom: '1px solid var(--color-border)',\r\n          display: 'flex',\r\n          justifyContent: 'space-between',\r\n          alignItems: 'center',\r\n        }}>\r\n          <h3 style={{ margin: 0, fontSize: '1.1rem', color: 'var(--color-text)' }}>\r\n            ðŸŽ¯ Match My Times\r\n          </h3>\r\n          <button\r\n            onClick={onClose}\r\n            style={{\r\n              background: 'none',\r\n              border: 'none',\r\n              fontSize: '1.5rem',\r\n              cursor: 'pointer',\r\n              color: 'var(--color-text-muted)',\r\n              padding: '0 4px',\r\n            }}\r\n          >\r\n            Ã—\r\n          </button>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div style={{ padding: '20px' }}>\r\n          {/* Step 1: Input actual runs */}\r\n          {step === 'input' && (\r\n            <>\r\n              <p style={{ fontSize: '0.9rem', color: 'var(--color-text-muted)', marginBottom: '20px' }}>\r\n                Enter your actual run times. RSA will automatically adjust your vehicle specs \r\n                to match your real-world performance.\r\n              </p>\r\n\r\n              <div style={{ marginBottom: '20px' }}>\r\n                <div style={{ \r\n                  display: 'grid', \r\n                  gridTemplateColumns: '1fr 1fr 40px',\r\n                  gap: '8px',\r\n                  marginBottom: '8px',\r\n                  fontSize: '0.8rem',\r\n                  fontWeight: 600,\r\n                  color: 'var(--color-text-muted)',\r\n                }}>\r\n                  <div>ET (seconds)</div>\r\n                  <div>MPH</div>\r\n                  <div></div>\r\n                </div>\r\n\r\n                {actualRuns.map((run, i) => (\r\n                  <div \r\n                    key={i}\r\n                    style={{ \r\n                      display: 'grid', \r\n                      gridTemplateColumns: '1fr 1fr 40px',\r\n                      gap: '8px',\r\n                      marginBottom: '8px',\r\n                    }}\r\n                  >\r\n                    <input\r\n                      type=\"number\"\r\n                      step=\"0.001\"\r\n                      value={run.et || ''}\r\n                      onChange={(e) => updateRun(i, 'et', parseFloat(e.target.value) || 0)}\r\n                      placeholder=\"e.g., 11.234\"\r\n                      style={{\r\n                        padding: '10px',\r\n                        borderRadius: '6px',\r\n                        border: '1px solid var(--color-border)',\r\n                        backgroundColor: 'var(--color-bg)',\r\n                        color: 'var(--color-text)',\r\n                        fontSize: '0.95rem',\r\n                      }}\r\n                    />\r\n                    <input\r\n                      type=\"number\"\r\n                      step=\"0.1\"\r\n                      value={run.mph || ''}\r\n                      onChange={(e) => updateRun(i, 'mph', parseFloat(e.target.value) || 0)}\r\n                      placeholder=\"e.g., 118.5\"\r\n                      style={{\r\n                        padding: '10px',\r\n                        borderRadius: '6px',\r\n                        border: '1px solid var(--color-border)',\r\n                        backgroundColor: 'var(--color-bg)',\r\n                        color: 'var(--color-text)',\r\n                        fontSize: '0.95rem',\r\n                      }}\r\n                    />\r\n                    <button\r\n                      onClick={() => removeRun(i)}\r\n                      disabled={actualRuns.length === 1}\r\n                      style={{\r\n                        padding: '10px',\r\n                        borderRadius: '6px',\r\n                        border: '1px solid var(--color-border)',\r\n                        backgroundColor: 'transparent',\r\n                        color: actualRuns.length === 1 ? 'var(--color-border)' : '#ef4444',\r\n                        cursor: actualRuns.length === 1 ? 'not-allowed' : 'pointer',\r\n                        fontSize: '1rem',\r\n                      }}\r\n                    >\r\n                      Ã—\r\n                    </button>\r\n                  </div>\r\n                ))}\r\n\r\n                <button\r\n                  onClick={addRun}\r\n                  style={{\r\n                    padding: '8px 16px',\r\n                    borderRadius: '6px',\r\n                    border: '1px dashed var(--color-border)',\r\n                    backgroundColor: 'transparent',\r\n                    color: 'var(--color-text-muted)',\r\n                    cursor: 'pointer',\r\n                    fontSize: '0.85rem',\r\n                    width: '100%',\r\n                  }}\r\n                >\r\n                  + Add Another Run\r\n                </button>\r\n              </div>\r\n\r\n              <div style={{\r\n                padding: '12px',\r\n                backgroundColor: 'rgba(59, 130, 246, 0.1)',\r\n                borderRadius: '8px',\r\n                marginBottom: '20px',\r\n                fontSize: '0.85rem',\r\n                color: 'var(--color-text-muted)',\r\n              }}>\r\n                ðŸ’¡ <strong>Tip:</strong> Enter 3-5 runs from similar conditions for best results. \r\n                Make sure the weather settings above match the conditions when you made these runs.\r\n              </div>\r\n\r\n              <button\r\n                onClick={runTuning}\r\n                disabled={!actualRuns.some(r => r.et > 0)}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '14px',\r\n                  borderRadius: '8px',\r\n                  border: 'none',\r\n                  backgroundColor: actualRuns.some(r => r.et > 0) ? '#22c55e' : 'var(--color-border)',\r\n                  color: 'white',\r\n                  fontSize: '1rem',\r\n                  fontWeight: 600,\r\n                  cursor: actualRuns.some(r => r.et > 0) ? 'pointer' : 'not-allowed',\r\n                }}\r\n              >\r\n                Tune My Vehicle\r\n              </button>\r\n            </>\r\n          )}\r\n\r\n          {/* Step 2: Tuning in progress */}\r\n          {step === 'tuning' && (\r\n            <div style={{ textAlign: 'center', padding: '40px 0' }}>\r\n              <div style={{ fontSize: '1.1rem', marginBottom: '16px' }}>\r\n                {isTuning ? 'Tuning your vehicle...' : 'Complete!'}\r\n              </div>\r\n              <div style={{\r\n                width: '100%',\r\n                height: '10px',\r\n                backgroundColor: 'var(--color-bg-secondary)',\r\n                borderRadius: '5px',\r\n                overflow: 'hidden',\r\n                marginBottom: '12px',\r\n              }}>\r\n                <div style={{\r\n                  width: `${progress}%`,\r\n                  height: '100%',\r\n                  backgroundColor: '#22c55e',\r\n                  transition: 'width 0.3s ease',\r\n                }} />\r\n              </div>\r\n              <div style={{ fontSize: '0.85rem', color: 'var(--color-text-muted)' }}>\r\n                {progressText}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Step 3: Results */}\r\n          {step === 'results' && (\r\n            <>\r\n              <div style={{\r\n                padding: '16px',\r\n                backgroundColor: 'rgba(34, 197, 94, 0.1)',\r\n                borderRadius: '8px',\r\n                marginBottom: '20px',\r\n                border: '1px solid rgba(34, 197, 94, 0.3)',\r\n              }}>\r\n                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                  <div>\r\n                    <div style={{ fontSize: '0.8rem', color: '#22c55e', fontWeight: 600 }}>\r\n                      TARGET ET\r\n                    </div>\r\n                    <div style={{ fontSize: '1.5rem', fontWeight: 700 }}>\r\n                      {targetET.toFixed(3)}s\r\n                    </div>\r\n                  </div>\r\n                  <div style={{ fontSize: '1.5rem' }}>â†’</div>\r\n                  <div>\r\n                    <div style={{ fontSize: '0.8rem', color: '#22c55e', fontWeight: 600 }}>\r\n                      PREDICTED ET\r\n                    </div>\r\n                    <div style={{ fontSize: '1.5rem', fontWeight: 700 }}>\r\n                      {(predictedET * calibrationFactor).toFixed(3)}s\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div style={{ \r\n                  marginTop: '8px', \r\n                  fontSize: '0.85rem', \r\n                  color: 'var(--color-text-muted)',\r\n                  textAlign: 'center',\r\n                }}>\r\n                  Difference: {Math.abs(targetET - (predictedET * calibrationFactor)).toFixed(3)}s\r\n                </div>\r\n              </div>\r\n\r\n              {results.length > 0 ? (\r\n                <>\r\n                  <div style={{ \r\n                    fontSize: '0.8rem', \r\n                    fontWeight: 600, \r\n                    marginBottom: '12px',\r\n                    color: 'var(--color-text-muted)',\r\n                  }}>\r\n                    RECOMMENDED ADJUSTMENTS\r\n                  </div>\r\n\r\n                  {results.map((result, i) => (\r\n                    <div\r\n                      key={i}\r\n                      style={{\r\n                        padding: '12px',\r\n                        backgroundColor: 'var(--color-surface)',\r\n                        borderRadius: '8px',\r\n                        marginBottom: '8px',\r\n                        display: 'flex',\r\n                        justifyContent: 'space-between',\r\n                        alignItems: 'center',\r\n                      }}\r\n                    >\r\n                      <div>\r\n                        <div style={{ fontWeight: 600, fontSize: '0.95rem' }}>\r\n                          {result.parameter}\r\n                        </div>\r\n                        <div style={{ fontSize: '0.8rem', color: 'var(--color-text-muted)' }}>\r\n                          {result.originalValue.toFixed(1)} â†’ {result.adjustedValue.toFixed(1)} {result.unit}\r\n                        </div>\r\n                      </div>\r\n                      <div style={{\r\n                        padding: '4px 10px',\r\n                        borderRadius: '4px',\r\n                        backgroundColor: result.change > 0 ? 'rgba(34, 197, 94, 0.2)' : 'rgba(239, 68, 68, 0.2)',\r\n                        color: result.change > 0 ? '#22c55e' : '#ef4444',\r\n                        fontWeight: 600,\r\n                        fontSize: '0.85rem',\r\n                      }}>\r\n                        {result.change > 0 ? '+' : ''}{result.changePercent.toFixed(1)}%\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </>\r\n              ) : (\r\n                <div style={{\r\n                  padding: '20px',\r\n                  textAlign: 'center',\r\n                  color: 'var(--color-text-muted)',\r\n                  fontSize: '0.9rem',\r\n                }}>\r\n                  Your vehicle specs are already well-calibrated! \r\n                  No significant adjustments needed.\r\n                </div>\r\n              )}\r\n\r\n              <div style={{ display: 'flex', gap: '12px', marginTop: '20px' }}>\r\n                <button\r\n                  onClick={handleApply}\r\n                  style={{\r\n                    flex: 1,\r\n                    padding: '12px',\r\n                    borderRadius: '8px',\r\n                    border: 'none',\r\n                    backgroundColor: '#22c55e',\r\n                    color: 'white',\r\n                    fontWeight: 600,\r\n                    cursor: 'pointer',\r\n                  }}\r\n                >\r\n                  Apply Changes\r\n                </button>\r\n                <button\r\n                  onClick={reset}\r\n                  style={{\r\n                    flex: 1,\r\n                    padding: '12px',\r\n                    borderRadius: '8px',\r\n                    border: '1px solid var(--color-border)',\r\n                    backgroundColor: 'transparent',\r\n                    color: 'var(--color-text)',\r\n                    cursor: 'pointer',\r\n                  }}\r\n                >\r\n                  Try Again\r\n                </button>\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"],"names":["MatchMyTimes","vehicle","env","raceLength","isOpen","onClose","onApply","step","setStep","useState","actualRuns","setActualRuns","isTuning","setIsTuning","progress","setProgress","progressText","setProgressText","results","setResults","calibrationFactor","setCalibrationFactor","adjustedVehicle","setAdjustedVehicle","predictedET","setPredictedET","targetET","setTargetET","runSim","useCallback","testVehicle","vb6Fixture","fromVehicleToVB6Fixture","simInputs","fixtureToSimInputs","result","simulate","err","addRun","removeRun","index","_","updateRun","field","value","updated","runTuning","validRuns","r","avgActualET","sum","baseline","etDelta","tuningResults","bestVehicle","bestHP","bestETDiff","hpAdj","testHP","diff","bestWeight","weightAdj","testWeight","finalResult","calFactor","handleApply","reset","jsxs","Fragment","jsx","run","i","e"],"mappings":"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"}