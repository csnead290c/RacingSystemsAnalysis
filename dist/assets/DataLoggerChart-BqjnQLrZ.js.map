{"version":3,"file":"DataLoggerChart-BqjnQLrZ.js","sources":["../../src/shared/components/charts/DataLoggerChart.tsx"],"sourcesContent":["import { useState, useMemo } from 'react';\nimport {\n  ResponsiveContainer,\n  ComposedChart,\n  Line,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  ReferenceLine,\n} from 'recharts';\n\n/**\n * Data logger trace point with all available variables\n */\ninterface TraceData {\n  t_s: number;\n  s_ft: number;\n  v_mph: number;\n  v_fps?: number;\n  a_g: number;\n  rpm: number;\n  dsrpm?: number;  // Driveshaft RPM (Engine RPM / Trans Gear Ratio)\n  lockRpm?: number;\n  gear: number;\n  slip?: boolean;\n  hp?: number;       // Wheel HP (after losses)\n  engineHp?: number; // Engine HP (before losses)\n  dragHp?: number;\n}\n\ninterface DataLoggerChartProps {\n  data: TraceData[];\n  /** Comparison data for overlay (optional) */\n  comparisonData?: TraceData[];\n  /** Label for comparison data */\n  comparisonLabel?: string;\n  /** Distance markers to show (e.g., [60, 330, 660, 1000, 1320]) */\n  distanceMarkers?: number[];\n  /** Race length in feet (660 or 1320) */\n  raceLengthFt?: number;\n}\n\ntype XAxisMode = 'time' | 'distance';\n\n/**\n * Available data series for the data logger\n */\nconst SERIES_CONFIG = {\n  rpm: {\n    name: 'Engine RPM',\n    color: '#ef4444', // red\n    unit: 'RPM',\n    yAxisId: 'rpm',\n  },\n  dsrpm: {\n    name: 'Driveshaft RPM',\n    color: '#f97316', // orange\n    unit: 'RPM',\n    yAxisId: 'rpm',\n  },\n  lockRpm: {\n    name: 'Clutch/Conv RPM',\n    color: '#eab308', // yellow\n    unit: 'RPM',\n    yAxisId: 'rpm',\n  },\n  v_mph: {\n    name: 'Car Speed',\n    color: '#22c55e', // green\n    unit: 'mph',\n    yAxisId: 'speed',\n  },\n  a_g: {\n    name: 'Acceleration',\n    color: '#3b82f6', // blue\n    unit: 'g',\n    yAxisId: 'accel',\n  },\n  engineHp: {\n    name: 'Engine HP',\n    color: '#a855f7', // violet\n    unit: 'HP',\n    yAxisId: 'hp',\n  },\n  hp: {\n    name: 'Wheel HP',\n    color: '#8b5cf6', // purple\n    unit: 'HP',\n    yAxisId: 'hp',\n  },\n  dragHp: {\n    name: 'Drag HP',\n    color: '#ec4899', // pink\n    unit: 'HP',\n    yAxisId: 'hp',\n  },\n  gear: {\n    name: 'Gear',\n    color: '#9ca3af', // lighter gray for visibility\n    unit: '',\n    yAxisId: 'gear',\n  },\n} as const;\n\ntype SeriesKey = keyof typeof SERIES_CONFIG;\n\n/**\n * Data Logger Chart - simulated data logger view with toggleable variables\n * Supports time or distance on X-axis with distance markers\n */\nfunction DataLoggerChart({ \n  data, \n  comparisonData,\n  comparisonLabel = 'Comparison',\n  distanceMarkers = [60, 330, 660, 1000, 1320],\n  raceLengthFt = 1320,\n}: DataLoggerChartProps) {\n  // X-axis mode: time or distance\n  const [xAxisMode, setXAxisMode] = useState<XAxisMode>('time');\n  \n  // Default enabled series\n  const [enabledSeries, setEnabledSeries] = useState<Set<SeriesKey>>(\n    new Set(['rpm', 'v_mph', 'a_g'])\n  );\n\n  // Toggle a series on/off\n  const toggleSeries = (key: SeriesKey) => {\n    setEnabledSeries(prev => {\n      const next = new Set(prev);\n      if (next.has(key)) {\n        next.delete(key);\n      } else {\n        next.add(key);\n      }\n      return next;\n    });\n  };\n\n  // Determine which Y-axes are needed based on enabled series\n  const activeYAxes = useMemo(() => {\n    const axes = new Set<string>();\n    enabledSeries.forEach(key => {\n      axes.add(SERIES_CONFIG[key].yAxisId);\n    });\n    return axes;\n  }, [enabledSeries]);\n\n  // State for showing comparison overlay\n  const [showComparison, setShowComparison] = useState(true);\n\n  // Filter data and add xValue based on mode, also inject marker points\n  const { chartData, markerIndices } = useMemo(() => {\n    let startIdx = 0;\n    for (let i = 0; i < data.length; i++) {\n      if (data[i].t_s > 0) {\n        startIdx = Math.max(0, i - 1);\n        break;\n      }\n    }\n    \n    const filtered = data.slice(startIdx);\n    const activeMarkers = distanceMarkers.filter(d => d <= raceLengthFt);\n    const indices: { distance: number; index: number }[] = [];\n    \n    // Find the closest data point index for each marker distance\n    for (const targetDist of activeMarkers) {\n      let bestIdx = -1;\n      let bestDiff = Infinity;\n      for (let i = 0; i < filtered.length; i++) {\n        const diff = Math.abs(filtered[i].s_ft - targetDist);\n        if (diff < bestDiff) {\n          bestDiff = diff;\n          bestIdx = i;\n        }\n      }\n      if (bestIdx >= 0) {\n        indices.push({ distance: targetDist, index: bestIdx });\n      }\n    }\n    \n    // Map primary data with comparison data merged by xValue\n    const mapped = filtered.map((d) => {\n      const xValue = xAxisMode === 'time' ? d.t_s : d.s_ft;\n      const result: TraceData & { xValue: number; comp_rpm?: number; comp_v_mph?: number; comp_a_g?: number; comp_hp?: number } = {\n        ...d,\n        xValue,\n      };\n      \n      // Add comparison data if available\n      if (comparisonData && showComparison) {\n        // Find closest comparison point by xValue\n        const compXValue = xAxisMode === 'time' ? 't_s' : 's_ft';\n        let bestComp: TraceData | null = null;\n        let bestDiff = Infinity;\n        for (const comp of comparisonData) {\n          const diff = Math.abs((comp as any)[compXValue] - xValue);\n          if (diff < bestDiff) {\n            bestDiff = diff;\n            bestComp = comp;\n          }\n        }\n        if (bestComp && bestDiff < (xAxisMode === 'time' ? 0.05 : 10)) {\n          result.comp_rpm = bestComp.rpm;\n          result.comp_v_mph = bestComp.v_mph;\n          result.comp_a_g = bestComp.a_g;\n          result.comp_hp = bestComp.hp;\n        }\n      }\n      \n      return result;\n    });\n    \n    return { chartData: mapped, markerIndices: indices };\n  }, [data, comparisonData, showComparison, xAxisMode, distanceMarkers, raceLengthFt]);\n  \n  // Suppress unused warning for comparisonLabel (used in tooltip)\n  void comparisonLabel;\n\n  // Get marker x values from the actual data points\n  const markerXValues = useMemo(() => {\n    return markerIndices.map(m => ({\n      distance: m.distance,\n      xValue: chartData[m.index]?.xValue,\n    })).filter(m => m.xValue !== undefined && !isNaN(m.xValue));\n  }, [chartData, markerIndices]);\n\n  // Detect shift points (where gear changes)\n  const shiftPoints = useMemo(() => {\n    const shifts: { xValue: number; fromGear: number; toGear: number }[] = [];\n    for (let i = 1; i < chartData.length; i++) {\n      const prev = chartData[i - 1];\n      const curr = chartData[i];\n      if (prev.gear !== curr.gear && curr.gear > prev.gear) {\n        shifts.push({\n          xValue: curr.xValue,\n          fromGear: prev.gear,\n          toGear: curr.gear,\n        });\n      }\n    }\n    return shifts;\n  }, [chartData]);\n\n  if (!data || data.length === 0) {\n    return (\n      <div className=\"text-center text-muted\" style={{ padding: 'var(--space-6)' }}>\n        No trace data available\n      </div>\n    );\n  }\n\n  // Count active axes for margin calculation\n  const rightAxesCount = ['speed', 'accel', 'hp'].filter(a => activeYAxes.has(a)).length;\n\n  return (\n    <div style={{ display: 'flex', flexDirection: 'column', height: '100%' }}>\n      {/* Controls row */}\n      <div style={{ \n        display: 'flex', \n        flexDirection: 'column',\n        gap: 'var(--space-2)',\n        marginBottom: 'var(--space-2)',\n        flexShrink: 0,\n      }}>\n        {/* X-axis mode toggle - segmented control style */}\n        <div style={{ display: 'flex', alignItems: 'center', gap: 'var(--space-3)', flexWrap: 'wrap' }}>\n          <span style={{ fontSize: '0.8rem', fontWeight: 600, color: 'var(--color-text-muted)' }}>X-Axis</span>\n          <div style={{\n            display: 'inline-flex',\n            borderRadius: 'var(--radius-md)',\n            overflow: 'hidden',\n            border: '2px solid var(--color-border)',\n            backgroundColor: 'var(--color-bg-secondary)',\n          }}>\n            <button\n              onClick={() => setXAxisMode('time')}\n              style={{\n                padding: '8px 20px',\n                border: 'none',\n                backgroundColor: xAxisMode === 'time' ? 'var(--color-primary)' : 'transparent',\n                color: xAxisMode === 'time' ? 'white' : 'var(--color-text)',\n                cursor: 'pointer',\n                fontSize: '0.85rem',\n                fontWeight: 600,\n                transition: 'all 0.15s ease',\n              }}\n            >\n              Time (s)\n            </button>\n            <button\n              onClick={() => setXAxisMode('distance')}\n              style={{\n                padding: '8px 20px',\n                border: 'none',\n                borderLeft: '2px solid var(--color-border)',\n                backgroundColor: xAxisMode === 'distance' ? 'var(--color-primary)' : 'transparent',\n                color: xAxisMode === 'distance' ? 'white' : 'var(--color-text)',\n                cursor: 'pointer',\n                fontSize: '0.85rem',\n                fontWeight: 600,\n                transition: 'all 0.15s ease',\n              }}\n            >\n              Distance (ft)\n            </button>\n          </div>\n          \n          {/* Comparison toggle (only show if comparison data exists) */}\n          {comparisonData && comparisonData.length > 0 && (\n            <label style={{ \n              display: 'flex', \n              alignItems: 'center', \n              gap: '6px',\n              fontSize: '0.8rem',\n              color: 'var(--color-text-muted)',\n              cursor: 'pointer',\n              marginLeft: 'auto',\n            }}>\n              <input \n                type=\"checkbox\" \n                checked={showComparison} \n                onChange={(e) => setShowComparison(e.target.checked)}\n              />\n              <span style={{ color: showComparison ? '#f59e0b' : 'var(--color-text-muted)' }}>\n                Show Comparison\n              </span>\n            </label>\n          )}\n        </div>\n\n        {/* Series toggles - compact pills */}\n        <div style={{ \n          display: 'flex', \n          flexWrap: 'wrap', \n          gap: '6px',\n        }}>\n          {(Object.entries(SERIES_CONFIG) as [SeriesKey, typeof SERIES_CONFIG[SeriesKey]][]).map(([key, config]) => {\n            const hasData = data.some(d => d[key as keyof TraceData] !== undefined);\n            if (!hasData) return null;\n            \n            const isEnabled = enabledSeries.has(key);\n            return (\n              <button\n                key={key}\n                onClick={() => toggleSeries(key)}\n                title={config.name}\n                style={{\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '4px',\n                  padding: '4px 10px',\n                  borderRadius: '12px',\n                  border: 'none',\n                  backgroundColor: isEnabled ? config.color : 'var(--color-bg-secondary)',\n                  color: isEnabled ? 'white' : 'var(--color-text-muted)',\n                  cursor: 'pointer',\n                  fontSize: '0.7rem',\n                  fontWeight: 600,\n                  transition: 'all 0.15s ease',\n                  opacity: isEnabled ? 1 : 0.7,\n                }}\n              >\n                <span style={{\n                  width: '6px',\n                  height: '6px',\n                  borderRadius: '50%',\n                  backgroundColor: isEnabled ? 'white' : config.color,\n                }} />\n                {config.name}\n              </button>\n            );\n          })}\n        </div>\n      </div>\n\n      {/* Chart */}\n      <div style={{ flex: 1, minHeight: 0 }}>\n        <ResponsiveContainer width=\"100%\" height=\"100%\">\n          <ComposedChart data={chartData} margin={{ top: 20, right: 5 + rightAxesCount * 40, left: 5, bottom: 20 }}>\n          <CartesianGrid strokeDasharray=\"3 3\" stroke=\"var(--color-border)\" opacity={0.3} />\n          \n          {/* X-Axis - use 'number' type for proper scaling */}\n          <XAxis\n            dataKey=\"xValue\"\n            type=\"number\"\n            domain={['dataMin', 'dataMax']}\n            stroke=\"var(--color-text-muted)\"\n            tick={{ fontSize: 10, fill: 'var(--color-text-muted)' }}\n            tickFormatter={(v) => xAxisMode === 'time' ? v.toFixed(1) : v.toFixed(0)}\n            label={{ \n              value: xAxisMode === 'time' ? 'Time (s)' : 'Distance (ft)', \n              position: 'insideBottom', \n              offset: -10,\n              fontSize: 11,\n              fill: 'var(--color-text-muted)',\n            }}\n          />\n          \n          {/* Y-Axes - only show if series is enabled */}\n          {activeYAxes.has('rpm') && (\n            <YAxis\n              yAxisId=\"rpm\"\n              orientation=\"left\"\n              stroke=\"#ef4444\"\n              tick={{ fontSize: 10, fill: '#ef4444' }}\n              tickFormatter={(v) => `${(v/1000).toFixed(0)}k`}\n              width={40}\n            />\n          )}\n          {activeYAxes.has('speed') && (\n            <YAxis\n              yAxisId=\"speed\"\n              orientation=\"right\"\n              stroke=\"#22c55e\"\n              tick={{ fontSize: 10, fill: '#22c55e' }}\n              width={35}\n            />\n          )}\n          {activeYAxes.has('accel') && (\n            <YAxis\n              yAxisId=\"accel\"\n              orientation=\"right\"\n              stroke=\"#3b82f6\"\n              domain={[0, 'auto']}\n              tick={{ fontSize: 10, fill: '#3b82f6' }}\n              tickFormatter={(v) => v.toFixed(1)}\n              width={30}\n            />\n          )}\n          {activeYAxes.has('hp') && (\n            <YAxis\n              yAxisId=\"hp\"\n              orientation=\"right\"\n              stroke=\"#8b5cf6\"\n              tick={{ fontSize: 10, fill: '#8b5cf6' }}\n              width={40}\n            />\n          )}\n          {/* Hidden axis for gear */}\n          <YAxis yAxisId=\"gear\" orientation=\"right\" domain={[0, 6]} hide />\n\n          {/* Distance marker reference lines */}\n          {markerXValues.map((marker) => (\n            <ReferenceLine\n              key={`dist-${marker.distance}`}\n              x={marker.xValue}\n              yAxisId=\"rpm\"\n              stroke=\"var(--color-chart-marker)\"\n              strokeWidth={2}\n              strokeDasharray=\"6 4\"\n              label={{ \n                value: `${marker.distance}'`, \n                position: 'insideTopRight', \n                fill: 'var(--color-chart-marker)', \n                fontSize: 10,\n                fontWeight: 700,\n                offset: 5,\n              }}\n            />\n          ))}\n\n          {/* Shift point markers */}\n          {shiftPoints.map((shift, idx) => (\n            <ReferenceLine\n              key={`shift-${idx}`}\n              x={shift.xValue}\n              yAxisId=\"rpm\"\n              stroke=\"#f59e0b\"\n              strokeWidth={1.5}\n              strokeDasharray=\"3 3\"\n              label={{ \n                value: `${shift.fromGear}â†’${shift.toGear}`, \n                position: 'insideBottomRight', \n                fill: '#f59e0b', \n                fontSize: 9,\n                fontWeight: 600,\n              }}\n            />\n          ))}\n\n          <Tooltip\n            contentStyle={{\n              backgroundColor: 'var(--color-bg)',\n              border: '1px solid var(--color-border)',\n              borderRadius: 'var(--radius-sm)',\n              color: 'var(--color-text)',\n              fontSize: '0.75rem',\n              padding: '8px',\n            }}\n            formatter={(value: number, name: string) => {\n              const config = Object.values(SERIES_CONFIG).find(c => c.name === name);\n              if (!config) return [value.toFixed(2), name];\n              return [`${value.toFixed(config.unit === 'RPM' ? 0 : 2)} ${config.unit}`, name];\n            }}\n            labelFormatter={(label: number) => \n              xAxisMode === 'time' \n                ? `Time: ${label.toFixed(3)}s` \n                : `Distance: ${label.toFixed(0)} ft`\n            }\n          />\n\n          {/* Data lines */}\n          {enabledSeries.has('rpm') && (\n            <Line type=\"monotone\" dataKey=\"rpm\" stroke={SERIES_CONFIG.rpm.color} strokeWidth={2} dot={false} name={SERIES_CONFIG.rpm.name} yAxisId=\"rpm\" />\n          )}\n          {enabledSeries.has('dsrpm') && (\n            <Line type=\"monotone\" dataKey=\"dsrpm\" stroke={SERIES_CONFIG.dsrpm.color} strokeWidth={2} dot={false} name={SERIES_CONFIG.dsrpm.name} yAxisId=\"rpm\" />\n          )}\n          {enabledSeries.has('lockRpm') && (\n            <Line type=\"monotone\" dataKey=\"lockRpm\" stroke={SERIES_CONFIG.lockRpm.color} strokeWidth={2} dot={false} name={SERIES_CONFIG.lockRpm.name} yAxisId=\"rpm\" />\n          )}\n          {enabledSeries.has('v_mph') && (\n            <Line type=\"monotone\" dataKey=\"v_mph\" stroke={SERIES_CONFIG.v_mph.color} strokeWidth={2} dot={false} name={SERIES_CONFIG.v_mph.name} yAxisId=\"speed\" />\n          )}\n          {enabledSeries.has('a_g') && (\n            <Line type=\"monotone\" dataKey=\"a_g\" stroke={SERIES_CONFIG.a_g.color} strokeWidth={2} dot={false} name={SERIES_CONFIG.a_g.name} yAxisId=\"accel\" />\n          )}\n          {enabledSeries.has('hp') && (\n            <Line type=\"monotone\" dataKey=\"hp\" stroke={SERIES_CONFIG.hp.color} strokeWidth={2} dot={false} name={SERIES_CONFIG.hp.name} yAxisId=\"hp\" />\n          )}\n          {enabledSeries.has('dragHp') && (\n            <Line type=\"monotone\" dataKey=\"dragHp\" stroke={SERIES_CONFIG.dragHp.color} strokeWidth={2} dot={false} name={SERIES_CONFIG.dragHp.name} yAxisId=\"hp\" />\n          )}\n          {enabledSeries.has('gear') && (\n            <Line type=\"stepAfter\" dataKey=\"gear\" stroke={SERIES_CONFIG.gear.color} strokeWidth={2} dot={false} name={SERIES_CONFIG.gear.name} yAxisId=\"gear\" />\n          )}\n          \n          {/* Comparison overlay lines (dashed, semi-transparent) */}\n          {showComparison && comparisonData && comparisonData.length > 0 && (\n            <>\n              {enabledSeries.has('rpm') && (\n                <Line type=\"monotone\" dataKey=\"comp_rpm\" stroke={SERIES_CONFIG.rpm.color} strokeWidth={1.5} strokeDasharray=\"4 2\" strokeOpacity={0.5} dot={false} name=\"Comp RPM\" yAxisId=\"rpm\" />\n              )}\n              {enabledSeries.has('v_mph') && (\n                <Line type=\"monotone\" dataKey=\"comp_v_mph\" stroke={SERIES_CONFIG.v_mph.color} strokeWidth={1.5} strokeDasharray=\"4 2\" strokeOpacity={0.5} dot={false} name=\"Comp Speed\" yAxisId=\"speed\" />\n              )}\n              {enabledSeries.has('a_g') && (\n                <Line type=\"monotone\" dataKey=\"comp_a_g\" stroke={SERIES_CONFIG.a_g.color} strokeWidth={1.5} strokeDasharray=\"4 2\" strokeOpacity={0.5} dot={false} name=\"Comp Accel\" yAxisId=\"accel\" />\n              )}\n              {enabledSeries.has('hp') && (\n                <Line type=\"monotone\" dataKey=\"comp_hp\" stroke={SERIES_CONFIG.hp.color} strokeWidth={1.5} strokeDasharray=\"4 2\" strokeOpacity={0.5} dot={false} name=\"Comp HP\" yAxisId=\"hp\" />\n              )}\n            </>\n          )}\n        </ComposedChart>\n        </ResponsiveContainer>\n      </div>\n\n      {/* Compact legend below chart */}\n      <div style={{ \n        display: 'flex', \n        flexWrap: 'wrap', \n        justifyContent: 'center',\n        gap: '12px',\n        marginTop: '8px',\n        fontSize: '0.75rem',\n      }}>\n        {(Object.entries(SERIES_CONFIG) as [SeriesKey, typeof SERIES_CONFIG[SeriesKey]][]).map(([key, config]) => {\n          if (!enabledSeries.has(key)) return null;\n          return (\n            <div key={key} style={{ display: 'flex', alignItems: 'center', gap: '4px' }}>\n              <span style={{ width: '14px', height: '3px', backgroundColor: config.color, borderRadius: '1px' }} />\n              <span style={{ color: config.color, fontWeight: 500 }}>{config.name}</span>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n\nexport default DataLoggerChart;"],"names":["SERIES_CONFIG","DataLoggerChart","data","comparisonData","comparisonLabel","distanceMarkers","raceLengthFt","xAxisMode","setXAxisMode","useState","enabledSeries","setEnabledSeries","toggleSeries","key","prev","next","activeYAxes","useMemo","axes","showComparison","setShowComparison","chartData","markerIndices","startIdx","i","filtered","activeMarkers","d","indices","targetDist","bestIdx","bestDiff","diff","xValue","result","compXValue","bestComp","comp","markerXValues","m","_a","shiftPoints","shifts","curr","jsx","rightAxesCount","a","jsxs","config","isEnabled","ResponsiveContainer","ComposedChart","CartesianGrid","XAxis","v","YAxis","marker","ReferenceLine","shift","idx","Tooltip","value","name","c","label","Line","Fragment"],"mappings":"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"}