import{r as c,j as e,ao as E,ap as W,aq as L,ar as H,as as V,at as B,au as N}from"./index-Bgu9geDz.js";const O=[{value:"Gasoline",label:"Gasoline (Carb)"},{value:"Gasoline EFI",label:"Gasoline (EFI)"},{value:"Methanol",label:"Methanol (Carb)"},{value:"Methanol EFI",label:"Methanol (EFI)"},{value:"Nitromethane",label:"Nitromethane"},{value:"E85",label:"E85"}],q=[{value:1,label:"Dragster w/Wing"},{value:2,label:"Dragster"},{value:3,label:"Funny Car"},{value:4,label:"Altered/Roadster"},{value:5,label:"Fastback"},{value:6,label:"Sedan"},{value:7,label:"Wagon/Van"},{value:8,label:"Motorcycle"}];function U({vehicle:l,onChange:i,isPro:d=!1,compact:o=!1,showName:k=!0}){var P,I,M,A;const[u,y]=c.useState(!1),[f,m]=c.useState(!1),[p,g]=c.useState(!1),[F,S]=c.useState(!1),C=l.transmissionType??"clutch",r=(t,n)=>{i({...l,[t]:n})},w=(t,n,x)=>{const h=[...l[t]??[]];h[n]=x,i({...l,[t]:h})},j={marginBottom:o?"12px":"20px",padding:o?"10px":"14px",backgroundColor:"var(--color-surface)",borderRadius:"8px",border:"1px solid var(--color-border)"},v={fontSize:o?"0.8rem":"0.9rem",fontWeight:600,color:"var(--color-accent)",marginBottom:o?"8px":"12px",textTransform:"uppercase",letterSpacing:"0.5px"},b={display:"grid",gridTemplateColumns:o?"1fr 1fr":"1fr 1fr 1fr",gap:o?"8px":"12px"},a={fontSize:o?"0.7rem":"0.75rem",color:"var(--color-text-muted)",marginBottom:"2px",display:"block"},s={width:"100%",padding:o?"6px 8px":"8px 10px",fontSize:o?"0.85rem":"0.9rem",borderRadius:"4px",border:"1px solid var(--color-border)",backgroundColor:"var(--color-bg)",color:"var(--color-text)"},R={...s,cursor:"pointer"};return e.jsxs("div",{children:[k&&e.jsxs("div",{style:j,children:[e.jsx("div",{style:v,children:"Identity"}),e.jsxs("div",{style:b,children:[e.jsxs("div",{style:{gridColumn:"span 2"},children:[e.jsx("label",{style:a,children:"Vehicle Name *"}),e.jsx("input",{type:"text",style:s,value:l.name??"",onChange:t=>r("name",t.target.value),placeholder:"My Race Car"})]}),e.jsxs("div",{children:[e.jsx("label",{style:a,children:"Race Length"}),e.jsxs("select",{style:R,value:l.defaultRaceLength??"QUARTER",onChange:t=>r("defaultRaceLength",t.target.value),children:[e.jsx("option",{value:"EIGHTH",children:"1/8 Mile"}),e.jsx("option",{value:"QUARTER",children:"1/4 Mile"})]})]})]})]}),e.jsxs("div",{style:j,children:[e.jsx("div",{style:v,children:"Vehicle"}),e.jsxs("div",{style:b,children:[e.jsxs("div",{children:[e.jsx("label",{style:a,children:"Weight (lb) *"}),e.jsx("input",{type:"number",style:s,value:l.weightLb??"",onChange:t=>r("weightLb",parseFloat(t.target.value))})]}),e.jsxs("div",{children:[e.jsx("label",{style:a,children:"Wheelbase (in)"}),e.jsx("input",{type:"number",style:s,value:l.wheelbaseIn??108,onChange:t=>r("wheelbaseIn",parseFloat(t.target.value))})]}),e.jsxs("div",{children:[e.jsxs("label",{style:a,children:["Rollout (in)",e.jsx(E,{onClick:()=>S(!0),tooltip:W.btnRollout})]}),e.jsx("input",{type:"number",step:"0.1",style:s,value:l.rolloutIn??12,onChange:t=>r("rolloutIn",parseFloat(t.target.value))})]}),e.jsxs("div",{children:[e.jsx("label",{style:a,children:"Body Style"}),e.jsx("select",{style:R,value:l.bodyStyle??6,onChange:t=>r("bodyStyle",parseInt(t.target.value)),children:q.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]}),e.jsxs("div",{children:[e.jsxs("label",{style:a,children:["Frontal Area (ft²)",e.jsx(E,{onClick:()=>y(!0),tooltip:W.btnFrontalArea})]}),e.jsx("input",{type:"number",step:"0.1",style:s,value:l.frontalAreaFt2??22,onChange:t=>r("frontalAreaFt2",parseFloat(t.target.value))})]}),e.jsxs("div",{children:[e.jsx("label",{style:a,children:"Tire Dia (in)"}),e.jsx("input",{type:"number",step:"0.1",style:s,value:l.tireDiaIn??28,onChange:t=>r("tireDiaIn",parseFloat(t.target.value))})]})]})]}),e.jsxs("div",{style:j,children:[e.jsx("div",{style:v,children:"Engine"}),e.jsxs("div",{style:b,children:[e.jsxs("div",{children:[e.jsx("label",{style:a,children:"Peak HP *"}),e.jsx("input",{type:"number",style:s,value:l.powerHP??"",onChange:t=>r("powerHP",parseFloat(t.target.value))})]}),e.jsxs("div",{children:[e.jsx("label",{style:a,children:"RPM @ Peak HP *"}),e.jsx("input",{type:"number",step:"100",style:s,value:l.rpmAtPeakHP??6500,onChange:t=>r("rpmAtPeakHP",parseFloat(t.target.value))})]}),e.jsxs("div",{children:[e.jsx("label",{style:a,children:"Displacement (CID)"}),e.jsx("input",{type:"number",style:s,value:l.displacementCID??350,onChange:t=>r("displacementCID",parseFloat(t.target.value))})]}),e.jsxs("div",{children:[e.jsx("label",{style:a,children:"Fuel Type"}),e.jsx("select",{style:R,value:l.fuelType??"Gasoline",onChange:t=>r("fuelType",t.target.value),children:O.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]}),e.jsxs("div",{children:[e.jsx("label",{style:a,children:"Shift RPM"}),e.jsx("input",{type:"number",step:"100",style:s,value:((P=l.shiftRPMs)==null?void 0:P[0])??6500,onChange:t=>{var h;const n=parseFloat(t.target.value),x=((h=l.gearRatios)==null?void 0:h.length)??4;r("shiftRPMs",Array(x).fill(n))}})]}),e.jsxs("div",{children:[e.jsx("label",{style:a,children:"Rev Limiter"}),e.jsx("input",{type:"number",step:"100",style:s,value:l.revLimiterRPM??"",placeholder:"None",onChange:t=>r("revLimiterRPM",t.target.value?parseFloat(t.target.value):void 0)})]})]}),e.jsx("div",{style:{marginTop:"8px"},children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"0.8rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:l.n2oEnabled??!1,onChange:t=>r("n2oEnabled",t.target.checked)}),"N2O (Nitrous Oxide)"]})})]}),e.jsxs("div",{style:j,children:[e.jsx("div",{style:v,children:"Transmission"}),e.jsx("div",{style:{marginBottom:"10px"},children:e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"0.85rem",cursor:"pointer"},children:[e.jsx("input",{type:"radio",name:"transType",checked:C==="clutch",onChange:()=>r("transmissionType","clutch")}),"Clutch"]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"0.85rem",cursor:"pointer"},children:[e.jsx("input",{type:"radio",name:"transType",checked:C==="converter",onChange:()=>r("transmissionType","converter")}),"Converter"]})]})}),e.jsx("div",{style:b,children:C==="clutch"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{style:a,children:"Launch RPM"}),e.jsx("input",{type:"number",step:"100",style:s,value:l.clutchLaunchRPM??5500,onChange:t=>r("clutchLaunchRPM",parseFloat(t.target.value))})]}),e.jsxs("div",{children:[e.jsx("label",{style:a,children:"Slip RPM"}),e.jsx("input",{type:"number",step:"100",style:s,value:l.clutchSlipRPM??6e3,onChange:t=>r("clutchSlipRPM",parseFloat(t.target.value))})]}),e.jsxs("div",{children:[e.jsx("label",{style:a,children:"Slippage Factor"}),e.jsx("input",{type:"number",step:"0.001",style:s,value:l.clutchSlippage??1.004,onChange:t=>r("clutchSlippage",parseFloat(t.target.value))})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{style:a,children:"Stall RPM"}),e.jsx("input",{type:"number",step:"100",style:s,value:l.converterStallRPM??3e3,onChange:t=>r("converterStallRPM",parseFloat(t.target.value))})]}),e.jsxs("div",{children:[e.jsx("label",{style:a,children:"Torque Mult"}),e.jsx("input",{type:"number",step:"0.01",style:s,value:l.converterTorqueMult??2,onChange:t=>r("converterTorqueMult",parseFloat(t.target.value))})]}),e.jsxs("div",{children:[e.jsx("label",{style:a,children:"Slippage %"}),e.jsx("input",{type:"number",step:"0.1",style:s,value:l.converterSlippage??5,onChange:t=>r("converterSlippage",parseFloat(t.target.value))})]})]})})]}),e.jsxs("div",{style:j,children:[e.jsx("div",{style:v,children:"Final Drive"}),e.jsxs("div",{style:b,children:[e.jsxs("div",{children:[e.jsxs("label",{style:a,children:["Rear Gear Ratio",e.jsx(E,{onClick:()=>g(!0),tooltip:"Calculate gear ratio"})]}),e.jsx("input",{type:"number",step:"0.01",style:s,value:l.rearGear??3.73,onChange:t=>r("rearGear",parseFloat(t.target.value))})]}),e.jsxs("div",{children:[e.jsx("label",{style:a,children:"Trans Efficiency"}),e.jsx("input",{type:"number",step:"0.01",style:s,value:l.transEfficiency??.97,onChange:t=>r("transEfficiency",parseFloat(t.target.value))})]}),e.jsxs("div",{children:[e.jsx("label",{style:a,children:"# of Gears"}),e.jsx("select",{style:R,value:((I=l.gearRatios)==null?void 0:I.length)??4,onChange:t=>{const n=parseInt(t.target.value),x=l.gearRatios??[2.5,1.8,1.4,1],h=l.shiftRPMs??[7e3,7e3,7e3,7e3],D=Array(n).fill(0).map((z,T)=>x[T]??1),G=Array(n).fill(0).map((z,T)=>h[T]??7e3);i({...l,gearRatios:D,shiftRPMs:G})},children:[1,2,3,4,5,6].map(t=>e.jsx("option",{value:t,children:t},t))})]})]}),(((M=l.gearRatios)==null?void 0:M.length)??0)>1&&e.jsxs("div",{style:{marginTop:"10px"},children:[e.jsx("label",{style:a,children:"Gear Ratios"}),e.jsx("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap"},children:(A=l.gearRatios)==null?void 0:A.map((t,n)=>e.jsxs("div",{style:{width:o?"60px":"70px"},children:[e.jsx("input",{type:"number",step:"0.01",style:{...s,textAlign:"center"},value:t,onChange:x=>w("gearRatios",n,parseFloat(x.target.value)),title:`Gear ${n+1}`}),e.jsxs("div",{style:{fontSize:"0.65rem",textAlign:"center",color:"var(--color-text-muted)"},children:[n+1,n===0?"st":n===1?"nd":n===2?"rd":"th"]})]},n))})]})]}),(d||l.throttleStopEnabled)&&e.jsxs("div",{style:j,children:[e.jsx("div",{style:v,children:"Throttle Stop"}),e.jsx("div",{style:{marginBottom:"10px"},children:e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"0.8rem",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:l.throttleStopEnabled??!1,onChange:t=>r("throttleStopEnabled",t.target.checked)}),"Enable Throttle Stop"]})}),l.throttleStopEnabled&&e.jsxs("div",{style:b,children:[e.jsxs("div",{children:[e.jsx("label",{style:a,children:"Delay (sec)"}),e.jsx("input",{type:"number",step:"0.01",style:s,value:l.throttleStopDelay??.5,onChange:t=>r("throttleStopDelay",parseFloat(t.target.value))})]}),e.jsxs("div",{children:[e.jsx("label",{style:a,children:"Duration (sec)"}),e.jsx("input",{type:"number",step:"0.01",style:s,value:l.throttleStopDuration??.3,onChange:t=>r("throttleStopDuration",parseFloat(t.target.value))})]}),e.jsxs("div",{children:[e.jsx("label",{style:a,children:"Throttle %"}),e.jsx("input",{type:"number",step:"1",style:s,value:l.throttleStopPct??50,onChange:t=>r("throttleStopPct",parseFloat(t.target.value))})]})]})]}),e.jsx(L,{isOpen:u,onClose:()=>y(!1),onApply:t=>{r("frontalAreaFt2",t),y(!1)}}),e.jsx(H,{isOpen:f,onClose:()=>m(!1),onApply:t=>{r("tireWidthIn",t),m(!1)}}),e.jsx(V,{isOpen:p,onClose:()=>g(!1),onApply:t=>{r("rearGear",t),g(!1)}}),e.jsx(B,{isOpen:F,onClose:()=>S(!1),onApply:t=>{r("rolloutIn",t),S(!1)}})]})}function _({isOpen:l,onClose:i,vehicle:d,onApply:o,isPro:k=!1}){const[u,y]=c.useState({}),[f,m]=c.useState(!1),[p,g]=c.useState(!1);c.useEffect(()=>{l&&d&&(y({...d}),g(!1))},[l,d]);const F=r=>{y(r),g(!0)},S=()=>{u&&d&&(o({...d,...u}),i())},C=async()=>{if(!(!u||!d)){m(!0);try{const r={...d,...u};await N(r),o(r),i()}catch(r){console.error("Failed to save vehicle:",r),alert("Failed to save vehicle. Please try again.")}finally{m(!1)}}};return c.useEffect(()=>{if(!l)return;const r=w=>{w.key==="Escape"&&i()};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[l,i]),!l||!d?null:e.jsxs(e.Fragment,{children:[e.jsx("div",{onClick:i,style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",zIndex:1e3}}),e.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"var(--color-bg)",borderRadius:"12px",boxShadow:"0 20px 60px rgba(0,0,0,0.5)",zIndex:1001,width:"500px",maxWidth:"95vw",maxHeight:"90vh",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{padding:"14px 18px",borderBottom:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",flexShrink:0},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:"1.1rem",color:"var(--color-text)"},children:"⚙️ Edit Vehicle"}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--color-text-muted)"},children:d.name})]}),e.jsx("button",{onClick:i,style:{background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",color:"var(--color-text-muted)",padding:"0 4px"},children:"×"})]}),e.jsx("div",{style:{padding:"16px",overflowY:"auto",flex:1},children:e.jsx(U,{vehicle:u,onChange:F,isPro:k,compact:!0,showName:!1})}),e.jsxs("div",{style:{padding:"12px 18px",borderTop:"1px solid var(--color-border)",display:"flex",justifyContent:"space-between",alignItems:"center",flexShrink:0,backgroundColor:"var(--color-surface)"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--color-text-muted)"},children:p?"• Unsaved changes":"No changes"}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:i,style:{padding:"8px 16px",borderRadius:"6px",border:"1px solid var(--color-border)",backgroundColor:"transparent",color:"var(--color-text)",cursor:"pointer",fontSize:"0.85rem"},children:"Cancel"}),e.jsx("button",{onClick:S,disabled:!p,style:{padding:"8px 16px",borderRadius:"6px",border:"1px solid var(--color-accent)",backgroundColor:"transparent",color:"var(--color-accent)",cursor:p?"pointer":"not-allowed",opacity:p?1:.5,fontSize:"0.85rem"},title:"Apply changes for this session only",children:"Apply"}),e.jsx("button",{onClick:C,disabled:!p||f,style:{padding:"8px 16px",borderRadius:"6px",border:"none",backgroundColor:p?"var(--color-accent)":"var(--color-border)",color:"white",cursor:p&&!f?"pointer":"not-allowed",fontSize:"0.85rem",fontWeight:500},title:"Save changes permanently",children:f?"Saving...":"Save"})]})]})]})]})}export{_ as default};
//# sourceMappingURL=VehicleEditorPopup-BSuaZut8.js.map
